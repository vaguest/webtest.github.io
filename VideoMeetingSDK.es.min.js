var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r=function(e){try{return!!e()}catch(e){return!0}},n=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),i=n,o=Function.prototype,a=o.call,s=i&&o.bind.bind(a,a),u=i?s:function(e){return function(){return a.apply(e,arguments)}},c=u({}.isPrototypeOf),f=function(e){return e&&e.Math==Math&&e},l=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof e&&e)||function(){return this}()||Function("return this")(),h=n,d=Function.prototype,p=d.apply,v=d.call,y="object"==typeof Reflect&&Reflect.apply||(h?v.bind(p):function(){return v.apply(p,arguments)}),g=u,m=g({}.toString),b=g("".slice),w=function(e){return b(m(e),8,-1)},k=w,_=u,S=function(e){if("Function"===k(e))return _(e)},x="object"==typeof document&&document.all,E={all:x,IS_HTMLDDA:void 0===x&&void 0!==x},T=E.all,O=E.IS_HTMLDDA?function(e){return"function"==typeof e||e===T}:function(e){return"function"==typeof e},R={},A=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),P=n,j=Function.prototype.call,C=P?j.bind(j):function(){return j.apply(j,arguments)},I={},L={}.propertyIsEnumerable,M=Object.getOwnPropertyDescriptor,N=M&&!L.call({1:2},1);I.f=N?function(e){var t=M(this,e);return!!t&&t.enumerable}:L;var B,U,F=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},D=r,q=w,H=Object,V=u("".split),z=D((function(){return!H("z").propertyIsEnumerable(0)}))?function(e){return"String"==q(e)?V(e,""):H(e)}:H,W=function(e){return null==e},G=W,K=TypeError,J=function(e){if(G(e))throw K("Can't call method on "+e);return e},$=z,Y=J,X=function(e){return $(Y(e))},Q=O,Z=E.all,ee=E.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:Q(e)||e===Z}:function(e){return"object"==typeof e?null!==e:Q(e)},te={},re=te,ne=l,ie=O,oe=function(e){return ie(e)?e:void 0},ae=function(e,t){return arguments.length<2?oe(re[e])||oe(ne[e]):re[e]&&re[e][t]||ne[e]&&ne[e][t]},se="undefined"!=typeof navigator&&String(navigator.userAgent)||"",ue=l,ce=se,fe=ue.process,le=ue.Deno,he=fe&&fe.versions||le&&le.version,de=he&&he.v8;de&&(U=(B=de.split("."))[0]>0&&B[0]<4?1:+(B[0]+B[1])),!U&&ce&&(!(B=ce.match(/Edge\/(\d+)/))||B[1]>=74)&&(B=ce.match(/Chrome\/(\d+)/))&&(U=+B[1]);var pe=U,ve=pe,ye=r,ge=!!Object.getOwnPropertySymbols&&!ye((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ve&&ve<41})),me=ge&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,be=ae,we=O,ke=c,_e=Object,Se=me?function(e){return"symbol"==typeof e}:function(e){var t=be("Symbol");return we(t)&&ke(t.prototype,_e(e))},xe=String,Ee=function(e){try{return xe(e)}catch(e){return"Object"}},Te=O,Oe=Ee,Re=TypeError,Ae=function(e){if(Te(e))return e;throw Re(Oe(e)+" is not a function")},Pe=Ae,je=W,Ce=function(e,t){var r=e[t];return je(r)?void 0:Pe(r)},Ie=C,Le=O,Me=ee,Ne=TypeError,Be={exports:{}},Ue=l,Fe=Object.defineProperty,De=function(e,t){try{Fe(Ue,e,{value:t,configurable:!0,writable:!0})}catch(r){Ue[e]=t}return t},qe="__core-js_shared__",He=l[qe]||De(qe,{}),Ve=He;(Be.exports=function(e,t){return Ve[e]||(Ve[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.1",mode:"pure",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"});var ze=Be.exports,We=J,Ge=Object,Ke=function(e){return Ge(We(e))},Je=Ke,$e=u({}.hasOwnProperty),Ye=Object.hasOwn||function(e,t){return $e(Je(e),t)},Xe=u,Qe=0,Ze=Math.random(),et=Xe(1..toString),tt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+et(++Qe+Ze,36)},rt=ze,nt=Ye,it=tt,ot=ge,at=me,st=l.Symbol,ut=rt("wks"),ct=at?st.for||st:st&&st.withoutSetter||it,ft=function(e){return nt(ut,e)||(ut[e]=ot&&nt(st,e)?st[e]:ct("Symbol."+e)),ut[e]},lt=C,ht=ee,dt=Se,pt=Ce,vt=function(e,t){var r,n;if("string"===t&&Le(r=e.toString)&&!Me(n=Ie(r,e)))return n;if(Le(r=e.valueOf)&&!Me(n=Ie(r,e)))return n;if("string"!==t&&Le(r=e.toString)&&!Me(n=Ie(r,e)))return n;throw Ne("Can't convert object to primitive value")},yt=TypeError,gt=ft("toPrimitive"),mt=function(e,t){if(!ht(e)||dt(e))return e;var r,n=pt(e,gt);if(n){if(void 0===t&&(t="default"),r=lt(n,e,t),!ht(r)||dt(r))return r;throw yt("Can't convert object to primitive value")}return void 0===t&&(t="number"),vt(e,t)},bt=Se,wt=function(e){var t=mt(e,"string");return bt(t)?t:t+""},kt=ee,_t=l.document,St=kt(_t)&&kt(_t.createElement),xt=function(e){return St?_t.createElement(e):{}},Et=xt,Tt=!A&&!r((function(){return 7!=Object.defineProperty(Et("div"),"a",{get:function(){return 7}}).a})),Ot=A,Rt=C,At=I,Pt=F,jt=X,Ct=wt,It=Ye,Lt=Tt,Mt=Object.getOwnPropertyDescriptor;R.f=Ot?Mt:function(e,t){if(e=jt(e),t=Ct(t),Lt)try{return Mt(e,t)}catch(e){}if(It(e,t))return Pt(!Rt(At.f,e,t),e[t])};var Nt=r,Bt=O,Ut=/#|\.prototype\./,Ft=function(e,t){var r=qt[Dt(e)];return r==Vt||r!=Ht&&(Bt(t)?Nt(t):!!t)},Dt=Ft.normalize=function(e){return String(e).replace(Ut,".").toLowerCase()},qt=Ft.data={},Ht=Ft.NATIVE="N",Vt=Ft.POLYFILL="P",zt=Ft,Wt=Ae,Gt=n,Kt=S(S.bind),Jt=function(e,t){return Wt(e),void 0===t?e:Gt?Kt(e,t):function(){return e.apply(t,arguments)}},$t={},Yt=A&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Xt=ee,Qt=String,Zt=TypeError,er=function(e){if(Xt(e))return e;throw Zt(Qt(e)+" is not an object")},tr=A,rr=Tt,nr=Yt,ir=er,or=wt,ar=TypeError,sr=Object.defineProperty,ur=Object.getOwnPropertyDescriptor,cr="enumerable",fr="configurable",lr="writable";$t.f=tr?nr?function(e,t,r){if(ir(e),t=or(t),ir(r),"function"==typeof e&&"prototype"===t&&"value"in r&&lr in r&&!r[lr]){var n=ur(e,t);n&&n[lr]&&(e[t]=r.value,r={configurable:fr in r?r[fr]:n[fr],enumerable:cr in r?r[cr]:n[cr],writable:!1})}return sr(e,t,r)}:sr:function(e,t,r){if(ir(e),t=or(t),ir(r),rr)try{return sr(e,t,r)}catch(e){}if("get"in r||"set"in r)throw ar("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var hr=$t,dr=F,pr=A?function(e,t,r){return hr.f(e,t,dr(1,r))}:function(e,t,r){return e[t]=r,e},vr=l,yr=y,gr=S,mr=O,br=R.f,wr=zt,kr=te,_r=Jt,Sr=pr,xr=Ye,Er=function(e){var t=function(r,n,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,i)}return yr(e,this,arguments)};return t.prototype=e.prototype,t},Tr=function(e,t){var r,n,i,o,a,s,u,c,f,l=e.target,h=e.global,d=e.stat,p=e.proto,v=h?vr:d?vr[l]:(vr[l]||{}).prototype,y=h?kr:kr[l]||Sr(kr,l,{})[l],g=y.prototype;for(o in t)n=!(r=wr(h?o:l+(d?".":"#")+o,e.forced))&&v&&xr(v,o),s=y[o],n&&(u=e.dontCallGetSet?(f=br(v,o))&&f.value:v[o]),a=n&&u?u:t[o],n&&typeof s==typeof a||(c=e.bind&&n?_r(a,vr):e.wrap&&n?Er(a):p&&mr(a)?gr(a):a,(e.sham||a&&a.sham||s&&s.sham)&&Sr(c,"sham",!0),Sr(y,o,c),p&&(xr(kr,i=l+"Prototype")||Sr(kr,i,{}),Sr(kr[i],o,a),e.real&&g&&(r||!g[o])&&Sr(g,o,a)))},Or=w,Rr=Array.isArray||function(e){return"Array"==Or(e)},Ar={};Ar[ft("toStringTag")]="z";var Pr="[object z]"===String(Ar),jr=Pr,Cr=O,Ir=w,Lr=ft("toStringTag"),Mr=Object,Nr="Arguments"==Ir(function(){return arguments}()),Br=jr?Ir:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Mr(e),Lr))?r:Nr?Ir(t):"Object"==(n=Ir(t))&&Cr(t.callee)?"Arguments":n},Ur=O,Fr=He,Dr=u(Function.toString);Ur(Fr.inspectSource)||(Fr.inspectSource=function(e){return Dr(e)});var qr=Fr.inspectSource,Hr=u,Vr=r,zr=O,Wr=Br,Gr=qr,Kr=function(){},Jr=[],$r=ae("Reflect","construct"),Yr=/^\s*(?:class|function)\b/,Xr=Hr(Yr.exec),Qr=!Yr.exec(Kr),Zr=function(e){if(!zr(e))return!1;try{return $r(Kr,Jr,e),!0}catch(e){return!1}},en=function(e){if(!zr(e))return!1;switch(Wr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Qr||!!Xr(Yr,Gr(e))}catch(e){return!0}};en.sham=!0;var tn=!$r||Vr((function(){var e;return Zr(Zr.call)||!Zr(Object)||!Zr((function(){e=!0}))||e}))?en:Zr,rn=Math.ceil,nn=Math.floor,on=Math.trunc||function(e){var t=+e;return(t>0?nn:rn)(t)},an=on,sn=function(e){var t=+e;return t!=t||0===t?0:an(t)},un=sn,cn=Math.max,fn=Math.min,ln=function(e,t){var r=un(e);return r<0?cn(r+t,0):fn(r,t)},hn=sn,dn=Math.min,pn=function(e){return e>0?dn(hn(e),9007199254740991):0},vn=pn,yn=function(e){return vn(e.length)},gn=wt,mn=$t,bn=F,wn=function(e,t,r){var n=gn(t);n in e?mn.f(e,n,bn(0,r)):e[n]=r},kn=r,_n=pe,Sn=ft("species"),xn=function(e){return _n>=51||!kn((function(){var t=[];return(t.constructor={})[Sn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},En=u([].slice),Tn=Tr,On=Rr,Rn=tn,An=ee,Pn=ln,jn=yn,Cn=X,In=wn,Ln=ft,Mn=En,Nn=xn("slice"),Bn=Ln("species"),Un=Array,Fn=Math.max;Tn({target:"Array",proto:!0,forced:!Nn},{slice:function(e,t){var r,n,i,o=Cn(this),a=jn(o),s=Pn(e,a),u=Pn(void 0===t?a:t,a);if(On(o)&&(r=o.constructor,(Rn(r)&&(r===Un||On(r.prototype))||An(r)&&null===(r=r[Bn]))&&(r=void 0),r===Un||void 0===r))return Mn(o,s,u);for(n=new(void 0===r?Un:r)(Fn(u-s,0)),i=0;s<u;s++,i++)s in o&&In(n,i,o[s]);return n.length=i,n}});var Dn,qn,Hn,Vn=te,zn=function(e){return Vn[e+"Prototype"]},Wn=zn("Array").slice,Gn=c,Kn=Wn,Jn=Array.prototype,$n=function(e){var t=e.slice;return e===Jn||Gn(Jn,e)&&t===Jn.slice?Kn:t},Yn=$n,Xn=t(Yn),Qn=Br,Zn=String,ei=function(e){if("Symbol"===Qn(e))throw TypeError("Cannot convert a Symbol value to a string");return Zn(e)},ti=u,ri=sn,ni=ei,ii=J,oi=ti("".charAt),ai=ti("".charCodeAt),si=ti("".slice),ui=function(e){return function(t,r){var n,i,o=ni(ii(t)),a=ri(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=ai(o,a))<55296||n>56319||a+1===s||(i=ai(o,a+1))<56320||i>57343?e?oi(o,a):n:e?si(o,a,a+2):i-56320+(n-55296<<10)+65536}},ci={codeAt:ui(!1),charAt:ui(!0)},fi=O,li=l.WeakMap,hi=fi(li)&&/native code/.test(String(li)),di=tt,pi=ze("keys"),vi=function(e){return pi[e]||(pi[e]=di(e))},yi={},gi=hi,mi=l,bi=ee,wi=pr,ki=Ye,_i=He,Si=vi,xi=yi,Ei="Object already initialized",Ti=mi.TypeError,Oi=mi.WeakMap;if(gi||_i.state){var Ri=_i.state||(_i.state=new Oi);Ri.get=Ri.get,Ri.has=Ri.has,Ri.set=Ri.set,Dn=function(e,t){if(Ri.has(e))throw Ti(Ei);return t.facade=e,Ri.set(e,t),t},qn=function(e){return Ri.get(e)||{}},Hn=function(e){return Ri.has(e)}}else{var Ai=Si("state");xi[Ai]=!0,Dn=function(e,t){if(ki(e,Ai))throw Ti(Ei);return t.facade=e,wi(e,Ai,t),t},qn=function(e){return ki(e,Ai)?e[Ai]:{}},Hn=function(e){return ki(e,Ai)}}var Pi={set:Dn,get:qn,has:Hn,enforce:function(e){return Hn(e)?qn(e):Dn(e,{})},getterFor:function(e){return function(t){var r;if(!bi(t)||(r=qn(t)).type!==e)throw Ti("Incompatible receiver, "+e+" required");return r}}},ji=A,Ci=Ye,Ii=Function.prototype,Li=ji&&Object.getOwnPropertyDescriptor,Mi=Ci(Ii,"name"),Ni={EXISTS:Mi,PROPER:Mi&&"something"===function(){}.name,CONFIGURABLE:Mi&&(!ji||ji&&Li(Ii,"name").configurable)},Bi={},Ui=X,Fi=ln,Di=yn,qi=function(e){return function(t,r,n){var i,o=Ui(t),a=Di(o),s=Fi(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},Hi={includes:qi(!0),indexOf:qi(!1)},Vi=Ye,zi=X,Wi=Hi.indexOf,Gi=yi,Ki=u([].push),Ji=function(e,t){var r,n=zi(e),i=0,o=[];for(r in n)!Vi(Gi,r)&&Vi(n,r)&&Ki(o,r);for(;t.length>i;)Vi(n,r=t[i++])&&(~Wi(o,r)||Ki(o,r));return o},$i=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Yi=Ji,Xi=$i,Qi=Object.keys||function(e){return Yi(e,Xi)},Zi=A,eo=Yt,to=$t,ro=er,no=X,io=Qi;Bi.f=Zi&&!eo?Object.defineProperties:function(e,t){ro(e);for(var r,n=no(t),i=io(t),o=i.length,a=0;o>a;)to.f(e,r=i[a++],n[r]);return e};var oo,ao=ae("document","documentElement"),so=er,uo=Bi,co=$i,fo=yi,lo=ao,ho=xt,po="prototype",vo="script",yo=vi("IE_PROTO"),go=function(){},mo=function(e){return"<"+vo+">"+e+"</"+vo+">"},bo=function(e){e.write(mo("")),e.close();var t=e.parentWindow.Object;return e=null,t},wo=function(){try{oo=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;wo="undefined"!=typeof document?document.domain&&oo?bo(oo):(t=ho("iframe"),r="java"+vo+":",t.style.display="none",lo.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(mo("document.F=Object")),e.close(),e.F):bo(oo);for(var n=co.length;n--;)delete wo[po][co[n]];return wo()};fo[yo]=!0;var ko,_o,So,xo=Object.create||function(e,t){var r;return null!==e?(go[po]=so(e),r=new go,go[po]=null,r[yo]=e):r=wo(),void 0===t?r:uo.f(r,t)},Eo=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),To=Ye,Oo=O,Ro=Ke,Ao=Eo,Po=vi("IE_PROTO"),jo=Object,Co=jo.prototype,Io=Ao?jo.getPrototypeOf:function(e){var t=Ro(e);if(To(t,Po))return t[Po];var r=t.constructor;return Oo(r)&&t instanceof r?r.prototype:t instanceof jo?Co:null},Lo=pr,Mo=function(e,t,r,n){return n&&n.enumerable?e[t]=r:Lo(e,t,r),e},No=r,Bo=O,Uo=ee,Fo=xo,Do=Io,qo=Mo,Ho=ft("iterator"),Vo=!1;[].keys&&("next"in(So=[].keys())?(_o=Do(Do(So)))!==Object.prototype&&(ko=_o):Vo=!0);var zo=!Uo(ko)||No((function(){var e={};return ko[Ho].call(e)!==e}));Bo((ko=zo?{}:Fo(ko))[Ho])||qo(ko,Ho,(function(){return this}));var Wo={IteratorPrototype:ko,BUGGY_SAFARI_ITERATORS:Vo},Go=Br,Ko=Pr?{}.toString:function(){return"[object "+Go(this)+"]"},Jo=Pr,$o=$t.f,Yo=pr,Xo=Ye,Qo=Ko,Zo=ft("toStringTag"),ea=function(e,t,r,n){if(e){var i=r?e:e.prototype;Xo(i,Zo)||$o(i,Zo,{configurable:!0,value:t}),n&&!Jo&&Yo(i,"toString",Qo)}},ta={},ra=Wo.IteratorPrototype,na=xo,ia=F,oa=ea,aa=ta,sa=function(){return this},ua=function(e,t,r,n){var i=t+" Iterator";return e.prototype=na(ra,{next:ia(+!n,r)}),oa(e,i,!1,!0),aa[i]=sa,e},ca=u,fa=Ae,la=O,ha=String,da=TypeError,pa=function(e,t,r){try{return ca(fa(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}},va=er,ya=function(e){if("object"==typeof e||la(e))return e;throw da("Can't set "+ha(e)+" as a prototype")},ga=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=pa(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return va(r),ya(n),t?e(r,n):r.__proto__=n,r}}():void 0),ma=Tr,ba=C,wa=Ni,ka=ua,_a=Io,Sa=ea,xa=Mo,Ea=ta,Ta=Wo,Oa=wa.PROPER,Ra=Ta.BUGGY_SAFARI_ITERATORS,Aa=ft("iterator"),Pa="keys",ja="values",Ca="entries",Ia=function(){return this},La=function(e,t,r,n,i,o,a){ka(r,t,n);var s,u,c,f=function(e){if(e===i&&v)return v;if(!Ra&&e in d)return d[e];switch(e){case Pa:case ja:case Ca:return function(){return new r(this,e)}}return function(){return new r(this)}},l=t+" Iterator",h=!1,d=e.prototype,p=d[Aa]||d["@@iterator"]||i&&d[i],v=!Ra&&p||f(i),y="Array"==t&&d.entries||p;if(y&&(s=_a(y.call(new e)))!==Object.prototype&&s.next&&(Sa(s,l,!0,!0),Ea[l]=Ia),Oa&&i==ja&&p&&p.name!==ja&&(h=!0,v=function(){return ba(p,this)}),i)if(u={values:f(ja),keys:o?v:f(Pa),entries:f(Ca)},a)for(c in u)(Ra||h||!(c in d))&&xa(d,c,u[c]);else ma({target:t,proto:!0,forced:Ra||h},u);return a&&d[Aa]!==v&&xa(d,Aa,v,{name:i}),Ea[t]=v,u},Ma=function(e,t){return{value:e,done:t}},Na=ci.charAt,Ba=ei,Ua=Pi,Fa=La,Da=Ma,qa="String Iterator",Ha=Ua.set,Va=Ua.getterFor(qa);Fa(String,"String",(function(e){Ha(this,{type:qa,string:Ba(e),index:0})}),(function(){var e,t=Va(this),r=t.string,n=t.index;return n>=r.length?Da(void 0,!0):(e=Na(r,n),t.index+=e.length,Da(e,!1))}));var za=C,Wa=er,Ga=Ce,Ka=function(e,t,r){var n,i;Wa(e);try{if(!(n=Ga(e,"return"))){if("throw"===t)throw r;return r}n=za(n,e)}catch(e){i=!0,n=e}if("throw"===t)throw r;if(i)throw n;return Wa(n),r},Ja=er,$a=Ka,Ya=ta,Xa=ft("iterator"),Qa=Array.prototype,Za=function(e){return void 0!==e&&(Ya.Array===e||Qa[Xa]===e)},es=Br,ts=Ce,rs=W,ns=ta,is=ft("iterator"),os=function(e){if(!rs(e))return ts(e,is)||ts(e,"@@iterator")||ns[es(e)]},as=C,ss=Ae,us=er,cs=Ee,fs=os,ls=TypeError,hs=function(e,t){var r=arguments.length<2?fs(e):t;if(ss(r))return us(as(r,e));throw ls(cs(e)+" is not iterable")},ds=Jt,ps=C,vs=Ke,ys=function(e,t,r,n){try{return n?t(Ja(r)[0],r[1]):t(r)}catch(t){$a(e,"throw",t)}},gs=Za,ms=tn,bs=yn,ws=wn,ks=hs,_s=os,Ss=Array,xs=function(e){var t=vs(e),r=ms(this),n=arguments.length,i=n>1?arguments[1]:void 0,o=void 0!==i;o&&(i=ds(i,n>2?arguments[2]:void 0));var a,s,u,c,f,l,h=_s(t),d=0;if(!h||this===Ss&&gs(h))for(a=bs(t),s=r?new this(a):Ss(a);a>d;d++)l=o?i(t[d],d):t[d],ws(s,d,l);else for(f=(c=ks(t,h)).next,s=r?new this:[];!(u=ps(f,c)).done;d++)l=o?ys(c,i,[u.value,d],!0):u.value,ws(s,d,l);return s.length=d,s},Es=ft("iterator"),Ts=!1;try{var Os=0,Rs={next:function(){return{done:!!Os++}},return:function(){Ts=!0}};Rs[Es]=function(){return this},Array.from(Rs,(function(){throw 2}))}catch(e){}var As=function(e,t){if(!t&&!Ts)return!1;var r=!1;try{var n={};n[Es]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},Ps=xs;Tr({target:"Array",stat:!0,forced:!As((function(e){Array.from(e)}))},{from:Ps});var js=te.Array.from,Cs=t(js),Is=TypeError,Ls=function(e){if(e>9007199254740991)throw Is("Maximum allowed index exceeded");return e},Ms=Rr,Ns=tn,Bs=ee,Us=ft("species"),Fs=Array,Ds=function(e){var t;return Ms(e)&&(t=e.constructor,(Ns(t)&&(t===Fs||Ms(t.prototype))||Bs(t)&&null===(t=t[Us]))&&(t=void 0)),void 0===t?Fs:t},qs=function(e,t){return new(Ds(e))(0===t?0:t)},Hs=Tr,Vs=r,zs=Rr,Ws=ee,Gs=Ke,Ks=yn,Js=Ls,$s=wn,Ys=qs,Xs=xn,Qs=pe,Zs=ft("isConcatSpreadable"),eu=Qs>=51||!Vs((function(){var e=[];return e[Zs]=!1,e.concat()[0]!==e})),tu=function(e){if(!Ws(e))return!1;var t=e[Zs];return void 0!==t?!!t:zs(e)};Hs({target:"Array",proto:!0,arity:1,forced:!eu||!Xs("concat")},{concat:function(e){var t,r,n,i,o,a=Gs(this),s=Ys(a,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(tu(o=-1===t?a:arguments[t]))for(i=Ks(o),Js(u+i),r=0;r<i;r++,u++)r in o&&$s(s,u,o[r]);else Js(u+1),$s(s,u++,o);return s.length=u,s}});var ru={},nu=Ji,iu=$i.concat("length","prototype");ru.f=Object.getOwnPropertyNames||function(e){return nu(e,iu)};var ou={},au=ln,su=yn,uu=wn,cu=Array,fu=Math.max,lu=function(e,t,r){for(var n=su(e),i=au(t,n),o=au(void 0===r?n:r,n),a=cu(fu(o-i,0)),s=0;i<o;i++,s++)uu(a,s,e[i]);return a.length=s,a},hu=w,du=X,pu=ru.f,vu=lu,yu="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ou.f=function(e){return yu&&"Window"==hu(e)?function(e){try{return pu(e)}catch(e){return vu(yu)}}(e):pu(du(e))};var gu={};gu.f=Object.getOwnPropertySymbols;var mu=$t,bu=function(e,t,r){return mu.f(e,t,r)},wu={},ku=ft;wu.f=ku;var _u=te,Su=Ye,xu=wu,Eu=$t.f,Tu=function(e){var t=_u.Symbol||(_u.Symbol={});Su(t,e)||Eu(t,e,{value:xu.f(e)})},Ou=C,Ru=ae,Au=ft,Pu=Mo,ju=function(){var e=Ru("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=Au("toPrimitive");t&&!t[n]&&Pu(t,n,(function(e){return Ou(r,this)}),{arity:1})},Cu=Jt,Iu=z,Lu=Ke,Mu=yn,Nu=qs,Bu=u([].push),Uu=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(u,c,f,l){for(var h,d,p=Lu(u),v=Iu(p),y=Cu(c,f),g=Mu(v),m=0,b=l||Nu,w=t?b(u,g):r||a?b(u,0):void 0;g>m;m++)if((s||m in v)&&(d=y(h=v[m],m,p),e))if(t)w[m]=d;else if(d)switch(e){case 3:return!0;case 5:return h;case 6:return m;case 2:Bu(w,h)}else switch(e){case 4:return!1;case 7:Bu(w,h)}return o?-1:n||i?i:w}},Fu={forEach:Uu(0),map:Uu(1),filter:Uu(2),some:Uu(3),every:Uu(4),find:Uu(5),findIndex:Uu(6),filterReject:Uu(7)},Du=Tr,qu=l,Hu=C,Vu=u,zu=A,Wu=ge,Gu=r,Ku=Ye,Ju=c,$u=er,Yu=X,Xu=wt,Qu=ei,Zu=F,ec=xo,tc=Qi,rc=ru,nc=ou,ic=gu,oc=R,ac=$t,sc=Bi,uc=I,cc=Mo,fc=bu,lc=ze,hc=yi,dc=tt,pc=ft,vc=wu,yc=Tu,gc=ju,mc=ea,bc=Pi,wc=Fu.forEach,kc=vi("hidden"),_c="Symbol",Sc="prototype",xc=bc.set,Ec=bc.getterFor(_c),Tc=Object[Sc],Oc=qu.Symbol,Rc=Oc&&Oc[Sc],Ac=qu.TypeError,Pc=qu.QObject,jc=oc.f,Cc=ac.f,Ic=nc.f,Lc=uc.f,Mc=Vu([].push),Nc=lc("symbols"),Bc=lc("op-symbols"),Uc=lc("wks"),Fc=!Pc||!Pc[Sc]||!Pc[Sc].findChild,Dc=zu&&Gu((function(){return 7!=ec(Cc({},"a",{get:function(){return Cc(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=jc(Tc,t);n&&delete Tc[t],Cc(e,t,r),n&&e!==Tc&&Cc(Tc,t,n)}:Cc,qc=function(e,t){var r=Nc[e]=ec(Rc);return xc(r,{type:_c,tag:e,description:t}),zu||(r.description=t),r},Hc=function(e,t,r){e===Tc&&Hc(Bc,t,r),$u(e);var n=Xu(t);return $u(r),Ku(Nc,n)?(r.enumerable?(Ku(e,kc)&&e[kc][n]&&(e[kc][n]=!1),r=ec(r,{enumerable:Zu(0,!1)})):(Ku(e,kc)||Cc(e,kc,Zu(1,{})),e[kc][n]=!0),Dc(e,n,r)):Cc(e,n,r)},Vc=function(e,t){$u(e);var r=Yu(t),n=tc(r).concat(Kc(r));return wc(n,(function(t){zu&&!Hu(zc,r,t)||Hc(e,t,r[t])})),e},zc=function(e){var t=Xu(e),r=Hu(Lc,this,t);return!(this===Tc&&Ku(Nc,t)&&!Ku(Bc,t))&&(!(r||!Ku(this,t)||!Ku(Nc,t)||Ku(this,kc)&&this[kc][t])||r)},Wc=function(e,t){var r=Yu(e),n=Xu(t);if(r!==Tc||!Ku(Nc,n)||Ku(Bc,n)){var i=jc(r,n);return!i||!Ku(Nc,n)||Ku(r,kc)&&r[kc][n]||(i.enumerable=!0),i}},Gc=function(e){var t=Ic(Yu(e)),r=[];return wc(t,(function(e){Ku(Nc,e)||Ku(hc,e)||Mc(r,e)})),r},Kc=function(e){var t=e===Tc,r=Ic(t?Bc:Yu(e)),n=[];return wc(r,(function(e){!Ku(Nc,e)||t&&!Ku(Tc,e)||Mc(n,Nc[e])})),n};Wu||(cc(Rc=(Oc=function(){if(Ju(Rc,this))throw Ac("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?Qu(arguments[0]):void 0,t=dc(e),r=function(e){this===Tc&&Hu(r,Bc,e),Ku(this,kc)&&Ku(this[kc],t)&&(this[kc][t]=!1),Dc(this,t,Zu(1,e))};return zu&&Fc&&Dc(Tc,t,{configurable:!0,set:r}),qc(t,e)})[Sc],"toString",(function(){return Ec(this).tag})),cc(Oc,"withoutSetter",(function(e){return qc(dc(e),e)})),uc.f=zc,ac.f=Hc,sc.f=Vc,oc.f=Wc,rc.f=nc.f=Gc,ic.f=Kc,vc.f=function(e){return qc(pc(e),e)},zu&&fc(Rc,"description",{configurable:!0,get:function(){return Ec(this).description}})),Du({global:!0,constructor:!0,wrap:!0,forced:!Wu,sham:!Wu},{Symbol:Oc}),wc(tc(Uc),(function(e){yc(e)})),Du({target:_c,stat:!0,forced:!Wu},{useSetter:function(){Fc=!0},useSimple:function(){Fc=!1}}),Du({target:"Object",stat:!0,forced:!Wu,sham:!zu},{create:function(e,t){return void 0===t?ec(e):Vc(ec(e),t)},defineProperty:Hc,defineProperties:Vc,getOwnPropertyDescriptor:Wc}),Du({target:"Object",stat:!0,forced:!Wu},{getOwnPropertyNames:Gc}),gc(),mc(Oc,_c),hc[kc]=!0;var Jc=ge&&!!Symbol.for&&!!Symbol.keyFor,$c=Tr,Yc=ae,Xc=Ye,Qc=ei,Zc=ze,ef=Jc,tf=Zc("string-to-symbol-registry"),rf=Zc("symbol-to-string-registry");$c({target:"Symbol",stat:!0,forced:!ef},{for:function(e){var t=Qc(e);if(Xc(tf,t))return tf[t];var r=Yc("Symbol")(t);return tf[t]=r,rf[r]=t,r}});var nf=Tr,of=Ye,af=Se,sf=Ee,uf=Jc,cf=ze("symbol-to-string-registry");nf({target:"Symbol",stat:!0,forced:!uf},{keyFor:function(e){if(!af(e))throw TypeError(sf(e)+" is not a symbol");if(of(cf,e))return cf[e]}});var ff=Rr,lf=O,hf=w,df=ei,pf=u([].push),vf=Tr,yf=ae,gf=y,mf=C,bf=u,wf=r,kf=O,_f=Se,Sf=En,xf=function(e){if(lf(e))return e;if(ff(e)){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];"string"==typeof i?pf(r,i):"number"!=typeof i&&"Number"!=hf(i)&&"String"!=hf(i)||pf(r,df(i))}var o=r.length,a=!0;return function(e,t){if(a)return a=!1,t;if(ff(this))return t;for(var n=0;n<o;n++)if(r[n]===e)return t}}},Ef=ge,Tf=String,Of=yf("JSON","stringify"),Rf=bf(/./.exec),Af=bf("".charAt),Pf=bf("".charCodeAt),jf=bf("".replace),Cf=bf(1..toString),If=/[\uD800-\uDFFF]/g,Lf=/^[\uD800-\uDBFF]$/,Mf=/^[\uDC00-\uDFFF]$/,Nf=!Ef||wf((function(){var e=yf("Symbol")();return"[null]"!=Of([e])||"{}"!=Of({a:e})||"{}"!=Of(Object(e))})),Bf=wf((function(){return'"\\udf06\\ud834"'!==Of("\udf06\ud834")||'"\\udead"'!==Of("\udead")})),Uf=function(e,t){var r=Sf(arguments),n=xf(t);if(kf(n)||void 0!==e&&!_f(e))return r[1]=function(e,t){if(kf(n)&&(t=mf(n,this,Tf(e),t)),!_f(t))return t},gf(Of,null,r)},Ff=function(e,t,r){var n=Af(r,t-1),i=Af(r,t+1);return Rf(Lf,e)&&!Rf(Mf,i)||Rf(Mf,e)&&!Rf(Lf,n)?"\\u"+Cf(Pf(e,0),16):e};Of&&vf({target:"JSON",stat:!0,arity:3,forced:Nf||Bf},{stringify:function(e,t,r){var n=Sf(arguments),i=gf(Nf?Uf:Of,null,n);return Bf&&"string"==typeof i?jf(i,If,Ff):i}});var Df=gu,qf=Ke;Tr({target:"Object",stat:!0,forced:!ge||r((function(){Df.f(1)}))},{getOwnPropertySymbols:function(e){var t=Df.f;return t?t(qf(e)):[]}}),Tu("asyncIterator"),Tu("hasInstance"),Tu("isConcatSpreadable"),Tu("iterator"),Tu("match"),Tu("matchAll"),Tu("replace"),Tu("search"),Tu("species"),Tu("split");var Hf=ju;Tu("toPrimitive"),Hf();var Vf=ae,zf=ea;Tu("toStringTag"),zf(Vf("Symbol"),"Symbol"),Tu("unscopables"),ea(l.JSON,"JSON",!0);var Wf=te.Symbol,Gf=X,Kf=ta,Jf=Pi;$t.f;var $f=La,Yf=Ma,Xf="Array Iterator",Qf=Jf.set,Zf=Jf.getterFor(Xf);$f(Array,"Array",(function(e,t){Qf(this,{type:Xf,target:Gf(e),index:0,kind:t})}),(function(){var e=Zf(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,Yf(void 0,!0)):Yf("keys"==r?n:"values"==r?t[n]:[n,t[n]],!1)}),"values"),Kf.Arguments=Kf.Array;var el={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},tl=l,rl=Br,nl=pr,il=ta,ol=ft("toStringTag");for(var al in el){var sl=tl[al],ul=sl&&sl.prototype;ul&&rl(ul)!==ol&&nl(ul,ol,al),il[al]=il.Array}var cl=Wf,fl=t(cl),ll=t(os);Tr({target:"Array",stat:!0},{isArray:Rr});var hl=te.Array.isArray,dl=t(hl),pl=ae,vl=ru,yl=gu,gl=er,ml=u([].concat),bl=pl("Reflect","ownKeys")||function(e){var t=vl.f(gl(e)),r=yl.f;return r?ml(t,r(e)):t},wl=Ye,kl=bl,_l=R,Sl=$t,xl=ee,El=pr,Tl=Error,Ol=u("".replace),Rl=String(Tl("zxcasd").stack),Al=/\n\s*at [^:]*:[^\n]*/,Pl=Al.test(Rl),jl=F,Cl=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",jl(1,7)),7!==e.stack)})),Il=pr,Ll=function(e,t){if(Pl&&"string"==typeof e&&!Tl.prepareStackTrace)for(;t--;)e=Ol(e,Al,"");return e},Ml=Cl,Nl=Error.captureStackTrace,Bl=Jt,Ul=C,Fl=er,Dl=Ee,ql=Za,Hl=yn,Vl=c,zl=hs,Wl=os,Gl=Ka,Kl=TypeError,Jl=function(e,t){this.stopped=e,this.result=t},$l=Jl.prototype,Yl=function(e,t,r){var n,i,o,a,s,u,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),d=!(!r||!r.IS_ITERATOR),p=!(!r||!r.INTERRUPTED),v=Bl(t,f),y=function(e){return n&&Gl(n,"normal",e),new Jl(!0,e)},g=function(e){return l?(Fl(e),p?v(e[0],e[1],y):v(e[0],e[1])):p?v(e,y):v(e)};if(h)n=e.iterator;else if(d)n=e;else{if(!(i=Wl(e)))throw Kl(Dl(e)+" is not iterable");if(ql(i)){for(o=0,a=Hl(e);a>o;o++)if((s=g(e[o]))&&Vl($l,s))return s;return new Jl(!1)}n=zl(e,i)}for(u=h?e.next:n.next;!(c=Ul(u,n)).done;){try{s=g(c.value)}catch(e){Gl(n,"throw",e)}if("object"==typeof s&&s&&Vl($l,s))return s}return new Jl(!1)},Xl=ei,Ql=Tr,Zl=c,eh=Io,th=ga,rh=function(e,t,r){for(var n=kl(t),i=Sl.f,o=_l.f,a=0;a<n.length;a++){var s=n[a];wl(e,s)||r&&wl(r,s)||i(e,s,o(t,s))}},nh=xo,ih=pr,oh=F,ah=function(e,t){xl(t)&&"cause"in t&&El(e,"cause",t.cause)},sh=function(e,t,r,n){Ml&&(Nl?Nl(e,t):Il(e,"stack",Ll(r,n)))},uh=Yl,ch=function(e,t){return void 0===e?arguments.length<2?"":t:Xl(e)},fh=ft("toStringTag"),lh=Error,hh=[].push,dh=function(e,t){var r,n=Zl(ph,this);th?r=th(lh(),n?eh(this):ph):(r=n?this:nh(ph),ih(r,fh,"Error")),void 0!==t&&ih(r,"message",ch(t)),sh(r,dh,r.stack,1),arguments.length>2&&ah(r,arguments[2]);var i=[];return uh(e,hh,{that:i}),ih(r,"errors",i),r};th?th(dh,lh):rh(dh,lh,{name:!0});var ph=dh.prototype=nh(lh.prototype,{constructor:oh(1,dh),message:oh(1,""),name:oh(1,"AggregateError")});Ql({global:!0,constructor:!0,arity:2},{AggregateError:dh});var vh,yh,gh,mh,bh="undefined"!=typeof process&&"process"==w(process),wh=ae,kh=bu,_h=A,Sh=ft("species"),xh=function(e){var t=wh(e);_h&&t&&!t[Sh]&&kh(t,Sh,{configurable:!0,get:function(){return this}})},Eh=c,Th=TypeError,Oh=function(e,t){if(Eh(t,e))return e;throw Th("Incorrect invocation")},Rh=tn,Ah=Ee,Ph=TypeError,jh=function(e){if(Rh(e))return e;throw Ph(Ah(e)+" is not a constructor")},Ch=er,Ih=jh,Lh=W,Mh=ft("species"),Nh=function(e,t){var r,n=Ch(e).constructor;return void 0===n||Lh(r=Ch(n)[Mh])?t:Ih(r)},Bh=TypeError,Uh=function(e,t){if(e<t)throw Bh("Not enough arguments");return e},Fh=/(?:ipad|iphone|ipod).*applewebkit/i.test(se),Dh=l,qh=y,Hh=Jt,Vh=O,zh=Ye,Wh=r,Gh=ao,Kh=En,Jh=xt,$h=Uh,Yh=Fh,Xh=bh,Qh=Dh.setImmediate,Zh=Dh.clearImmediate,ed=Dh.process,td=Dh.Dispatch,rd=Dh.Function,nd=Dh.MessageChannel,id=Dh.String,od=0,ad={},sd="onreadystatechange";Wh((function(){vh=Dh.location}));var ud=function(e){if(zh(ad,e)){var t=ad[e];delete ad[e],t()}},cd=function(e){return function(){ud(e)}},fd=function(e){ud(e.data)},ld=function(e){Dh.postMessage(id(e),vh.protocol+"//"+vh.host)};Qh&&Zh||(Qh=function(e){$h(arguments.length,1);var t=Vh(e)?e:rd(e),r=Kh(arguments,1);return ad[++od]=function(){qh(t,void 0,r)},yh(od),od},Zh=function(e){delete ad[e]},Xh?yh=function(e){ed.nextTick(cd(e))}:td&&td.now?yh=function(e){td.now(cd(e))}:nd&&!Yh?(mh=(gh=new nd).port2,gh.port1.onmessage=fd,yh=Hh(mh.postMessage,mh)):Dh.addEventListener&&Vh(Dh.postMessage)&&!Dh.importScripts&&vh&&"file:"!==vh.protocol&&!Wh(ld)?(yh=ld,Dh.addEventListener("message",fd,!1)):yh=sd in Jh("script")?function(e){Gh.appendChild(Jh("script"))[sd]=function(){Gh.removeChild(this),ud(e)}}:function(e){setTimeout(cd(e),0)});var hd={set:Qh,clear:Zh},dd=function(){this.head=null,this.tail=null};dd.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var pd,vd,yd,gd,md,bd=dd,wd=/ipad|iphone|ipod/i.test(se)&&"undefined"!=typeof Pebble,kd=/web0s(?!.*chrome)/i.test(se),_d=l,Sd=Jt,xd=R.f,Ed=hd.set,Td=bd,Od=Fh,Rd=wd,Ad=kd,Pd=bh,jd=_d.MutationObserver||_d.WebKitMutationObserver,Cd=_d.document,Id=_d.process,Ld=_d.Promise,Md=xd(_d,"queueMicrotask"),Nd=Md&&Md.value;if(!Nd){var Bd=new Td,Ud=function(){var e,t;for(Pd&&(e=Id.domain)&&e.exit();t=Bd.get();)try{t()}catch(e){throw Bd.head&&pd(),e}e&&e.enter()};Od||Pd||Ad||!jd||!Cd?!Rd&&Ld&&Ld.resolve?((gd=Ld.resolve(void 0)).constructor=Ld,md=Sd(gd.then,gd),pd=function(){md(Ud)}):Pd?pd=function(){Id.nextTick(Ud)}:(Ed=Sd(Ed,_d),pd=function(){Ed(Ud)}):(vd=!0,yd=Cd.createTextNode(""),new jd(Ud).observe(yd,{characterData:!0}),pd=function(){yd.data=vd=!vd}),Nd=function(e){Bd.head||pd(),Bd.add(e)}}var Fd=Nd,Dd=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},qd=l.Promise,Hd="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Vd=!Hd&&!bh&&"object"==typeof window&&"object"==typeof document,zd=l,Wd=qd,Gd=O,Kd=zt,Jd=qr,$d=ft,Yd=Vd,Xd=Hd,Qd=pe,Zd=Wd&&Wd.prototype,ep=$d("species"),tp=!1,rp=Gd(zd.PromiseRejectionEvent),np=Kd("Promise",(function(){var e=Jd(Wd),t=e!==String(Wd);if(!t&&66===Qd)return!0;if(!Zd.catch||!Zd.finally)return!0;if(!Qd||Qd<51||!/native code/.test(e)){var r=new Wd((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((r.constructor={})[ep]=n,!(tp=r.then((function(){}))instanceof n))return!0}return!t&&(Yd||Xd)&&!rp})),ip={CONSTRUCTOR:np,REJECTION_EVENT:rp,SUBCLASSING:tp},op={},ap=Ae,sp=TypeError,up=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw sp("Bad Promise constructor");t=e,r=n})),this.resolve=ap(t),this.reject=ap(r)};op.f=function(e){return new up(e)};var cp,fp,lp=Tr,hp=bh,dp=l,pp=C,vp=Mo,yp=ea,gp=xh,mp=Ae,bp=O,wp=ee,kp=Oh,_p=Nh,Sp=hd.set,xp=Fd,Ep=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},Tp=Dd,Op=bd,Rp=Pi,Ap=qd,Pp=ip,jp=op,Cp="Promise",Ip=Pp.CONSTRUCTOR,Lp=Pp.REJECTION_EVENT,Mp=Rp.getterFor(Cp),Np=Rp.set,Bp=Ap&&Ap.prototype,Up=Ap,Fp=Bp,Dp=dp.TypeError,qp=dp.document,Hp=dp.process,Vp=jp.f,zp=Vp,Wp=!!(qp&&qp.createEvent&&dp.dispatchEvent),Gp="unhandledrejection",Kp=function(e){var t;return!(!wp(e)||!bp(t=e.then))&&t},Jp=function(e,t){var r,n,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,u=e.resolve,c=e.reject,f=e.domain;try{s?(a||(2===t.rejection&&Zp(t),t.rejection=1),!0===s?r=o:(f&&f.enter(),r=s(o),f&&(f.exit(),i=!0)),r===e.promise?c(Dp("Promise-chain cycle")):(n=Kp(r))?pp(n,r,u,c):u(r)):c(o)}catch(e){f&&!i&&f.exit(),c(e)}},$p=function(e,t){e.notified||(e.notified=!0,xp((function(){for(var r,n=e.reactions;r=n.get();)Jp(r,e);e.notified=!1,t&&!e.rejection&&Xp(e)})))},Yp=function(e,t,r){var n,i;Wp?((n=qp.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),dp.dispatchEvent(n)):n={promise:t,reason:r},!Lp&&(i=dp["on"+e])?i(n):e===Gp&&Ep("Unhandled promise rejection",r)},Xp=function(e){pp(Sp,dp,(function(){var t,r=e.facade,n=e.value;if(Qp(e)&&(t=Tp((function(){hp?Hp.emit("unhandledRejection",n,r):Yp(Gp,r,n)})),e.rejection=hp||Qp(e)?2:1,t.error))throw t.value}))},Qp=function(e){return 1!==e.rejection&&!e.parent},Zp=function(e){pp(Sp,dp,(function(){var t=e.facade;hp?Hp.emit("rejectionHandled",t):Yp("rejectionhandled",t,e.value)}))},ev=function(e,t,r){return function(n){e(t,n,r)}},tv=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,$p(e,!0))},rv=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw Dp("Promise can't be resolved itself");var n=Kp(t);n?xp((function(){var r={done:!1};try{pp(n,t,ev(rv,r,e),ev(tv,r,e))}catch(t){tv(r,t,e)}})):(e.value=t,e.state=1,$p(e,!1))}catch(t){tv({done:!1},t,e)}}};Ip&&(Fp=(Up=function(e){kp(this,Fp),mp(e),pp(cp,this);var t=Mp(this);try{e(ev(rv,t),ev(tv,t))}catch(e){tv(t,e)}}).prototype,(cp=function(e){Np(this,{type:Cp,done:!1,notified:!1,parent:!1,reactions:new Op,rejection:!1,state:0,value:void 0})}).prototype=vp(Fp,"then",(function(e,t){var r=Mp(this),n=Vp(_p(this,Up));return r.parent=!0,n.ok=!bp(e)||e,n.fail=bp(t)&&t,n.domain=hp?Hp.domain:void 0,0==r.state?r.reactions.add(n):xp((function(){Jp(n,r)})),n.promise})),fp=function(){var e=new cp,t=Mp(e);this.promise=e,this.resolve=ev(rv,t),this.reject=ev(tv,t)},jp.f=Vp=function(e){return e===Up||undefined===e?new fp(e):zp(e)}),lp({global:!0,constructor:!0,wrap:!0,forced:Ip},{Promise:Up}),yp(Up,Cp,!1,!0),gp(Cp);var nv=qd,iv=ip.CONSTRUCTOR||!As((function(e){nv.all(e).then(void 0,(function(){}))})),ov=C,av=Ae,sv=op,uv=Dd,cv=Yl;Tr({target:"Promise",stat:!0,forced:iv},{all:function(e){var t=this,r=sv.f(t),n=r.resolve,i=r.reject,o=uv((function(){var r=av(t.resolve),o=[],a=0,s=1;cv(e,(function(e){var u=a++,c=!1;s++,ov(r,t,e).then((function(e){c||(c=!0,o[u]=e,--s||n(o))}),i)})),--s||n(o)}));return o.error&&i(o.value),r.promise}});var fv=Tr,lv=ip.CONSTRUCTOR;qd&&qd.prototype,fv({target:"Promise",proto:!0,forced:lv,real:!0},{catch:function(e){return this.then(void 0,e)}});var hv=C,dv=Ae,pv=op,vv=Dd,yv=Yl;Tr({target:"Promise",stat:!0,forced:iv},{race:function(e){var t=this,r=pv.f(t),n=r.reject,i=vv((function(){var i=dv(t.resolve);yv(e,(function(e){hv(i,t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}});var gv=C,mv=op;Tr({target:"Promise",stat:!0,forced:ip.CONSTRUCTOR},{reject:function(e){var t=mv.f(this);return gv(t.reject,void 0,e),t.promise}});var bv=er,wv=ee,kv=op,_v=function(e,t){if(bv(e),wv(t)&&t.constructor===e)return t;var r=kv.f(e);return(0,r.resolve)(t),r.promise},Sv=Tr,xv=qd,Ev=ip.CONSTRUCTOR,Tv=_v,Ov=ae("Promise"),Rv=!Ev;Sv({target:"Promise",stat:!0,forced:true},{resolve:function(e){return Tv(Rv&&this===Ov?xv:this,e)}});var Av=C,Pv=Ae,jv=op,Cv=Dd,Iv=Yl;Tr({target:"Promise",stat:!0,forced:iv},{allSettled:function(e){var t=this,r=jv.f(t),n=r.resolve,i=r.reject,o=Cv((function(){var r=Pv(t.resolve),i=[],o=0,a=1;Iv(e,(function(e){var s=o++,u=!1;a++,Av(r,t,e).then((function(e){u||(u=!0,i[s]={status:"fulfilled",value:e},--a||n(i))}),(function(e){u||(u=!0,i[s]={status:"rejected",reason:e},--a||n(i))}))})),--a||n(i)}));return o.error&&i(o.value),r.promise}});var Lv=C,Mv=Ae,Nv=ae,Bv=op,Uv=Dd,Fv=Yl,Dv="No one promise resolved";Tr({target:"Promise",stat:!0,forced:iv},{any:function(e){var t=this,r=Nv("AggregateError"),n=Bv.f(t),i=n.resolve,o=n.reject,a=Uv((function(){var n=Mv(t.resolve),a=[],s=0,u=1,c=!1;Fv(e,(function(e){var f=s++,l=!1;u++,Lv(n,t,e).then((function(e){l||c||(c=!0,i(e))}),(function(e){l||c||(l=!0,a[f]=e,--u||o(new r(a,Dv)))}))})),--u||o(new r(a,Dv))}));return a.error&&o(a.value),n.promise}});var qv=Tr,Hv=qd,Vv=r,zv=ae,Wv=O,Gv=Nh,Kv=_v,Jv=Hv&&Hv.prototype;qv({target:"Promise",proto:!0,real:!0,forced:!!Hv&&Vv((function(){Jv.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Gv(this,zv("Promise")),r=Wv(e);return this.then(r?function(r){return Kv(t,e()).then((function(){return r}))}:e,r?function(r){return Kv(t,e()).then((function(){throw r}))}:e)}});var $v=te.Promise,Yv=$v,Xv=op,Qv=Dd;Tr({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=Xv.f(this),r=Qv(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var Zv=Yv,ey=t(Zv);function ty(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):ey.resolve(u).then(n,i)}function ry(e){return function(){var t=this,r=arguments;return new ey((function(n,i){var o=e.apply(t,r);function a(e){ty(o,n,i,a,s,"next",e)}function s(e){ty(o,n,i,a,s,"throw",e)}a(void 0)}))}}function ny(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var iy={exports:{}},oy=Tr,ay=A,sy=$t.f;oy({target:"Object",stat:!0,forced:Object.defineProperty!==sy,sham:!ay},{defineProperty:sy});var uy=te.Object,cy=iy.exports=function(e,t,r){return uy.defineProperty(e,t,r)};uy.defineProperty.sham&&(cy.sham=!0);var fy=iy.exports,ly=fy,hy=t(ly);Tu("dispose");var dy=cl;Tu("asyncDispose");var py=Tr,vy=u,yy=ae("Symbol"),gy=yy.keyFor,my=vy(yy.prototype.valueOf);py({target:"Symbol",stat:!0},{isRegistered:function(e){try{return void 0!==gy(my(e))}catch(e){return!1}}});for(var by=Tr,wy=ze,ky=ae,_y=u,Sy=Se,xy=ft,Ey=ky("Symbol"),Ty=Ey.isWellKnown,Oy=ky("Object","getOwnPropertyNames"),Ry=_y(Ey.prototype.valueOf),Ay=wy("wks"),Py=0,jy=Oy(Ey),Cy=jy.length;Py<Cy;Py++)try{var Iy=jy[Py];Sy(Ey[Iy])&&xy(Iy)}catch(e){}by({target:"Symbol",stat:!0,forced:!0},{isWellKnown:function(e){if(Ty&&Ty(e))return!0;try{for(var t=Ry(e),r=0,n=Oy(Ay),i=n.length;r<i;r++)if(Ay[n[r]]==t)return!0}catch(e){}return!1}}),Tu("matcher"),Tu("metadataKey"),Tu("observable"),Tu("metadata"),Tu("patternMatch"),Tu("replaceAll");var Ly=dy,My=t(Ly),Ny=wu.f("iterator"),By=t(Ny);function Uy(e){return Uy="function"==typeof My&&"symbol"==typeof By?function(e){return typeof e}:function(e){return e&&"function"==typeof My&&e.constructor===My&&e!==My.prototype?"symbol":typeof e},Uy(e)}var Fy=t(wu.f("toPrimitive"));function Dy(e){var t=function(e,t){if("object"!==Uy(e)||null===e)return e;var r=e[Fy];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Uy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Uy(t)?t:String(t)}function qy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),hy(e,Dy(n.key),n)}}function Hy(e,t,r){return t&&qy(e.prototype,t),r&&qy(e,r),hy(e,"prototype",{writable:!1}),e}var Vy={exports:{}},zy={exports:{}};!function(e){var t=Ly,r=Ny;function n(i){return e.exports=n="function"==typeof t&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof t&&e.constructor===t&&e!==t.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(zy);var Wy=zy.exports;Tr({target:"Object",stat:!0,sham:!A},{create:xo});var Gy=te.Object,Ky=function(e,t){return Gy.create(e,t)},Jy=Ky,$y=Jy,Yy=t($y),Xy=Ke,Qy=Io,Zy=Eo;Tr({target:"Object",stat:!0,forced:r((function(){Qy(1)})),sham:!Zy},{getPrototypeOf:function(e){return Qy(Xy(e))}});var eg=te.Object.getPrototypeOf,tg=t(eg),rg=r,ng=function(e,t){var r=[][e];return!!r&&rg((function(){r.call(null,t||function(){return 1},1)}))},ig=Fu.forEach,og=ng("forEach")?[].forEach:function(e){return ig(this,e,arguments.length>1?arguments[1]:void 0)};Tr({target:"Array",proto:!0,forced:[].forEach!=og},{forEach:og});var ag=zn("Array").forEach,sg=Br,ug=Ye,cg=c,fg=ag,lg=Array.prototype,hg={DOMTokenList:!0,NodeList:!0},dg=function(e){var t=e.forEach;return e===lg||cg(lg,e)&&t===lg.forEach||ug(hg,sg(e))?fg:t},pg=dg;Tr({target:"Object",stat:!0},{setPrototypeOf:ga});var vg=te.Object.setPrototypeOf,yg=vg,gg=t(yg),mg=Tr,bg=Rr,wg=u([].reverse),kg=[1,2];mg({target:"Array",proto:!0,forced:String(kg)===String(kg.reverse())},{reverse:function(){return bg(this)&&(this.length=this.length),wg(this)}});var _g=zn("Array").reverse,Sg=c,xg=_g,Eg=Array.prototype,Tg=function(e){var t=e.reverse;return e===Eg||Sg(Eg,e)&&t===Eg.reverse?xg:t},Og=Tg,Rg=Yn,Ag=t(Rg);!function(e){var t=Wy.default,r=ly,n=Ly,i=$y,o=eg,a=pg,s=yg,u=Zv,c=Og,f=Rg;function l(){e.exports=l=function(){return h},e.exports.__esModule=!0,e.exports.default=e.exports;var h={},d=Object.prototype,p=d.hasOwnProperty,v=r||function(e,t,r){e[t]=r.value},y="function"==typeof n?n:{},g=y.iterator||"@@iterator",m=y.asyncIterator||"@@asyncIterator",b=y.toStringTag||"@@toStringTag";function w(e,t,n){return r(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{w({},"")}catch(e){w=function(e,t,r){return e[t]=r}}function k(e,t,r,n){var o=t&&t.prototype instanceof x?t:x,a=i(o.prototype),s=new N(n||[]);return v(a,"_invoke",{value:C(e,r,s)}),a}function _(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}h.wrap=k;var S={};function x(){}function E(){}function T(){}var O={};w(O,g,(function(){return this}));var R=o&&o(o(B([])));R&&R!==d&&p.call(R,g)&&(O=R);var A=T.prototype=x.prototype=i(O);function P(e){var t;a(t=["next","throw","return"]).call(t,(function(t){w(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,r){function n(i,o,a,s){var u=_(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==t(f)&&p.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):r.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;v(this,"_invoke",{value:function(e,t){function o(){return new r((function(r,i){n(e,t,r,i)}))}return i=i?i.then(o,o):o()}})}function C(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return U()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=I(a,r);if(s){if(s===S)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=_(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===S)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function I(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),S;var i=_(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,S):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],a(e).call(e,L,this),this.reset(!0)}function B(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(p.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:U}}function U(){return{value:void 0,done:!0}}return E.prototype=T,v(A,"constructor",{value:T,configurable:!0}),v(T,"constructor",{value:E,configurable:!0}),E.displayName=w(T,b,"GeneratorFunction"),h.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},h.mark=function(e){return s?s(e,T):(e.__proto__=T,w(e,b,"GeneratorFunction")),e.prototype=i(A),e},h.awrap=function(e){return{__await:e}},P(j.prototype),w(j.prototype,m,(function(){return this})),h.AsyncIterator=j,h.async=function(e,t,r,n,i){void 0===i&&(i=u);var o=new j(k(e,t,r,n),i);return h.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},P(A),w(A,b,"Generator"),w(A,g,(function(){return this})),w(A,"toString",(function(){return"[object Generator]"})),h.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return c(r).call(r),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},h.values=B,N.prototype={constructor:N,reset:function(e){var t;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,a(t=this.tryEntries).call(t,M),!e)for(var r in this)"t"===r.charAt(0)&&p.call(this,r)&&!isNaN(+f(r).call(r,1))&&(this[r]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=p.call(i,"catchLoc"),s=p.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&p.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:B(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),S}},h}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports}(Vy);var Pg=(0,Vy.exports)(),jg=Pg;try{regeneratorRuntime=Pg}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=Pg:Function("r","regeneratorRuntime = r")(Pg)}var Cg=t(jg),Ig={exports:{}},Lg=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),Mg=r,Ng=ee,Bg=w,Ug=Lg,Fg=Object.isExtensible,Dg=Mg((function(){Fg(1)}))||Ug?function(e){return!!Ng(e)&&((!Ug||"ArrayBuffer"!=Bg(e))&&(!Fg||Fg(e)))}:Fg,qg=!r((function(){return Object.isExtensible(Object.preventExtensions({}))})),Hg=Tr,Vg=u,zg=yi,Wg=ee,Gg=Ye,Kg=$t.f,Jg=ru,$g=ou,Yg=Dg,Xg=qg,Qg=!1,Zg=tt("meta"),em=0,tm=function(e){Kg(e,Zg,{value:{objectID:"O"+em++,weakData:{}}})},rm=Ig.exports={enable:function(){rm.enable=function(){},Qg=!0;var e=Jg.f,t=Vg([].splice),r={};r[Zg]=1,e(r).length&&(Jg.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===Zg){t(n,i,1);break}return n},Hg({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:$g.f}))},fastKey:function(e,t){if(!Wg(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Gg(e,Zg)){if(!Yg(e))return"F";if(!t)return"E";tm(e)}return e[Zg].objectID},getWeakData:function(e,t){if(!Gg(e,Zg)){if(!Yg(e))return!0;if(!t)return!1;tm(e)}return e[Zg].weakData},onFreeze:function(e){return Xg&&Qg&&Yg(e)&&!Gg(e,Zg)&&tm(e),e}};zg[Zg]=!0;var nm=Ig.exports,im=Tr,om=l,am=nm,sm=r,um=pr,cm=Yl,fm=Oh,lm=O,hm=ee,dm=ea,pm=$t.f,vm=Fu.forEach,ym=A,gm=Pi.set,mm=Pi.getterFor,bm=function(e,t,r){var n,i=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),a=i?"set":"add",s=om[e],u=s&&s.prototype,c={};if(ym&&lm(s)&&(o||u.forEach&&!sm((function(){(new s).entries().next()})))){var f=(n=t((function(t,r){gm(fm(t,f),{type:e,collection:new s}),null!=r&&cm(r,t[a],{that:t,AS_ENTRIES:i})}))).prototype,l=mm(e);vm(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in u)||o&&"clear"==e||um(f,e,(function(r,n){var i=l(this).collection;if(!t&&o&&!hm(r))return"get"==e&&void 0;var a=i[e](0===r?0:r,n);return t?this:a}))})),o||pm(f,"size",{configurable:!0,get:function(){return l(this).collection.size}})}else n=r.getConstructor(t,e,i,a),am.enable();return dm(n,e,!1,!0),c[e]=n,im({global:!0,forced:!0},c),o||r.setStrong(n,e,i),n},wm=Mo,km=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:wm(e,n,t[n],r);return e},_m=xo,Sm=bu,xm=km,Em=Jt,Tm=Oh,Om=W,Rm=Yl,Am=La,Pm=Ma,jm=xh,Cm=A,Im=nm.fastKey,Lm=Pi.set,Mm=Pi.getterFor,Nm={getConstructor:function(e,t,r,n){var i=e((function(e,i){Tm(e,o),Lm(e,{type:t,index:_m(null),first:void 0,last:void 0,size:0}),Cm||(e.size=0),Om(i)||Rm(i,e[n],{that:e,AS_ENTRIES:r})})),o=i.prototype,a=Mm(t),s=function(e,t,r){var n,i,o=a(e),s=u(e,t);return s?s.value=r:(o.last=s={index:i=Im(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),Cm?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},u=function(e,t){var r,n=a(e),i=Im(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return xm(o,{clear:function(){for(var e=a(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,Cm?e.size=0:this.size=0},delete:function(e){var t=this,r=a(t),n=u(t,e);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),Cm?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=a(this),n=Em(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),xm(o,r?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Cm&&Sm(o,"size",{configurable:!0,get:function(){return a(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=Mm(t),o=Mm(n);Am(e,t,(function(e,t){Lm(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?Pm("keys"==t?r.key:"values"==t?r.value:[r.key,r.value],!1):(e.target=void 0,Pm(void 0,!0))}),r?"entries":"values",!r,!0),jm(t)}};bm("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Nm);var Bm=t(te.Set),Um=t($v),Fm=te,Dm=y;Fm.JSON||(Fm.JSON={stringify:JSON.stringify});var qm=t((function(e,t,r){return Dm(Fm.JSON.stringify,null,arguments)})),Hm=zn("Array").concat,Vm=c,zm=Hm,Wm=Array.prototype,Gm=function(e){var t=e.concat;return e===Wm||Vm(Wm,e)&&t===Wm.concat?zm:t},Km=t(Gm),Jm=t(dg),$m=Fu.some;Tr({target:"Array",proto:!0,forced:!ng("some")},{some:function(e){return $m(this,e,arguments.length>1?arguments[1]:void 0)}});var Ym=zn("Array").some,Xm=c,Qm=Ym,Zm=Array.prototype,eb=function(e){var t=e.some;return e===Zm||Xm(Zm,e)&&t===Zm.some?Qm:t},tb=t(eb),rb=A,nb=u,ib=Qi,ob=X,ab=nb(I.f),sb=nb([].push),ub=function(e){return function(t){for(var r,n=ob(t),i=ib(n),o=i.length,a=0,s=[];o>a;)r=i[a++],rb&&!ab(n,r)||sb(s,e?[r,n[r]]:n[r]);return s}},cb={entries:ub(!0),values:ub(!1)}.values;Tr({target:"Object",stat:!0},{values:function(e){return cb(e)}});var fb=t(te.Object.values),lb=t(Jy);function hb(){return null!==window.navigator.userAgent.match("Firefox")}function db(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function pb(){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var vb={MIC:"mic",SCREENCAST:"screen-cast",FILE:"file",MIXED:"mixed"},yb={CAMERA:"camera",SCREENCAST:"screen-cast",FILE:"file",MIXED:"mixed"},gb="audio",mb="video",bb=Hy((function e(t,r){ny(this,e),this.width=t,this.height=r})),wb=Hy((function e(t){var r;if(ny(this,e),!tb(r=fb(vb)).call(r,(function(e){return e===t})))throw new TypeError("Invalid source.");this.source=t,this.deviceId=void 0})),kb=Hy((function e(t){var r;if(ny(this,e),!tb(r=fb(yb)).call(r,(function(e){return e===t})))throw new TypeError("Invalid source.");this.source=t,this.deviceId=void 0,this.resolution=void 0,this.frameRate=void 0})),_b=Hy((function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ny(this,e),this.audio=t,this.video=r}));function Sb(e){return"object"===Uy(e.video)&&e.video.source===yb.SCREENCAST}var xb=function(){function e(){ny(this,e)}return Hy(e,null,[{key:"createMediaStream",value:function(e){if("object"!==Uy(e)||!e.audio&&!e.video)return Um.reject(new TypeError("Invalid constrains"));if(!Sb(e)&&"object"===Uy(e.audio)&&e.audio.source===vb.SCREENCAST)return Um.reject(new TypeError("Cannot share screen without video."));if(Sb(e)&&"object"===Uy(e.audio)&&e.audio.source!==vb.SCREENCAST)return Um.reject(new TypeError("Cannot capture video from screen cast while capture audio from other source."));if(!e.audio&&!e.video)return Um.reject(new TypeError("At least one of audio and video must be requested."));var t=lb({});return"object"===Uy(e.audio)&&e.audio.source===vb.MIC?(t.audio=lb({}),null!==window.navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?t.audio.deviceId=e.audio.deviceId:t.audio.deviceId={exact:e.audio.deviceId}):e.audio.source===vb.SCREENCAST?t.audio=!0:t.audio=e.audio,"object"===Uy(e.video)?(t.video=lb({}),"number"==typeof e.video.frameRate&&(t.video.frameRate=e.video.frameRate),e.video.resolution&&e.video.resolution.width&&e.video.resolution.height&&(e.video.source===yb.SCREENCAST?(t.video.width=e.video.resolution.width,t.video.height=e.video.resolution.height):(t.video.width=lb({}),t.video.width.exact=e.video.resolution.width,t.video.height=lb({}),t.video.height.exact=e.video.resolution.height)),"string"==typeof e.video.deviceId&&(t.video.deviceId={exact:e.video.deviceId}),hb()&&e.video.source===yb.SCREENCAST&&(t.video.mediaSource="screen")):t.video=e.video,Sb(e)?navigator.mediaDevices.getDisplayMedia(t):navigator.mediaDevices.getUserMedia(t)}}]),e}(),Eb=u,Tb=Ae,Ob=ee,Rb=Ye,Ab=En,Pb=n,jb=Function,Cb=Eb([].concat),Ib=Eb([].join),Lb={},Mb=Pb?jb.bind:function(e){var t=Tb(this),r=t.prototype,n=Ab(arguments,1),i=function(){var r=Cb(n,Ab(arguments));return this instanceof i?function(e,t,r){if(!Rb(Lb,t)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";Lb[t]=jb("C,a","return new C("+Ib(n,",")+")")}return Lb[t](e,r)}(t,r.length,r):t.apply(e,r)};return Ob(r)&&(i.prototype=r),i},Nb=Tr,Bb=y,Ub=Mb,Fb=jh,Db=er,qb=ee,Hb=xo,Vb=r,zb=ae("Reflect","construct"),Wb=Object.prototype,Gb=[].push,Kb=Vb((function(){function e(){}return!(zb((function(){}),[],e)instanceof e)})),Jb=!Vb((function(){zb((function(){}))})),$b=Kb||Jb;Nb({target:"Reflect",stat:!0,forced:$b,sham:$b},{construct:function(e,t){Fb(e),Db(t);var r=arguments.length<3?e:Fb(arguments[2]);if(Jb&&!Kb)return zb(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return Bb(Gb,n,t),new(Bb(Ub,e,n))}var i=r.prototype,o=Hb(qb(i)?i:Wb),a=Bb(e,o,t);return qb(a)?a:o}});var Yb=te.Reflect.construct,Xb=t(Yb);function Qb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Zb=Mb;Tr({target:"Function",proto:!0,forced:Function.bind!==Zb},{bind:Zb});var ew=zn("Function").bind,tw=c,rw=ew,nw=Function.prototype,iw=function(e){var t=e.bind;return e===nw||tw(nw,e)&&t===nw.bind?rw:t},ow=iw,aw=t(ow);function sw(e,t){var r;return sw=gg?aw(r=gg).call(r):function(e,t){return e.__proto__=t,e},sw(e,t)}function uw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Yy(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),hy(e,"prototype",{writable:!1}),t&&sw(e,t)}function cw(e,t){if(t&&("object"===Uy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qb(e)}function fw(e){var t;return fw=gg?aw(t=tg).call(t):function(e){return e.__proto__||tg(e)},fw(e)}var lw=t(fy),hw=Tr,dw=Hi.indexOf,pw=ng,vw=S([].indexOf),yw=!!vw&&1/vw([1],1,-0)<0;hw({target:"Array",proto:!0,forced:yw||!pw("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return yw?vw(this,e,t)||0:dw(this,e,t)}});var gw=zn("Array").indexOf,mw=c,bw=gw,ww=Array.prototype,kw=function(e){var t=e.indexOf;return e===ww||mw(ww,e)&&t===ww.indexOf?bw:t},_w=kw,Sw=t(_w),xw=A,Ew=Rr,Tw=TypeError,Ow=Object.getOwnPropertyDescriptor,Rw=xw&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}()?function(e,t){if(Ew(e)&&!Ow(e,"length").writable)throw Tw("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},Aw=Ee,Pw=TypeError,jw=function(e,t){if(!delete e[t])throw Pw("Cannot delete property "+Aw(t)+" of "+Aw(e))},Cw=Tr,Iw=Ke,Lw=ln,Mw=sn,Nw=yn,Bw=Rw,Uw=Ls,Fw=qs,Dw=wn,qw=jw,Hw=xn("splice"),Vw=Math.max,zw=Math.min;Cw({target:"Array",proto:!0,forced:!Hw},{splice:function(e,t){var r,n,i,o,a,s,u=Iw(this),c=Nw(u),f=Lw(e,c),l=arguments.length;for(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=zw(Vw(Mw(t),0),c-f)),Uw(c+r-n),i=Fw(u,n),o=0;o<n;o++)(a=f+o)in u&&Dw(i,o,u[a]);if(i.length=n,r<n){for(o=f;o<c-n;o++)s=o+r,(a=o+n)in u?u[s]=u[a]:qw(u,s);for(o=c;o>c-n+r;o--)qw(u,o-1)}else if(r>n)for(o=c-n;o>f;o--)s=o+r-1,(a=o+n-1)in u?u[s]=u[a]:qw(u,s);for(o=0;o<r;o++)u[o+f]=arguments[o+2];return Bw(u,c-n+r),i}});var Ww=zn("Array").splice,Gw=c,Kw=Ww,Jw=Array.prototype,$w=function(e){var t=e.splice;return e===Jw||Gw(Jw,e)&&t===Jw.splice?Kw:t},Yw=t($w),Xw=Fu.map;Tr({target:"Array",proto:!0,forced:!xn("map")},{map:function(e){return Xw(this,e,arguments.length>1?arguments[1]:void 0)}});var Qw=zn("Array").map,Zw=c,ek=Qw,tk=Array.prototype,rk=function(e){var t=e.map;return e===tk||Zw(tk,e)&&t===tk.map?ek:t},nk=t(rk);function ik(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}var ok=function(){var e={dispatcher:{}};e.dispatcher.eventListeners={},this.addEventListener=function(t,r){void 0===e.dispatcher.eventListeners[t]&&(e.dispatcher.eventListeners[t]=[]),e.dispatcher.eventListeners[t].push(r)},this.removeEventListener=function(t,r){var n;if(e.dispatcher.eventListeners[t]){var i,o=Sw(n=e.dispatcher.eventListeners[t]).call(n,r);if(-1!==o)Yw(i=e.dispatcher.eventListeners[t]).call(i,o,1)}},this.clearEventListener=function(t){e.dispatcher.eventListeners[t]=[]},this.dispatchEvent=function(t){var r;e.dispatcher.eventListeners[t.type]&&nk(r=e.dispatcher.eventListeners[t.type]).call(r,(function(e){e(t)}))}},ak=Hy((function e(t){ny(this,e),this.type=t})),sk=function(e){uw(r,ak);var t=ik(r);function r(e,n){var i;return ny(this,r),(i=t.call(this,e)).origin=n.origin,i.message=n.message,i.to=n.to,i}return Hy(r)}(),uk=function(e){uw(r,ak);var t=ik(r);function r(e,n){var i;return ny(this,r),(i=t.call(this,e)).error=n.error,i}return Hy(r)}(),ck=function(e){uw(r,ak);var t=ik(r);function r(e,n){var i;return ny(this,r),(i=t.call(this,e)).kind=n.kind,i}return Hy(r)}();function fk(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}function lk(e,t){return tb(t).call(t,(function(t){return t===e}))}var hk=Hy((function e(t,r,n){if(ny(this,e),!lk(t,[void 0,"mic","screen-cast","file","mixed"]))throw new TypeError("Incorrect value for audioSourceInfo");if(!lk(r,[void 0,"camera","screen-cast","file","encoded-file","raw-file","mixed"]))throw new TypeError("Incorrect value for videoSourceInfo");this.audio=t,this.video=r,this.data=n})),dk=function(e){uw(r,ok);var t=fk(r);function r(e,n,i){var o;if(ny(this,r),o=t.call(this),e&&!(e instanceof MediaStream)&&!("function"==typeof WebTransportBidirectionalStream&&e instanceof WebTransportBidirectionalStream)||"object"!==Uy(n))throw new TypeError("Invalid stream or sourceInfo.");if(e&&e instanceof MediaStream&&(e.getAudioTracks().length>0&&!n.audio||e.getVideoTracks().length>0&&!n.video))throw new TypeError("Missing audio source info or video source info.");return e instanceof MediaStream&&lw(Qb(o),"mediaStream",{configurable:!1,writable:!0,value:e}),lw(Qb(o),"stream",{configurable:!1,writable:!0,value:e}),lw(Qb(o),"source",{configurable:!1,writable:!0,value:n}),lw(Qb(o),"attributes",{configurable:!0,writable:!1,value:i}),o}return Hy(r)}(),pk=function(e){uw(r,dk);var t=fk(r);function r(e,n,i){var o;if(ny(this,r),!e)throw new TypeError("Stream cannot be null.");return o=t.call(this,e,n,i),lw(Qb(o),"id",{configurable:!1,writable:!1,value:pb()}),o}return Hy(r)}(),vk=function(e){uw(r,dk);var t=fk(r);function r(e,n,i,o,a){var s;return ny(this,r),s=t.call(this,i,o,a),lw(Qb(s),"id",{configurable:!1,writable:!1,value:e||pb()}),lw(Qb(s),"origin",{configurable:!1,writable:!1,value:n}),s.settings=void 0,s.extraCapabilities=void 0,s}return Hy(r)}(),yk=function(e){uw(r,ak);var t=fk(r);function r(e,n){var i;return ny(this,r),(i=t.call(this,e)).stream=n.stream,i}return Hy(r)}(),gk=t(vg);bm("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Nm);var mk=te.Map,bk=t(mk),wk=Tr,kk=Fu.find,_k="find",Sk=!0;_k in[]&&Array(1)[_k]((function(){Sk=!1})),wk({target:"Array",proto:!0,forced:Sk},{find:function(e){return kk(this,e,arguments.length>1?arguments[1]:void 0)}});var xk=zn("Array").find,Ek=c,Tk=xk,Ok=Array.prototype,Rk=function(e){var t=e.find;return e===Ok||Ek(Ok,e)&&t===Ok.find?Tk:t},Ak=t(Rk),Pk=zn("Array").values,jk=Br,Ck=Ye,Ik=c,Lk=Pk,Mk=Array.prototype,Nk={DOMTokenList:!0,NodeList:!0},Bk=function(e){var t=e.values;return e===Mk||Ik(Mk,e)&&t===Mk.values||Ck(Nk,jk(e))?Lk:t},Uk=t(Bk),Fk=r,Dk=ft("iterator"),qk=!Fk((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),!e.toJSON||!t.size&&true||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Dk]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),Hk=A,Vk=u,zk=C,Wk=r,Gk=Qi,Kk=gu,Jk=I,$k=Ke,Yk=z,Xk=Object.assign,Qk=Object.defineProperty,Zk=Vk([].concat),e_=!Xk||Wk((function(){if(Hk&&1!==Xk({b:1},Xk(Qk({},"a",{enumerable:!0,get:function(){Qk(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=Xk({},e)[r]||Gk(Xk({},t)).join("")!=n}))?function(e,t){for(var r=$k(e),n=arguments.length,i=1,o=Kk.f,a=Jk.f;n>i;)for(var s,u=Yk(arguments[i++]),c=o?Zk(Gk(u),o(u)):Gk(u),f=c.length,l=0;f>l;)s=c[l++],Hk&&!zk(a,u,s)||(r[s]=u[s]);return r}:Xk,t_=u,r_=2147483647,n_=/[^\0-\u007E]/,i_=/[.\u3002\uFF0E\uFF61]/g,o_="Overflow: input needs wider integers to process",a_=RangeError,s_=t_(i_.exec),u_=Math.floor,c_=String.fromCharCode,f_=t_("".charCodeAt),l_=t_([].join),h_=t_([].push),d_=t_("".replace),p_=t_("".split),v_=t_("".toLowerCase),y_=function(e){return e+22+75*(e<26)},g_=function(e,t,r){var n=0;for(e=r?u_(e/700):e>>1,e+=u_(e/t);e>455;)e=u_(e/35),n+=36;return u_(n+36*e/(e+38))},m_=function(e){var t=[];e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=f_(e,r++);if(i>=55296&&i<=56319&&r<n){var o=f_(e,r++);56320==(64512&o)?h_(t,((1023&i)<<10)+(1023&o)+65536):(h_(t,i),r--)}else h_(t,i)}return t}(e);var r,n,i=e.length,o=128,a=0,s=72;for(r=0;r<e.length;r++)(n=e[r])<128&&h_(t,c_(n));var u=t.length,c=u;for(u&&h_(t,"-");c<i;){var f=r_;for(r=0;r<e.length;r++)(n=e[r])>=o&&n<f&&(f=n);var l=c+1;if(f-o>u_((r_-a)/l))throw a_(o_);for(a+=(f-o)*l,o=f,r=0;r<e.length;r++){if((n=e[r])<o&&++a>r_)throw a_(o_);if(n==o){for(var h=a,d=36;;){var p=d<=s?1:d>=s+26?26:d-s;if(h<p)break;var v=h-p,y=36-p;h_(t,c_(y_(p+v%y))),h=u_(v/y),d+=36}h_(t,c_(y_(h))),s=g_(a,l,c==u),a=0,c++}}a++,o++}return l_(t,"")},b_=lu,w_=Math.floor,k_=function(e,t){var r=e.length,n=w_(r/2);return r<8?__(e,t):S_(e,k_(b_(e,0,n),t),k_(b_(e,n),t),t)},__=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},S_=function(e,t,r,n){for(var i=t.length,o=r.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?n(t[a],r[s])<=0?t[a++]:r[s++]:a<i?t[a++]:r[s++];return e},x_=k_,E_=Tr,T_=l,O_=C,R_=u,A_=A,P_=qk,j_=Mo,C_=bu,I_=km,L_=ea,M_=ua,N_=Pi,B_=Oh,U_=O,F_=Ye,D_=Jt,q_=Br,H_=er,V_=ee,z_=ei,W_=xo,G_=F,K_=hs,J_=os,$_=Uh,Y_=x_,X_=ft("iterator"),Q_="URLSearchParams",Z_=Q_+"Iterator",eS=N_.set,tS=N_.getterFor(Q_),rS=N_.getterFor(Z_),nS=Object.getOwnPropertyDescriptor,iS=function(e){if(!A_)return T_[e];var t=nS(T_,e);return t&&t.value},oS=iS("fetch"),aS=iS("Request"),sS=iS("Headers"),uS=aS&&aS.prototype,cS=sS&&sS.prototype,fS=T_.RegExp,lS=T_.TypeError,hS=T_.decodeURIComponent,dS=T_.encodeURIComponent,pS=R_("".charAt),vS=R_([].join),yS=R_([].push),gS=R_("".replace),mS=R_([].shift),bS=R_([].splice),wS=R_("".split),kS=R_("".slice),_S=/\+/g,SS=Array(4),xS=function(e){return SS[e-1]||(SS[e-1]=fS("((?:%[\\da-f]{2}){"+e+"})","gi"))},ES=function(e){try{return hS(e)}catch(t){return e}},TS=function(e){var t=gS(e,_S," "),r=4;try{return hS(t)}catch(e){for(;r;)t=gS(t,xS(r--),ES);return t}},OS=/[!'()~]|%20/g,RS={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},AS=function(e){return RS[e]},PS=function(e){return gS(dS(e),OS,AS)},jS=M_((function(e,t){eS(this,{type:Z_,iterator:K_(tS(e).entries),kind:t})}),"Iterator",(function(){var e=rS(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r}),!0),CS=function(e){this.entries=[],this.url=null,void 0!==e&&(V_(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===pS(e,0)?kS(e,1):e:z_(e)))};CS.prototype={type:Q_,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,o,a,s,u=J_(e);if(u)for(r=(t=K_(e,u)).next;!(n=O_(r,t)).done;){if(o=(i=K_(H_(n.value))).next,(a=O_(o,i)).done||(s=O_(o,i)).done||!O_(o,i).done)throw lS("Expected sequence with length 2");yS(this.entries,{key:z_(a.value),value:z_(s.value)})}else for(var c in e)F_(e,c)&&yS(this.entries,{key:c,value:z_(e[c])})},parseQuery:function(e){if(e)for(var t,r,n=wS(e,"&"),i=0;i<n.length;)(t=n[i++]).length&&(r=wS(t,"="),yS(this.entries,{key:TS(mS(r)),value:TS(vS(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],yS(r,PS(e.key)+"="+PS(e.value));return vS(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var IS=function(){B_(this,LS);var e=eS(this,new CS(arguments.length>0?arguments[0]:void 0));A_||(this.length=e.entries.length)},LS=IS.prototype;if(I_(LS,{append:function(e,t){$_(arguments.length,2);var r=tS(this);yS(r.entries,{key:z_(e),value:z_(t)}),A_||this.length++,r.updateURL()},delete:function(e){$_(arguments.length,1);for(var t=tS(this),r=t.entries,n=z_(e),i=0;i<r.length;)r[i].key===n?bS(r,i,1):i++;A_||(this.length=r.length),t.updateURL()},get:function(e){$_(arguments.length,1);for(var t=tS(this).entries,r=z_(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){$_(arguments.length,1);for(var t=tS(this).entries,r=z_(e),n=[],i=0;i<t.length;i++)t[i].key===r&&yS(n,t[i].value);return n},has:function(e){$_(arguments.length,1);for(var t=tS(this).entries,r=z_(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){$_(arguments.length,1);for(var r,n=tS(this),i=n.entries,o=!1,a=z_(e),s=z_(t),u=0;u<i.length;u++)(r=i[u]).key===a&&(o?bS(i,u--,1):(o=!0,r.value=s));o||yS(i,{key:a,value:s}),A_||(this.length=i.length),n.updateURL()},sort:function(){var e=tS(this);Y_(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=tS(this).entries,n=D_(e,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new jS(this,"keys")},values:function(){return new jS(this,"values")},entries:function(){return new jS(this,"entries")}},{enumerable:!0}),j_(LS,X_,LS.entries,{name:"entries"}),j_(LS,"toString",(function(){return tS(this).serialize()}),{enumerable:!0}),A_&&C_(LS,"size",{get:function(){return tS(this).entries.length},configurable:!0,enumerable:!0}),L_(IS,Q_),E_({global:!0,constructor:!0,forced:!P_},{URLSearchParams:IS}),!P_&&U_(sS)){var MS=R_(cS.has),NS=R_(cS.set),BS=function(e){if(V_(e)){var t,r=e.body;if(q_(r)===Q_)return t=e.headers?new sS(e.headers):new sS,MS(t,"content-type")||NS(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),W_(e,{body:G_(0,z_(r)),headers:G_(0,t)})}return e};if(U_(oS)&&E_({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return oS(e,arguments.length>1?BS(arguments[1]):{})}}),U_(aS)){var US=function(e){return B_(this,uS),new aS(e,arguments.length>1?BS(arguments[1]):{})};uS.constructor=US,US.prototype=uS,E_({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:US})}}var FS,DS=Tr,qS=A,HS=qk,VS=l,zS=Jt,WS=u,GS=Mo,KS=bu,JS=Oh,$S=Ye,YS=e_,XS=xs,QS=lu,ZS=ci.codeAt,ex=function(e){var t,r,n=[],i=p_(d_(v_(e),i_,"."),".");for(t=0;t<i.length;t++)r=i[t],h_(n,s_(n_,r)?"xn--"+m_(r):r);return l_(n,".")},tx=ei,rx=ea,nx=Uh,ix={URLSearchParams:IS,getState:tS},ox=Pi,ax=ox.set,sx=ox.getterFor("URL"),ux=ix.URLSearchParams,cx=ix.getState,fx=VS.URL,lx=VS.TypeError,hx=VS.parseInt,dx=Math.floor,px=Math.pow,vx=WS("".charAt),yx=WS(/./.exec),gx=WS([].join),mx=WS(1..toString),bx=WS([].pop),wx=WS([].push),kx=WS("".replace),_x=WS([].shift),Sx=WS("".split),xx=WS("".slice),Ex=WS("".toLowerCase),Tx=WS([].unshift),Ox="Invalid scheme",Rx="Invalid host",Ax="Invalid port",Px=/[a-z]/i,jx=/[\d+-.a-z]/i,Cx=/\d/,Ix=/^0x/i,Lx=/^[0-7]+$/,Mx=/^\d+$/,Nx=/^[\da-f]+$/i,Bx=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Ux=/[\0\t\n\r #/:<>?@[\\\]^|]/,Fx=/^[\u0000-\u0020]+/,Dx=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,qx=/[\t\n\r]/g,Hx=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)Tx(t,e%256),e=dx(e/256);return gx(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(t=n,r=i),t}(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=mx(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},Vx={},zx=YS({},Vx,{" ":1,'"':1,"<":1,">":1,"`":1}),Wx=YS({},zx,{"#":1,"?":1,"{":1,"}":1}),Gx=YS({},Wx,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Kx=function(e,t){var r=ZS(e,0);return r>32&&r<127&&!$S(t,e)?e:encodeURIComponent(e)},Jx={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$x=function(e,t){var r;return 2==e.length&&yx(Px,vx(e,0))&&(":"==(r=vx(e,1))||!t&&"|"==r)},Yx=function(e){var t;return e.length>1&&$x(xx(e,0,2))&&(2==e.length||"/"===(t=vx(e,2))||"\\"===t||"?"===t||"#"===t)},Xx=function(e){return"."===e||"%2e"===Ex(e)},Qx={},Zx={},eE={},tE={},rE={},nE={},iE={},oE={},aE={},sE={},uE={},cE={},fE={},lE={},hE={},dE={},pE={},vE={},yE={},gE={},mE={},bE=function(e,t,r){var n,i,o,a=tx(e);if(t){if(i=this.parse(a))throw lx(i);this.searchParams=null}else{if(void 0!==r&&(n=new bE(r,!0)),i=this.parse(a,null,n))throw lx(i);(o=cx(new ux)).bindURL(this),this.searchParams=o}};bE.prototype={type:"URL",parse:function(e,t,r){var n,i,o,a,s,u=this,c=t||Qx,f=0,l="",h=!1,d=!1,p=!1;for(e=tx(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=kx(e,Fx,""),e=kx(e,Dx,"$1")),e=kx(e,qx,""),n=XS(e);f<=n.length;){switch(i=n[f],c){case Qx:if(!i||!yx(Px,i)){if(t)return Ox;c=eE;continue}l+=Ex(i),c=Zx;break;case Zx:if(i&&(yx(jx,i)||"+"==i||"-"==i||"."==i))l+=Ex(i);else{if(":"!=i){if(t)return Ox;l="",c=eE,f=0;continue}if(t&&(u.isSpecial()!=$S(Jx,l)||"file"==l&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=l,t)return void(u.isSpecial()&&Jx[u.scheme]==u.port&&(u.port=null));l="","file"==u.scheme?c=lE:u.isSpecial()&&r&&r.scheme==u.scheme?c=tE:u.isSpecial()?c=oE:"/"==n[f+1]?(c=rE,f++):(u.cannotBeABaseURL=!0,wx(u.path,""),c=yE)}break;case eE:if(!r||r.cannotBeABaseURL&&"#"!=i)return Ox;if(r.cannotBeABaseURL&&"#"==i){u.scheme=r.scheme,u.path=QS(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,c=mE;break}c="file"==r.scheme?lE:nE;continue;case tE:if("/"!=i||"/"!=n[f+1]){c=nE;continue}c=aE,f++;break;case rE:if("/"==i){c=sE;break}c=vE;continue;case nE:if(u.scheme=r.scheme,i==FS)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=QS(r.path),u.query=r.query;else if("/"==i||"\\"==i&&u.isSpecial())c=iE;else if("?"==i)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=QS(r.path),u.query="",c=gE;else{if("#"!=i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=QS(r.path),u.path.length--,c=vE;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=QS(r.path),u.query=r.query,u.fragment="",c=mE}break;case iE:if(!u.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,c=vE;continue}c=sE}else c=aE;break;case oE:if(c=aE,"/"!=i||"/"!=vx(l,f+1))continue;f++;break;case aE:if("/"!=i&&"\\"!=i){c=sE;continue}break;case sE:if("@"==i){h&&(l="%40"+l),h=!0,o=XS(l);for(var v=0;v<o.length;v++){var y=o[v];if(":"!=y||p){var g=Kx(y,Gx);p?u.password+=g:u.username+=g}else p=!0}l=""}else if(i==FS||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(h&&""==l)return"Invalid authority";f-=XS(l).length+1,l="",c=uE}else l+=i;break;case uE:case cE:if(t&&"file"==u.scheme){c=dE;continue}if(":"!=i||d){if(i==FS||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(u.isSpecial()&&""==l)return Rx;if(t&&""==l&&(u.includesCredentials()||null!==u.port))return;if(a=u.parseHost(l))return a;if(l="",c=pE,t)return;continue}"["==i?d=!0:"]"==i&&(d=!1),l+=i}else{if(""==l)return Rx;if(a=u.parseHost(l))return a;if(l="",c=fE,t==cE)return}break;case fE:if(!yx(Cx,i)){if(i==FS||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()||t){if(""!=l){var m=hx(l,10);if(m>65535)return Ax;u.port=u.isSpecial()&&m===Jx[u.scheme]?null:m,l=""}if(t)return;c=pE;continue}return Ax}l+=i;break;case lE:if(u.scheme="file","/"==i||"\\"==i)c=hE;else{if(!r||"file"!=r.scheme){c=vE;continue}if(i==FS)u.host=r.host,u.path=QS(r.path),u.query=r.query;else if("?"==i)u.host=r.host,u.path=QS(r.path),u.query="",c=gE;else{if("#"!=i){Yx(gx(QS(n,f),""))||(u.host=r.host,u.path=QS(r.path),u.shortenPath()),c=vE;continue}u.host=r.host,u.path=QS(r.path),u.query=r.query,u.fragment="",c=mE}}break;case hE:if("/"==i||"\\"==i){c=dE;break}r&&"file"==r.scheme&&!Yx(gx(QS(n,f),""))&&($x(r.path[0],!0)?wx(u.path,r.path[0]):u.host=r.host),c=vE;continue;case dE:if(i==FS||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&$x(l))c=vE;else if(""==l){if(u.host="",t)return;c=pE}else{if(a=u.parseHost(l))return a;if("localhost"==u.host&&(u.host=""),t)return;l="",c=pE}continue}l+=i;break;case pE:if(u.isSpecial()){if(c=vE,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=FS&&(c=vE,"/"!=i))continue}else u.fragment="",c=mE;else u.query="",c=gE;break;case vE:if(i==FS||"/"==i||"\\"==i&&u.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=Ex(s=l))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(u.shortenPath(),"/"==i||"\\"==i&&u.isSpecial()||wx(u.path,"")):Xx(l)?"/"==i||"\\"==i&&u.isSpecial()||wx(u.path,""):("file"==u.scheme&&!u.path.length&&$x(l)&&(u.host&&(u.host=""),l=vx(l,0)+":"),wx(u.path,l)),l="","file"==u.scheme&&(i==FS||"?"==i||"#"==i))for(;u.path.length>1&&""===u.path[0];)_x(u.path);"?"==i?(u.query="",c=gE):"#"==i&&(u.fragment="",c=mE)}else l+=Kx(i,Wx);break;case yE:"?"==i?(u.query="",c=gE):"#"==i?(u.fragment="",c=mE):i!=FS&&(u.path[0]+=Kx(i,Vx));break;case gE:t||"#"!=i?i!=FS&&("'"==i&&u.isSpecial()?u.query+="%27":u.query+="#"==i?"%23":Kx(i,Vx)):(u.fragment="",c=mE);break;case mE:i!=FS&&(u.fragment+=Kx(i,zx))}f++}},parseHost:function(e){var t,r,n;if("["==vx(e,0)){if("]"!=vx(e,e.length-1))return Rx;if(t=function(e){var t,r,n,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,f=null,l=0,h=function(){return vx(e,l)};if(":"==h()){if(":"!=vx(e,1))return;l+=2,f=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=r=0;r<4&&yx(Nx,h());)t=16*t+hx(h(),16),l++,r++;if("."==h()){if(0==r)return;if(l-=r,c>6)return;for(n=0;h();){if(i=null,n>0){if(!("."==h()&&n<4))return;l++}if(!yx(Cx,h()))return;for(;yx(Cx,h());){if(o=hx(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;l++}u[c]=256*u[c]+i,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==h()){if(l++,!h())return}else if(h())return;u[c++]=t}else{if(null!==f)return;l++,f=++c}}if(null!==f)for(a=c-f,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[f+a-1],u[f+--a]=s;else if(8!=c)return;return u}(xx(e,1,-1)),!t)return Rx;this.host=t}else if(this.isSpecial()){if(e=ex(e),yx(Bx,e))return Rx;if(t=function(e){var t,r,n,i,o,a,s,u=Sx(e,".");if(u.length&&""==u[u.length-1]&&u.length--,(t=u.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(i=u[n]))return e;if(o=10,i.length>1&&"0"==vx(i,0)&&(o=yx(Ix,i)?16:8,i=xx(i,8==o?1:2)),""===i)a=0;else{if(!yx(10==o?Mx:8==o?Lx:Nx,i))return e;a=hx(i,o)}wx(r,a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=px(256,5-t))return null}else if(a>255)return null;for(s=bx(r),n=0;n<r.length;n++)s+=r[n]*px(256,3-n);return s}(e),null===t)return Rx;this.host=t}else{if(yx(Ux,e))return Rx;for(t="",r=XS(e),n=0;n<r.length;n++)t+=Kx(r[n],Vx);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return $S(Jx,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&$x(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",e.includesCredentials()&&(c+=r+(n?":"+n:"")+"@"),c+=Hx(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+gx(a,"/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},setHref:function(e){var t=this.parse(e);if(t)throw lx(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new wE(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+Hx(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(tx(e)+":",Qx)},getUsername:function(){return this.username},setUsername:function(e){var t=XS(tx(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Kx(t[r],Gx)}},getPassword:function(){return this.password},setPassword:function(e){var t=XS(tx(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Kx(t[r],Gx)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?Hx(e):Hx(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,uE)},getHostname:function(){var e=this.host;return null===e?"":Hx(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,cE)},getPort:function(){var e=this.port;return null===e?"":tx(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=tx(e))?this.port=null:this.parse(e,fE))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+gx(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,pE))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=tx(e))?this.query=null:("?"==vx(e,0)&&(e=xx(e,1)),this.query="",this.parse(e,gE)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=tx(e))?("#"==vx(e,0)&&(e=xx(e,1)),this.fragment="",this.parse(e,mE)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var wE=function(e){var t=JS(this,kE),r=nx(arguments.length,1)>1?arguments[1]:void 0,n=ax(t,new bE(e,!1,r));qS||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},kE=wE.prototype,_E=function(e,t){return{get:function(){return sx(this)[e]()},set:t&&function(e){return sx(this)[t](e)},configurable:!0,enumerable:!0}};if(qS&&(KS(kE,"href",_E("serialize","setHref")),KS(kE,"origin",_E("getOrigin")),KS(kE,"protocol",_E("getProtocol","setProtocol")),KS(kE,"username",_E("getUsername","setUsername")),KS(kE,"password",_E("getPassword","setPassword")),KS(kE,"host",_E("getHost","setHost")),KS(kE,"hostname",_E("getHostname","setHostname")),KS(kE,"port",_E("getPort","setPort")),KS(kE,"pathname",_E("getPathname","setPathname")),KS(kE,"search",_E("getSearch","setSearch")),KS(kE,"searchParams",_E("getSearchParams")),KS(kE,"hash",_E("getHash","setHash"))),GS(kE,"toJSON",(function(){return sx(this).serialize()}),{enumerable:!0}),GS(kE,"toString",(function(){return sx(this).serialize()}),{enumerable:!0}),fx){var SE=fx.createObjectURL,xE=fx.revokeObjectURL;SE&&GS(wE,"createObjectURL",zS(SE,fx)),xE&&GS(wE,"revokeObjectURL",zS(xE,fx))}rx(wE,"URL"),DS({global:!0,constructor:!0,forced:!HS,sham:!qS},{URL:wE});var EE=Tr,TE=r,OE=Uh,RE=ei,AE=qk,PE=ae("URL");EE({target:"URL",stat:!0,forced:!(AE&&TE((function(){PE.canParse()})))},{canParse:function(e){var t=OE(arguments.length,1),r=RE(e),n=t<2||void 0===arguments[1]?void 0:RE(arguments[1]);try{return!!new PE(r,n)}catch(e){return!1}}});var jE=t(te.URL),CE=Tr,IE=Date,LE=u(IE.prototype.getTime);CE({target:"Date",stat:!0},{now:function(){return LE(new IE)}});var ME=t(te.Date.now),NE="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,BE=l,UE=y,FE=O,DE=NE,qE=se,HE=En,VE=Uh,zE=BE.Function,WE=/MSIE .\./.test(qE)||DE&&function(){var e=BE.Bun.version.split(".");return e.length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2])}(),GE=function(e,t){var r=t?2:1;return WE?function(n,i){var o=VE(arguments.length,1)>r,a=FE(n)?n:zE(n),s=o?HE(arguments,r):[],u=o?function(){UE(a,this,s)}:a;return t?e(u,i):e(u)}:e},KE=Tr,JE=l,$E=GE(JE.setInterval,!0);KE({global:!0,bind:!0,forced:JE.setInterval!==$E},{setInterval:$E});var YE=Tr,XE=l,QE=GE(XE.setTimeout,!0);YE({global:!0,bind:!0,forced:XE.setTimeout!==QE},{setTimeout:QE});var ZE,eT,tT,rT,nT=t(te.setTimeout),iT=(ZE=function(){},eT={DEBUG:0,TRACE:1,INFO:2,WARNING:3,ERROR:4,NONE:5,log:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(e=window.console).log.apply(e,Km(t=[(new Date).toISOString()]).call(t,n))}},tT=function(e){return"function"==typeof window.console[e]?function(){for(var t,r,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];(t=window.console)[e].apply(t,Km(r=[(new Date).toISOString()]).call(r,i))}:eT.log},(rT=function(e){eT.debug=e<=0?tT("debug"):ZE,eT.trace=e<=1?tT("trace"):ZE,eT.info=e<=2?tT("info"):ZE,eT.warning=e<=3?tT("warn"):ZE,eT.error=e<=4?tT("error"):ZE})(4),eT.setLogLevel=rT,eT),oT=mk,aT=Jt,sT=C,uT=Ae,cT=jh,fT=W,lT=Yl,hT=[].push,dT=function(e){var t,r,n,i,o=arguments.length,a=o>1?arguments[1]:void 0;return cT(this),(t=void 0!==a)&&uT(a),fT(e)?new this:(r=[],t?(n=0,i=aT(a,o>2?arguments[2]:void 0),lT(e,(function(e){sT(hT,r,i(e,n++))}))):lT(e,hT,{that:r}),new this(r))};Tr({target:"Map",stat:!0,forced:!0},{from:dT});var pT=En;Tr({target:"Map",stat:!0,forced:!0},{of:function(){return new this(pT(arguments))}});var vT=Ee,yT=function(e){if("object"==typeof e&&"size"in e&&"has"in e&&"get"in e&&"set"in e&&"delete"in e&&"entries"in e)return e;throw TypeError(vT(e)+" is not a map")},gT=function(e,t){return 1==t?function(t,r){return t[e](r)}:function(t,r,n){return t[e](r,n)}},mT=ae("Map"),bT={Map:mT,set:gT("set",2),get:gT("get",1),has:gT("has",1),remove:gT("delete",1),proto:mT.prototype},wT=yT,kT=bT.remove;Tr({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=wT(this),r=!0,n=0,i=arguments.length;n<i;n++)e=kT(t,arguments[n]),r=r&&e;return!!r}});var _T=yT,ST=bT.get,xT=bT.has,ET=bT.set;Tr({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(e,t){var r,n,i=_T(this);return xT(i,e)?(r=ST(i,e),"update"in t&&(r=t.update(r,e,i),ET(i,e,r)),r):(n=t.insert(e,i),ET(i,e,n),n)}});var TT=C,OT=function(e,t,r){for(var n,i,o=r||e.next;!(n=TT(o,e)).done;)if(void 0!==(i=t(n.value)))return i},RT=function(e,t,r){return r?OT(e.entries(),(function(e){return t(e[1],e[0])})):e.forEach(t)},AT=Jt,PT=yT,jT=RT;Tr({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var t=PT(this),r=AT(e,arguments.length>1?arguments[1]:void 0);return!1!==jT(t,(function(e,n){if(!r(e,n,t))return!1}),!0)}});var CT=Jt,IT=yT,LT=RT,MT=bT.Map,NT=bT.set;Tr({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var t=IT(this),r=CT(e,arguments.length>1?arguments[1]:void 0),n=new MT;return LT(t,(function(e,i){r(e,i,t)&&NT(n,i,e)})),n}});var BT=Jt,UT=yT,FT=RT;Tr({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var t=UT(this),r=BT(e,arguments.length>1?arguments[1]:void 0),n=FT(t,(function(e,n){if(r(e,n,t))return{value:e}}),!0);return n&&n.value}});var DT=Jt,qT=yT,HT=RT;Tr({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var t=qT(this),r=DT(e,arguments.length>1?arguments[1]:void 0),n=HT(t,(function(e,n){if(r(e,n,t))return{key:n}}),!0);return n&&n.key}});var VT=Tr,zT=C,WT=O,GT=Ae,KT=Yl,JT=bT.Map,$T=u([].push);VT({target:"Map",stat:!0,forced:!0},{groupBy:function(e,t){var r=new(WT(this)?this:JT);GT(t);var n=GT(r.has),i=GT(r.get),o=GT(r.set);return KT(e,(function(e){var a=t(e);zT(n,r,a)?$T(zT(i,r,a),e):zT(o,r,a,[e])})),r}});var YT=function(e,t){return e===t||e!=e&&t!=t},XT=yT,QT=RT;Tr({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return!0===QT(XT(this),(function(t){if(YT(t,e))return!0}),!0)}});var ZT=C,eO=Yl,tO=O,rO=Ae,nO=bT.Map;Tr({target:"Map",stat:!0,forced:!0},{keyBy:function(e,t){var r=new(tO(this)?this:nO);rO(t);var n=rO(r.set);return eO(e,(function(e){ZT(n,r,t(e),e)})),r}});var iO=yT,oO=RT;Tr({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){var t=oO(iO(this),(function(t,r){if(t===e)return{key:r}}),!0);return t&&t.key}});var aO=Jt,sO=yT,uO=RT,cO=bT.Map,fO=bT.set;Tr({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var t=sO(this),r=aO(e,arguments.length>1?arguments[1]:void 0),n=new cO;return uO(t,(function(e,i){fO(n,r(e,i,t),e)})),n}});var lO=Jt,hO=yT,dO=RT,pO=bT.Map,vO=bT.set;Tr({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var t=hO(this),r=lO(e,arguments.length>1?arguments[1]:void 0),n=new pO;return dO(t,(function(e,i){vO(n,i,r(e,i,t))})),n}});var yO=yT,gO=Yl,mO=bT.set;Tr({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var t=yO(this),r=arguments.length,n=0;n<r;)gO(arguments[n++],(function(e,r){mO(t,e,r)}),{AS_ENTRIES:!0});return t}});var bO=Ae,wO=yT,kO=RT,_O=TypeError;Tr({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=wO(this),r=arguments.length<2,n=r?void 0:arguments[1];if(bO(e),kO(t,(function(i,o){r?(r=!1,n=i):n=e(n,i,o,t)})),r)throw _O("Reduce of empty map with no initial value");return n}});var SO=Jt,xO=yT,EO=RT;Tr({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var t=xO(this),r=SO(e,arguments.length>1?arguments[1]:void 0);return!0===EO(t,(function(e,n){if(r(e,n,t))return!0}),!0)}});var TO=Ae,OO=yT,RO=TypeError,AO=bT.get,PO=bT.has,jO=bT.set;Tr({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,t){var r=OO(this),n=arguments.length;TO(t);var i=PO(r,e);if(!i&&n<3)throw RO("Updating absent value");var o=i?AO(r,e):TO(n>2?arguments[2]:void 0)(e,r);return jO(r,e,t(o,e,r)),r}});var CO=C,IO=Ae,LO=O,MO=er,NO=TypeError,BO=function(e,t){var r,n=MO(this),i=IO(n.get),o=IO(n.has),a=IO(n.set),s=arguments.length>2?arguments[2]:void 0;if(!LO(t)&&!LO(s))throw NO("At least one callback required");return CO(o,n,e)?(r=CO(i,n,e),LO(t)&&(r=t(r),CO(a,n,e,r))):LO(s)&&(r=s(),CO(a,n,e,r)),r};Tr({target:"Map",proto:!0,real:!0,forced:!0},{upsert:BO}),Tr({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:BO});var UO=t(oT),FO=t(_w);var DO=t(Yb);function qO(e,t,r){var n;(function(){if("undefined"==typeof Reflect||!DO)return!1;if(DO.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DO(Boolean,[],(function(){}))),!0}catch(e){return!1}})()?qO=aw(n=DO).call(n):qO=function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(aw(Function).apply(e,n));return r&&sw(i,r.prototype),i};return qO.apply(null,arguments)}function HO(e){var t="function"==typeof UO?new UO:void 0;return HO=function(e){if(null===e||!function(e){var t;return-1!==FO(t=Function.toString.call(e)).call(t,"[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return qO(e,arguments,fw(this).constructor)}return r.prototype=Yy(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),sw(r,e)},HO(e)}function VO(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}var zO=function(e){uw(r,HO(Error));var t=VO(r);function r(e){return ny(this,r),t.call(this,e)}return Hy(r)}(),WO=function(){var e,t,r,n=-1,i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],o=[];for(r=0;r<i.length;r+=1)o[i[r]]=r;var a=function(r){e=r,t=0},s=function(){if(!e)return n;if(t>=e.length)return n;var r=255&e.charCodeAt(t);return t+=1,r},u=function(){if(!e)return n;for(;;){if(t>=e.length)return n;var r=e.charAt(t);if(t+=1,o[r])return o[r];if("A"===r)return 0}},c=function(e){return 1===(e=e.toString(16)).length&&(e="0"+e),e="%"+e,unescape(e)};return{encodeBase64:function(e){var t,r;a(e),t="";var o=new Array(3);for(r=!1;!r&&(o[0]=s())!==n;)o[1]=s(),o[2]=s(),t+=i[o[0]>>2],o[1]!==n?(t+=i[o[0]<<4&48|o[1]>>4],o[2]!==n?(t+=i[o[1]<<2&60|o[2]>>6],t+=i[63&o[2]]):(t+=i[o[1]<<2&60],t+="=",r=!0)):(t+=i[o[0]<<4&48],t+="=",t+="=",r=!0);return t},decodeBase64:function(e){var t,r;a(e),t="";var i=new Array(4);for(r=!1;!r&&(i[0]=u())!==n&&(i[1]=u())!==n;)i[2]=u(),i[3]=u(),t+=c(i[0]<<2&255|i[1]>>4),i[2]!==n?(t+=c(i[1]<<4&255|i[2]>>2),i[3]!==n?t+=c(i[2]<<6&255|i[3]):r=!0):r=!0;return t}}}(),GO=Ye,KO=C,JO=ee,$O=er,YO=function(e){return void 0!==e&&(GO(e,"value")||GO(e,"writable"))},XO=R,QO=Io;Tr({target:"Reflect",stat:!0},{get:function e(t,r){var n,i,o=arguments.length<3?t:arguments[2];return $O(t)===o?t[r]:(n=XO.f(t,r))?YO(n)?n.value:void 0===n.get?void 0:KO(n.get,o):JO(i=QO(t))?e(i,r,o):void 0}});var ZO=t(te.Reflect.get),eR={exports:{}},tR=Tr,rR=r,nR=X,iR=R.f,oR=A;tR({target:"Object",stat:!0,forced:!oR||rR((function(){iR(1)})),sham:!oR},{getOwnPropertyDescriptor:function(e,t){return iR(nR(e),t)}});var aR=te.Object,sR=eR.exports=function(e,t){return aR.getOwnPropertyDescriptor(e,t)};aR.getOwnPropertyDescriptor.sham&&(sR.sham=!0);var uR=t(eR.exports);function cR(){var e;"undefined"!=typeof Reflect&&ZO?cR=aw(e=ZO).call(e):cR=function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fw(e)););return e}(e,t);if(n){var i=uR(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}};return cR.apply(this,arguments)}var fR=Ke,lR=Qi;Tr({target:"Object",stat:!0,forced:r((function(){lR(1)}))},{keys:function(e){return lR(fR(e))}});var hR=t(te.Object.keys),dR=Ae,pR=Ke,vR=z,yR=yn,gR=TypeError,mR=function(e){return function(t,r,n,i){dR(r);var o=pR(t),a=vR(o),s=yR(o),u=e?s-1:0,c=e?-1:1;if(n<2)for(;;){if(u in a){i=a[u],u+=c;break}if(u+=c,e?u<0:s<=u)throw gR("Reduce of empty array with no initial value")}for(;e?u>=0:s>u;u+=c)u in a&&(i=r(i,a[u],u,o));return i}},bR={left:mR(!1),right:mR(!0)}.left;Tr({target:"Array",proto:!0,forced:!bh&&pe>79&&pe<83||!ng("reduce")},{reduce:function(e){var t=arguments.length;return bR(this,e,t,t>1?arguments[1]:void 0)}});var wR=zn("Array").reduce,kR=c,_R=wR,SR=Array.prototype,xR=function(e){var t=e.reduce;return e===SR||kR(SR,e)&&t===SR.reduce?_R:t},ER=t(xR),TR=t(ow),OR=e_;Tr({target:"Object",stat:!0,arity:2,forced:Object.assign!==OR},{assign:OR});var RR=t(te.Object.assign),AR=Tr,PR=qg,jR=r,CR=ee,IR=nm.onFreeze,LR=Object.freeze;AR({target:"Object",stat:!0,forced:jR((function(){LR(1)})),sham:!PR},{freeze:function(e){return LR&&CR(e)?LR(IR(e)):e}});var MR,NR=t(te.Object.freeze),BR=er,UR=C,FR=Ye,DR=c,qR=function(){var e=BR(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},HR=RegExp.prototype,VR=function(e){var t=e.flags;return void 0!==t||"flags"in HR||FR(e,"flags")||!DR(HR,e)?t:UR(qR,e)},zR=c,WR=VR,GR=RegExp.prototype,KR=function(e){return e===GR||zR(GR,e)?WR(e):e.flags},JR=t(KR);function $R(e,t){var r=void 0!==fl&&ll(e)||e["@@iterator"];if(!r){if(dl(e)||(r=function(e,t){var r;if(!e)return;if("string"==typeof e)return YR(e,t);var n=Xn(r=Object.prototype.toString.call(e)).call(r,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Cs(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YR(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function YR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XR(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*!
 * Socket.IO v4.6.1
 * (c) 2014-2023 Guillermo Rauch
 * Released under the MIT License.
 */();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}var QR=lb(null);QR.open="0",QR.close="1",QR.ping="2",QR.pong="3",QR.message="4",QR.upgrade="5",QR.noop="6";var ZR=lb(null);Jm(MR=hR(QR)).call(MR,(function(e){ZR[QR[e]]=e}));for(var eA={type:"error",data:"parser error"},tA="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),rA="function"==typeof ArrayBuffer,nA=function(e,t,r){var n,i=e.type,o=e.data;return tA&&o instanceof Blob?t?r(o):iA(o,r):rA&&(o instanceof ArrayBuffer||(n=o,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer))?t?r(o):iA(new Blob([o]),r):r(QR[i]+(o||""))},iA=function(e,t){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];t("b"+e)},r.readAsDataURL(e)},oA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aA="undefined"==typeof Uint8Array?[]:new Uint8Array(256),sA=0;sA<oA.length;sA++)aA[oA.charCodeAt(sA)]=sA;var uA="function"==typeof ArrayBuffer,cA=function(e,t){if("string"!=typeof e)return{type:"message",data:lA(e,t)};var r=e.charAt(0);return"b"===r?{type:"message",data:fA(e.substring(1),t)}:ZR[r]?e.length>1?{type:ZR[r],data:e.substring(1)}:{type:ZR[r]}:eA},fA=function(e,t){if(uA){var r=function(e){var t,r,n,i,o,a=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),f=new Uint8Array(c);for(t=0;t<s;t+=4)r=aA[e.charCodeAt(t)],n=aA[e.charCodeAt(t+1)],i=aA[e.charCodeAt(t+2)],o=aA[e.charCodeAt(t+3)],f[u++]=r<<2|n>>4,f[u++]=(15&n)<<4|i>>2,f[u++]=(3&i)<<6|63&o;return c}(e);return lA(r,t)}return{base64:!0,data:e}},lA=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},hA=String.fromCharCode(30);function dA(e){if(e)return function(e){for(var t in dA.prototype)e[t]=dA.prototype[t];return e}(e)}dA.prototype.on=dA.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},dA.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},dA.prototype.off=dA.prototype.removeListener=dA.prototype.removeAllListeners=dA.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){Yw(n).call(n,i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},dA.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var i=(r=Xn(r).call(r,0)).length;n<i;++n)r[n].apply(this,t)}return this},dA.prototype.emitReserved=dA.prototype.emit,dA.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},dA.prototype.hasListeners=function(e){return!!this.listeners(e).length};var pA="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function vA(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ER(r).call(r,(function(t,r){return e.hasOwnProperty(r)&&(t[r]=e[r]),t}),{})}var yA=nT,gA=pA.clearTimeout;function mA(e,t){var r,n;t.useNativeTimers?(e.setTimeoutFn=TR(yA).call(yA,pA),e.clearTimeoutFn=TR(gA).call(gA,pA)):(e.setTimeoutFn=TR(r=nT).call(r,pA),e.clearTimeoutFn=TR(n=pA.clearTimeout).call(n,pA))}var bA,wA=function(e){uw(r,HO(Error));var t=XR(r);function r(e,n,i){var o;return ny(this,r),(o=t.call(this,e)).description=n,o.context=i,o.type="TransportError",o}return Hy(r)}(),kA=function(e){uw(r,dA);var t=XR(r);function r(e){var n;return ny(this,r),(n=t.call(this)).writable=!1,mA(Qb(n),e),n.opts=e,n.query=e.query,n.socket=e.socket,n}return Hy(r,[{key:"onError",value:function(e,t,n){return cR(fw(r.prototype),"emitReserved",this).call(this,"error",new wA(e,t,n)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,cR(fw(r.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=cA(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){cR(fw(r.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",cR(fw(r.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}}]),r}(),_A="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),SA={},xA=0,EA=0;function TA(e){var t="";do{t=_A[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function OA(){var e=TA(+new Date);return e!==bA?(xA=0,bA=e):e+"."+TA(xA++)}for(;EA<64;EA++)SA[_A[EA]]=EA;function RA(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}var AA=!1;try{AA="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(QR){}var PA=AA;function jA(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||PA))return new XMLHttpRequest}catch(e){}if(!t)try{var r;return new(pA[Km(r=["Active"]).call(r,"Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function CA(){}var IA=null!=new jA({xdomain:!1}).responseType,LA=function(e){uw(r,dA);var t=XR(r);function r(e,n){var i;return ny(this,r),mA(Qb(i=t.call(this)),n),i.opts=n,i.method=n.method||"GET",i.uri=e,i.async=!1!==n.async,i.data=void 0!==n.data?n.data:null,i.create(),i}return Hy(r,[{key:"create",value:function(){var e=this,t=vA(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var n=this.xhr=new jA(t);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}catch(t){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"==typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(t){return void this.setTimeoutFn((function(){e.onError(t)}),0)}"undefined"!=typeof document&&(this.index=r.requestsCount++,r.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=CA,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete r.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),r}();function MA(){for(var e in LA.requests)LA.requests.hasOwnProperty(e)&&LA.requests[e].abort()}LA.requestsCount=0,LA.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",MA):"function"==typeof addEventListener&&addEventListener("onpagehide"in pA?"pagehide":"unload",MA,!1));var NA="function"==typeof Um&&"function"==typeof Um.resolve?function(e){return Um.resolve().then(e)}:function(e,t){return t(e,0)},BA=pA.WebSocket||pA.MozWebSocket,UA="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),FA={websocket:function(e){uw(r,kA);var t=XR(r);function r(e){var n;return ny(this,r),(n=t.call(this,e)).supportsBinary=!e.forceBase64,n}return Hy(r,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,r=UA?{}:vA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=UA?new BA(e,t,r):t?new BA(e,t):new BA(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var r=function(){var r=e[n],i=n===e.length-1;nA(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(e){}i&&NA((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},n=0;n<e.length;n++)r()}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e,t=this.query||{},r=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===r&&443!==Number(this.opts.port)||"ws"===r&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=OA()),this.supportsBinary||(t.b64=1);var i=RA(t);return r+"://"+(-1!==Sw(e=this.opts.hostname).call(e,":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}},{key:"check",value:function(){return!!BA}}]),r}(),polling:function(e){uw(r,kA);var t=XR(r);function r(e){var n;if(ny(this,r),(n=t.call(this,e)).polling=!1,"undefined"!=typeof location){var i="https:"===location.protocol,o=location.port;o||(o=i?"443":"80"),n.xd="undefined"!=typeof location&&e.hostname!==location.hostname||o!==e.port,n.xs=e.secure!==i}var a=e&&e.forceBase64;return n.supportsBinary=IA&&!a,cw(n)}return Hy(r,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var r=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var n=0;this.polling&&(n++,this.once("pollComplete",(function(){--n||r()}))),this.writable||(n++,this.once("drain",(function(){--n||r()})))}else r()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t,r=this;Jm(t=function(e,t){for(var r=e.split(hA),n=[],i=0;i<r.length;i++){var o=cA(r[i],t);if(n.push(o),"error"===o.type)break}return n}(e,this.socket.binaryType)).call(t,(function(e){if("opening"===r.readyState&&"open"===e.type&&r.onOpen(),"close"===e.type)return r.onClose({description:"transport closed by the server"}),!1;r.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,r){var n=e.length,i=new Array(n),o=0;Jm(e).call(e,(function(e,r){nA(e,!1,(function(e){i[r]=e,++o===n&&function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}(i.join(hA))}))}))}(e)}},{key:"uri",value:function(){var e,t=this.query||{},r=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=OA()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===r&&443!==Number(this.opts.port)||"http"===r&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var i=RA(t);return r+"://"+(-1!==Sw(e=this.opts.hostname).call(e,":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return RR(e,{xd:this.xd,xs:this.xs},this.opts),new LA(this.uri(),e)}},{key:"doWrite",value:function(e,t){var r=this,n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(function(e,t){r.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e,t=this,r=this.request();r.on("data",TR(e=this.onData).call(e,this)),r.on("error",(function(e,r){t.onError("xhr poll error",e,r)})),this.pollXhr=r}}]),r}()},DA=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,qA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function HA(e){var t=e,r=Sw(e).call(e,"["),n=Sw(e).call(e,"]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));for(var i=DA.exec(e||""),o={},a=14;a--;)o[qA[a]]=i[a]||"";return-1!=r&&-1!=n&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){var r=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=Xn(t).call(t,0,1)&&0!==t.length||Yw(r).call(r,0,1),"/"==Xn(t).call(t,-1)&&Yw(r).call(r,r.length-1,1),r}(0,o.path),o.queryKey=function(e,t){var r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r}(0,o.query),o}var VA=function(e){uw(r,dA);var t=XR(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ny(this,r),(n=t.call(this)).writeBuffer=[],e&&"object"==Uy(e)&&(i=e,e=null),e?(e=HA(e),i.hostname=e.host,i.secure="https"===e.protocol||"wss"===e.protocol,i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=HA(i.host).host),mA(Qb(n),i),n.secure=null!=i.secure?i.secure:"undefined"!=typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=n.secure?"443":"80"),n.hostname=i.hostname||("undefined"!=typeof location?location.hostname:"localhost"),n.port=i.port||("undefined"!=typeof location&&location.port?location.port:n.secure?"443":"80"),n.transports=i.transports||["polling","websocket"],n.writeBuffer=[],n.prevBufferLen=0,n.opts=RR({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),n.opts.path=n.opts.path.replace(/\/$/,"")+(n.opts.addTrailingSlash?"/":""),"string"==typeof n.opts.query&&(n.opts.query=function(e){for(var t={},r=e.split("&"),n=0,i=r.length;n<i;n++){var o=r[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}(n.opts.query)),n.id=null,n.upgrades=null,n.pingInterval=null,n.pingTimeout=null,n.pingTimeoutTimer=null,"function"==typeof addEventListener&&(n.opts.closeOnBeforeunload&&(n.beforeunloadEventListener=function(){n.transport&&(n.transport.removeAllListeners(),n.transport.close())},addEventListener("beforeunload",n.beforeunloadEventListener,!1)),"localhost"!==n.hostname&&(n.offlineEventListener=function(){n.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",n.offlineEventListener,!1))),n.open(),n}return Hy(r,[{key:"createTransport",value:function(e){var t=RR({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var r=RR({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new FA[e](r)}},{key:"open",value:function(){var e,t,n=this;if(this.opts.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==Sw(e=this.transports).call(e,"websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){n.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(e){var t,r,n,i=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",TR(t=this.onDrain).call(t,this)).on("packet",TR(r=this.onPacket).call(r,this)).on("error",TR(n=this.onError).call(n,this)).on("close",(function(e){return i.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,n=this.createTransport(e),i=!1;r.priorWebsocketSuccess=!1;var o=function(){i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",n),!n)return;r.priorWebsocketSuccess="websocket"===n.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(l(),t.setTransport(n),n.send([{type:"upgrade"}]),t.emitReserved("upgrade",n),n=null,t.upgrading=!1,t.flush())}))}else{var o=new Error("probe error");o.transport=n.name,t.emitReserved("upgradeError",o)}})))};function a(){i||(i=!0,l(),n.close(),n=null)}var s=function(e){var r=new Error("probe error: "+e);r.transport=n.name,a(),t.emitReserved("upgradeError",r)};function u(){s("transport closed")}function c(){s("socket closed")}function f(e){n&&e.name!==n.name&&a()}var l=function(){n.removeListener("open",o),n.removeListener("error",s),n.removeListener("close",u),t.off("close",c),t.off("upgrading",f)};n.once("open",o),n.once("error",s),n.once("close",u),this.once("close",c),this.once("upgrading",f),n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){var e;Yw(e=this.writeBuffer).call(e,0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,r=0;r<this.writeBuffer.length;r++){var n,i=this.writeBuffer[r].data;if(i&&(t+="string"==typeof(e=i)?function(e){for(var t=0,r=0,n=0,i=e.length;n<i;n++)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))),r>0&&t>this.maxPayload)return Xn(n=this.writeBuffer).call(n,0,r);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"send",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"sendPacket",value:function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},r=function r(){e.off("upgrade",r),e.off("upgradeError",r),t()},n=function(){e.once("upgrade",r),e.once("upgradeError",r)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?n():t()})):this.upgrading?n():t()),this}},{key:"onError",value:function(e){r.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i;~Sw(i=this.transports).call(i,e[r])&&t.push(e[r])}return t}}]),r}();VA.protocol=4;var zA,WA="function"==typeof ArrayBuffer,GA=Object.prototype.toString,KA="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===GA.call(Blob),JA="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===GA.call(File);function $A(e){return WA&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||KA&&e instanceof Blob||JA&&e instanceof File}function YA(e,t){if(!e||"object"!=Uy(e))return!1;if(dl(e)){for(var r=0,n=e.length;r<n;r++)if(YA(e[r]))return!0;return!1}if($A(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return YA(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&YA(e[i]))return!0;return!1}function XA(e){var t=[],r=e.data,n=e;return n.data=QA(r,t),n.attachments=t.length,{packet:n,buffers:t}}function QA(e,t){if(!e)return e;if($A(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}if(dl(e)){for(var n=new Array(e.length),i=0;i<e.length;i++)n[i]=QA(e[i],t);return n}if("object"==Uy(e)&&!(e instanceof Date)){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=QA(e[a],t));return o}return e}function ZA(e,t){return e.data=eP(e.data,t),delete e.attachments,e}function eP(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(dl(e))for(var r=0;r<e.length;r++)e[r]=eP(e[r],t);else if("object"==Uy(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=eP(e[n],t));return e}!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(zA||(zA={}));var tP=function(e){uw(r,dA);var t=XR(r);function r(e){var n;return ny(this,r),(n=t.call(this)).reviver=e,n}return Hy(r,[{key:"add",value:function(e){var t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var n=(t=this.decodeString(e)).type===zA.BINARY_EVENT;n||t.type===zA.BINARY_ACK?(t.type=n?zA.EVENT:zA.ACK,this.reconstructor=new rP(t),0===t.attachments&&cR(fw(r.prototype),"emitReserved",this).call(this,"decoded",t)):cR(fw(r.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!$A(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,cR(fw(r.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,n={type:Number(e.charAt(0))};if(void 0===zA[n.type])throw new Error("unknown packet type "+n.type);if(n.type===zA.BINARY_EVENT||n.type===zA.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(i,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){for(var a=t+1;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(a,t)}else n.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}n.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var f=this.tryParse(e.substr(t));if(!r.isPayloadValid(n.type,f))throw new Error("invalid payload");n.data=f}return n}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case zA.CONNECT:return"object"==Uy(t);case zA.DISCONNECT:return void 0===t;case zA.CONNECT_ERROR:return"string"==typeof t||"object"==Uy(t);case zA.EVENT:case zA.BINARY_EVENT:return dl(t)&&t.length>0;case zA.ACK:case zA.BINARY_ACK:return dl(t)}}}]),r}(),rP=function(){function e(t){ny(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return Hy(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=ZA(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}(),nP=NR({__proto__:null,protocol:5,get PacketType(){return zA},Encoder:function(){function e(t){ny(this,e),this.replacer=t}return Hy(e,[{key:"encode",value:function(e){return e.type!==zA.EVENT&&e.type!==zA.ACK||!YA(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===zA.EVENT?zA.BINARY_EVENT:zA.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==zA.BINARY_EVENT&&e.type!==zA.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=qm(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=XA(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}]),e}(),Decoder:tP});function iP(e,t,r){return e.on(t,r),function(){e.off(t,r)}}var oP=NR({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),aP=function(e){uw(r,dA);var t=XR(r);function r(e,n,i){var o;return ny(this,r),(o=t.call(this)).connected=!1,o.recovered=!1,o.receiveBuffer=[],o.sendBuffer=[],o._queue=[],o._queueSeq=0,o.ids=0,o.acks={},o.flags={},o.io=e,o.nsp=n,i&&i.auth&&(o.auth=i.auth),o._opts=RR({},i),o.io._autoConnect&&o.open(),o}return Hy(r,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){var e,t,r,n;if(!this.subs){var i=this.io;this.subs=[iP(i,"open",TR(e=this.onopen).call(e,this)),iP(i,"packet",TR(t=this.onpacket).call(t,this)),iP(i,"error",TR(r=this.onerror).call(r,this)),iP(i,"close",TR(n=this.onclose).call(n,this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(oP.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.unshift(e),this._opts.retries&&!JR(this).fromQueue&&!JR(this).volatile)return this._addToQueue(r),this;var i={type:zA.EVENT,data:r,options:{}};if(i.options.compress=!1!==JR(this).compress,"function"==typeof r[r.length-1]){var o=this.ids++,a=r.pop();this._registerAckCallback(o,a),i.id=o}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return JR(this).volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var r,n=this,i=null!==(r=JR(this).timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0!==i){var o=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++){var i;n.sendBuffer[r].id===e&&Yw(i=n.sendBuffer).call(i,r,1)}t.call(n,new Error("operation has timed out"))}),i);this.acks[e]=function(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n.io.clearTimeoutFn(o),t.apply(n,Km(e=[null]).call(e,i))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=void 0!==JR(this).timeout||void 0!==this._opts.ackTimeout;return new Um((function(r,i){var a;n.push((function(e,t){return o?e?i(e):r(t):r(e)})),t.emit.apply(t,Km(a=[e]).call(a,n))}))}},{key:"_addToQueue",value:function(e){var t,r=this;"function"==typeof e[e.length-1]&&(t=e.pop());var n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:RR({fromQueue:!0},JR(this))};e.push((function(e){var i;if(n===r._queue[0]){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];return null!==e?n.tryCount>r._opts.retries&&(r._queue.shift(),t&&t(e)):(r._queue.shift(),t&&t.apply(void 0,Km(i=[null]).call(i,a))),n.pending=!1,r._drainQueue()}})),this._queue.push(n),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=JR(t),this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:zA.CONNECT,data:this._pid?RR({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case zA.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case zA.EVENT:case zA.BINARY_EVENT:this.onevent(e);break;case zA.ACK:case zA.BINARY_ACK:this.onack(e);break;case zA.DISCONNECT:this.ondisconnect();break;case zA.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(NR(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,n,i=$R(Xn(t=this._anyListeners).call(t));try{for(i.s();!(n=i.n()).done;){n.value.apply(this,e)}}catch(e){i.e(e)}finally{i.f()}}cR(fw(r.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,r=!1;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];r||(r=!0,t.packet({type:zA.ACK,id:e,data:i}))}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e,t,r=this;Jm(e=this.receiveBuffer).call(e,(function(e){return r.emitEvent(e)})),this.receiveBuffer=[],Jm(t=this.sendBuffer).call(t,(function(e){r.notifyOutgoingListeners(e),r.packet(e)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){var e;this.subs&&(Jm(e=this.subs).call(e,(function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:zA.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return JR(this).compress=e,this}},{key:"volatile",get:function(){return JR(this).volatile=!0,this}},{key:"timeout",value:function(e){return JR(this).timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,r=0;r<t.length;r++)if(e===t[r])return Yw(t).call(t,r,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,r=0;r<t.length;r++)if(e===t[r])return Yw(t).call(t,r,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,r,n=$R(Xn(t=this._anyOutgoingListeners).call(t));try{for(n.s();!(r=n.n()).done;){r.value.apply(this,e.data)}}catch(e){n.e(e)}finally{n.f()}}}}]),r}();function sP(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}sP.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},sP.prototype.reset=function(){this.attempts=0},sP.prototype.setMin=function(e){this.ms=e},sP.prototype.setMax=function(e){this.max=e},sP.prototype.setJitter=function(e){this.jitter=e};var uP=function(e){uw(r,dA);var t=XR(r);function r(e,n){var i,o;ny(this,r),(i=t.call(this)).nsps={},i.subs=[],e&&"object"==Uy(e)&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",i.opts=n,mA(Qb(i),n),i.reconnection(!1!==n.reconnection),i.reconnectionAttempts(n.reconnectionAttempts||1/0),i.reconnectionDelay(n.reconnectionDelay||1e3),i.reconnectionDelayMax(n.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(o=n.randomizationFactor)&&void 0!==o?o:.5),i.backoff=new sP({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==n.timeout?2e4:n.timeout),i._readyState="closed",i.uri=e;var a=n.parser||nP;return i.encoder=new a.Encoder,i.decoder=new a.Decoder,i._autoConnect=!1!==n.autoConnect,i._autoConnect&&i.open(),i}return Hy(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t,r=this;if(~Sw(t=this._readyState).call(t,"open"))return this;this.engine=new VA(this.uri,this.opts);var n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;var o=iP(n,"open",(function(){i.onopen(),e&&e()})),a=iP(n,"error",(function(t){i.cleanup(),i._readyState="closed",r.emitReserved("error",t),e?e(t):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;0===s&&o();var u=this.setTimeoutFn((function(){o(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&u.unref(),this.subs.push((function(){clearTimeout(u)}))}return this.subs.push(o),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){var e,t,r,n,i;this.cleanup(),this._readyState="open",this.emitReserved("open");var o=this.engine;this.subs.push(iP(o,"ping",TR(e=this.onping).call(e,this)),iP(o,"data",TR(t=this.ondata).call(t,this)),iP(o,"error",TR(r=this.onerror).call(r,this)),iP(o,"close",TR(n=this.onclose).call(n,this)),iP(this.decoder,"decoded",TR(i=this.ondecoded).call(i,this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}},{key:"ondecoded",value:function(e){var t=this;NA((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new aP(this,e,t),this.nsps[e]=r),r}},{key:"_destroy",value:function(e){var t,r=$R(hR(this.nsps));try{for(r.s();!(t=r.n()).done;){var n=t.value;if(this.nsps[n].active)return}}catch(e){r.e(e)}finally{r.f()}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),r=0;r<t.length;r++)this.engine.write(t[r],e.options)}},{key:"cleanup",value:function(){var e;Jm(e=this.subs).call(e,(function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var r=this.backoff.duration();this._reconnecting=!0;var n=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(r){r?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",r)):t.onreconnect()})))}),r);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(),cP={};function fP(e,t){"object"==Uy(e)&&(t=e,e=void 0);var r,n=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),i=HA(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var o=-1!==Sw(t=i.host).call(t,":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+r,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=n.source,o=n.id,a=n.path,s=cP[o]&&a in cP[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?r=new uP(i,t):(cP[o]||(cP[o]=new uP(i,t)),r=cP[o]),n.query&&!t.query&&(t.query=n.queryKey),r.socket(n.path,t)}function lP(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}RR(fP,{Manager:uP,Socket:aP,io:fP,connect:fP});function hP(e,t,r,n){"ok"===e||"success"===e?r(t):"error"===e?n(t):iT.error("MCU returns unknown ack.")}var dP=function(e){uw(r,ok);var t=lP(r);function r(){var e;return ny(this,r),(e=t.call(this))._socket=null,e._loggedIn=!1,e._reconnectTimes=0,e._reconnectionTicket=null,e._refreshReconnectionTicket=null,e}return Hy(r,[{key:"connect",value:function(e,t,r){var n=this;return new Um((function(t,i){var o;new jE(e);var a={reconnection:!0,reconnectionAttempts:10,"force new connection":!0};n._socket=fP(e,a),Jm(o=["participant","text","stream","progress"]).call(o,(function(e){n._socket.on(e,(function(t){n.dispatchEvent(new sk("data",{message:{notification:e,data:t}}))}))})),n._socket.on("reconnecting",(function(){n._reconnectTimes++})),n._socket.on("reconnect_failed",(function(){n._reconnectTimes>=10&&n.dispatchEvent(new ak("disconnect"))})),n._socket.on("connect_error",(function(t){i("connect_error:".concat(e))})),n._socket.on("drop",(function(){n._reconnectTimes=10})),n._socket.on("disconnect",(function(){n._clearReconnectionTask(),n._reconnectTimes>=10&&(n._loggedIn=!1,n.dispatchEvent(new ak("disconnect")))})),n._socket.emit("login",r,(function(e,r){"ok"===e&&(n._loggedIn=!0,n._onReconnectionTicket(r.reconnectionTicket),n._socket.on("connect",(function(){n._socket.emit("relogin",n._reconnectionTicket,(function(e,t){"ok"===e?(n._reconnectTimes=0,n._onReconnectionTicket(t)):n.dispatchEvent(new ak("disconnect"))}))}))),hP(e,r,t,i)}))}))}},{key:"disconnect",value:function(){var e=this;return!this._socket||this._socket.disconnected?Um.reject(new zO("Portal is not connected.")):new Um((function(t,r){e._socket.emit("logout",(function(n,i){e._reconnectTimes=10,e._socket.disconnect(),hP(n,i,t,r)}))}))}},{key:"send",value:function(e,t){var r=this;return new Um((function(n,i){r._socket.emit(e,t,(function(e,t){hP(e,t,n,i)}))}))}},{key:"_onReconnectionTicket",value:function(e){var t=this;this._reconnectionTicket=e;var r=JSON.parse(WO.decodeBase64(e)),n=ME();if(r.notAfter<=n-1e4)iT.warning("Reconnection ticket expires too soon.");else{var i=r.notAfter-n-6e4;i<0&&(i=r.notAfter-n-1e4),this._clearReconnectionTask(),this._refreshReconnectionTicket=nT((function(){t._socket.emit("refreshReconnectionTicket",(function(e,r){"ok"===e?t._onReconnectionTicket(r):iT.warning("Failed to refresh reconnection ticket.")}))}),i)}}},{key:"_clearReconnectionTask",value:function(){clearTimeout(this._refreshReconnectionTicket),this._refreshReconnectionTicket=null}}]),r}();function pP(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}var vP=function(e){uw(r,ok);var t=pP(r);function r(e,n,i){var o;return ny(this,r),o=t.call(this),lw(Qb(o),"id",{configurable:!1,writable:!1,value:e}),lw(Qb(o),"role",{configurable:!1,writable:!1,value:n}),lw(Qb(o),"userId",{configurable:!1,writable:!1,value:i}),o}return Hy(r)}(),yP=Hy((function e(t,r,n,i){ny(this,e),this.id=t,this.participants=r,this.remoteStreams=n,this.self=i})),gP=t(hl);var mP=t(js);function bP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wP(e,t){return function(e){if(gP(e))return e}(e)||function(e,t){var r=null==e?null:void 0!==My&&ll(e)||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){var r;if(e){if("string"==typeof e)return bP(e,t);var n=Ag(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?mP(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bP(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var kP=Hi.includes;Tr({target:"Array",proto:!0,forced:r((function(){return!Array(1).includes()}))},{includes:function(e){return kP(this,e,arguments.length>1?arguments[1]:void 0)}});var _P=zn("Array").includes,SP=ee,xP=w,EP=ft("match"),TP=function(e){var t;return SP(e)&&(void 0!==(t=e[EP])?!!t:"RegExp"==xP(e))},OP=TypeError,RP=function(e){if(TP(e))throw OP("The method doesn't accept regular expressions");return e},AP=ft("match"),PP=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[AP]=!1,"/./"[e](t)}catch(e){}}return!1},jP=Tr,CP=RP,IP=J,LP=ei,MP=PP,NP=u("".indexOf);jP({target:"String",proto:!0,forced:!MP("includes")},{includes:function(e){return!!~NP(LP(IP(this)),LP(CP(e)),arguments.length>1?arguments[1]:void 0)}});var BP=zn("String").includes,UP=c,FP=_P,DP=BP,qP=Array.prototype,HP=String.prototype,VP=function(e){var t=e.includes;return e===qP||UP(qP,e)&&t===qP.includes?FP:"string"==typeof e||e===HP||UP(HP,e)&&t===HP.includes?DP:t},zP=t(VP);function WP(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}var GP=Hy((function e(t){ny(this,e),this.codec=t})),KP=Hy((function e(t,r,n,i,o,a){ny(this,e),this.codec=t,this.resolution=r,this.frameRate=n,this.bitrate=i,this.keyFrameInterval=o,this.rid=a})),JP=Hy((function e(t,r){ny(this,e),this.audio=t,this.video=r})),$P=function(e){uw(r,ok);var t=WP(r);function r(e,n,i,o,a,s){var u;return ny(this,r),u=t.call(this),lw(Qb(u),"id",{configurable:!1,writable:!1,value:e||pb()}),lw(Qb(u),"transport",{configurable:!1,writable:!1,value:n}),u.stop=i,u.getStats=o,u.mute=a,u.unmute=s,u}return Hy(r)}();function YP(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}var XP=Hy((function e(t){ny(this,e),this.codecs=t})),QP=Hy((function e(t,r,n,i,o){ny(this,e),this.codecs=t,this.resolutions=r,this.frameRates=n,this.bitrateMultipliers=i,this.keyFrameIntervals=o})),ZP=Hy((function e(t,r){ny(this,e),this.audio=t,this.video=r})),ej=function(e){uw(r,ok);var t=YP(r);function r(e,n,i,o,a,s,u,c){var f;if(ny(this,r),f=t.call(this),!e)throw new TypeError("ID cannot be null or undefined.");return lw(Qb(f),"id",{configurable:!1,writable:!1,value:e}),lw(Qb(f),"stream",{configurable:!1,writable:!0,value:n}),lw(Qb(f),"transport",{configurable:!1,writable:!1,value:i}),f.stop=o,f.getStats=a,f.mute=s,f.unmute=u,f.applyOptions=c,f._audioTrackId=void 0,f._videoTrackId=void 0,f}return Hy(r)}(),tj="\t\n\v\f\r  áââââââââââââ¯âã\u2028\u2029\ufeff",rj=J,nj=ei,ij=tj,oj=u("".replace),aj=RegExp("^["+ij+"]+"),sj=RegExp("(^|[^"+ij+"])["+ij+"]+$"),uj=function(e){return function(t){var r=nj(rj(t));return 1&e&&(r=oj(r,aj,"")),2&e&&(r=oj(r,sj,"$1")),r}},cj={start:uj(1),end:uj(2),trim:uj(3)},fj=l,lj=r,hj=u,dj=ei,pj=cj.trim,vj=tj,yj=fj.parseInt,gj=fj.Symbol,mj=gj&&gj.iterator,bj=/^[+-]?0x/i,wj=hj(bj.exec),kj=8!==yj(vj+"08")||22!==yj(vj+"0x16")||mj&&!lj((function(){yj(Object(mj))}))?function(e,t){var r=pj(dj(e));return yj(r,t>>>0||(wj(bj,r)?16:10))}:yj;Tr({global:!0,forced:parseInt!=kj},{parseInt:kj});var _j=t(te.parseInt),Sj=se.match(/firefox\/(\d+)/i),xj=!!Sj&&+Sj[1],Ej=/MSIE|Trident/.test(se),Tj=se.match(/AppleWebKit\/(\d+)\./),Oj=!!Tj&&+Tj[1],Rj=Tr,Aj=u,Pj=Ae,jj=Ke,Cj=yn,Ij=jw,Lj=ei,Mj=r,Nj=x_,Bj=ng,Uj=xj,Fj=Ej,Dj=pe,qj=Oj,Hj=[],Vj=Aj(Hj.sort),zj=Aj(Hj.push),Wj=Mj((function(){Hj.sort(void 0)})),Gj=Mj((function(){Hj.sort(null)})),Kj=Bj("sort"),Jj=!Mj((function(){if(Dj)return Dj<70;if(!(Uj&&Uj>3)){if(Fj)return!0;if(qj)return qj<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)Hj.push({k:t+n,v:r})}for(Hj.sort((function(e,t){return t.v-e.v})),n=0;n<Hj.length;n++)t=Hj[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));Rj({target:"Array",proto:!0,forced:Wj||!Gj||!Kj||!Jj},{sort:function(e){void 0!==e&&Pj(e);var t=jj(this);if(Jj)return void 0===e?Vj(t):Vj(t,e);var r,n,i=[],o=Cj(t);for(n=0;n<o;n++)n in t&&zj(i,t[n]);for(Nj(i,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:Lj(t)>Lj(r)?1:-1}}(e)),r=Cj(i),n=0;n<r;)t[n]=i[n++];for(;n<o;)Ij(t,n++);return t}});var $j=zn("Array").sort,Yj=c,Xj=$j,Qj=Array.prototype,Zj=function(e){var t=e.sort;return e===Qj||Yj(Qj,e)&&t===Qj.sort?Xj:t},eC=t(Zj),tC=Fu.filter;Tr({target:"Array",proto:!0,forced:!xn("filter")},{filter:function(e){return tC(this,e,arguments.length>1?arguments[1]:void 0)}});var rC=zn("Array").filter,nC=c,iC=rC,oC=Array.prototype,aC=function(e){var t=e.filter;return e===oC||nC(oC,e)&&t===oC.filter?iC:t},sC=t(aC);function uC(e,t){var r=void 0!==fl&&ll(e)||e["@@iterator"];if(!r){if(dl(e)||(r=function(e,t){var r;if(!e)return;if("string"==typeof e)return cC(e,t);var n=Xn(r=Object.prototype.toString.call(e)).call(r,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Cs(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cC(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function cC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fC(e,t,r,n,i){var o=e.split("\r\n"),a=null,s=null;if("string"==typeof i){var u=bC(o,i);if(u){var c=u.start,f=u.end;a=Xn(o).call(o,0,c),s=Xn(o).call(o,f),o=Xn(o).call(o,c,f)}}o.length<=1&&(o=e.split("\n"));var l,h=function(e,t){var r=function(e,t){var r=dC(e,"a=rtpmap",t);return r?vC(e[r]):null}(e,t);return r?dC(e,"a=fmtp:"+r.toString()):null}(o,t),d={};if(null===h){var p=dC(o,"a=rtpmap",t);if(null===p)return e;var v=vC(o[p]);d.pt=v.toString(),d.params={},d.params[r]=n,Yw(o).call(o,p+1,0,hC(d))}else(d=lC(o[h])).params[r]=n,o[h]=hC(d);a&&(o=Km(l=Km(a).call(a,o)).call(l,s));return e=o.join("\r\n")}function lC(e){var t={},r=Sw(e).call(e," "),n=e.substring(r+1).split(";"),i=new RegExp("a=fmtp:(\\d+)"),o=e.match(i);if(!o||2!==o.length)return null;t.pt=o[1];for(var a={},s=0;s<n.length;++s){var u=n[s].split("=");2===u.length&&(a[u[0]]=u[1])}return t.params=a,t}function hC(e){if(!e.hasOwnProperty("pt")||!e.hasOwnProperty("params"))return null;var t=e.pt,r=e.params,n=[],i=0;for(var o in r)n[i]=o+"="+r[o],++i;return 0===i?null:"a=fmtp:"+t.toString()+" "+n.join(";")}function dC(e,t,r){return pC(e,0,-1,t,r)}function pC(e,t,r,n,i,o){if(void 0===o&&(o="asc"),"asc"===(o=o||"asc"))for(var a=-1!==r?r:e.length,s=t;s<a;++s){var u,c;if(0===Sw(u=e[s]).call(u,n))if(!i||-1!==Sw(c=e[s].toLowerCase()).call(c,i.toLowerCase()))return s}else for(var f=-1!==t?t:e.length-1;f>=0;--f){var l,h;if(0===Sw(l=e[f]).call(l,n))if(!i||-1!==Sw(h=e[f].toLowerCase()).call(h,i.toLowerCase()))return f}return null}function vC(e){var t=new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+"),r=e.match(t);return r&&2===r.length?r[1]:null}var yC=["CN","telephone-event"],gC=["red","ulpfec","flexfec"];function mC(e,t){for(var r=new RegExp("a=(rtpmap|rtcp-fb|fmtp):"+t+"\\s"),n=e.length-1;n>0;n--)e[n].match(r)&&Yw(e).call(e,n,1);return e}function bC(e,t){for(var r="a=mid:"+t,n=dC(e,r);n>=0&&e[n]!==r;)n=pC(e,n,-1,r);if(n>=0){for(var i=pC(e,n,-1,"m=")||-1,o=-1,a=n;a>=0;a--){var s;if(Sw(s=e[a]).call(s,"m=")>=0){o=a;break}}if(o>=0)return{start:o,end:i}}return null}function wC(e,t,r,n){if(!r||0===r.length)return e;r="audio"===t?Km(r).call(r,yC):Km(r).call(r,gC);var i=e.split("\r\n"),o=null,a=null;if("string"==typeof n){var s=bC(i,n);if(s){var u=s.start,c=s.end;o=Xn(i).call(i,0,u),a=Xn(i).call(i,c),i=Xn(i).call(i,u,c)}}var f=dC(i,"m=",t);if(null===f)return e;var l=i[f].split(" ");Yw(l).call(l,0,3);var h,d=[],p=uC(r);try{for(p.s();!(h=p.n()).done;)for(var v=h.value,y=0;y<i.length;y++){var g=pC(i,y,-1,"a=rtpmap",v);if(null!==g){var m=vC(i[g]);m&&(d.push(m),y=g)}}}catch(e){p.e(e)}finally{p.f()}d=function(e,t){var r,n=uC(t);try{for(n.s();!(r=n.n()).done;){var i=dC(e,"a=fmtp","apt="+r.value);if(null!==i){var o=lC(e[i]);t.push(o.pt)}}}catch(e){n.e(e)}finally{n.f()}return t}(i,d),i[f]=function(e,t){var r=e.split(" "),n=Xn(r).call(r,0,3);return(n=Km(n).call(n,t)).join(" ")}(i[f],d);var b,w,k=uC(l);try{for(k.s();!(b=k.n()).done;){var _=b.value;-1===Sw(d).call(d,_)&&(i=mC(i,_))}}catch(e){k.e(e)}finally{k.f()}o&&(i=Km(w=Km(o).call(o,i)).call(w,a));return e=i.join("\r\n")}function kC(e,t,r){var n,i=uC(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.maxBitrate&&(e=fC(e,o.codec.name,"x-google-max-bitrate",o.maxBitrate.toString(),r))}}catch(e){i.e(e)}finally{i.f()}return e}var _C="webrtc",SC=Hy((function e(t,r){ny(this,e),this.type=t,this.id=r,this.rtpTransceivers=void 0}));function xC(e,t){var r=void 0!==fl&&ll(e)||e["@@iterator"];if(!r){if(dl(e)||(r=function(e,t){var r;if(!e)return;if("string"==typeof e)return EC(e,t);var n=Xn(r=Object.prototype.toString.call(e)).call(r,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Cs(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EC(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function EC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TC(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}var OC=function(e){uw(o,ok);var t,r,n,i=TC(o);function o(e,t){var r;return ny(this,o),(r=i.call(this)).pc=null,r._config=e,r._videoCodecs=void 0,r._options=null,r._videoCodecs=void 0,r._signaling=t,r._internalId=null,r._pendingCandidates=[],r._subscribePromises=new bk,r._publishPromises=new bk,r._publications=new bk,r._subscriptions=new bk,r._publishTransceivers=new bk,r._subscribeTransceivers=new bk,r._reverseIdMap=new bk,r._disconnectTimer=null,r._ended=!1,r._id=void 0,r._internalCount=0,r._sdpPromise=Um.resolve(),r._sdpResolverMap=new bk,r._sdpResolvers=[],r._sdpResolveNum=0,r._remoteMediaStreams=new bk,r.sdpTime=null,r._createPeerConnection(),r}return Hy(o,[{key:"onMessage",value:function(e,t){switch(e){case"progress":"soac"===t.status?this._sdpHandler(t.data):"ready"===t.status?this._readyHandler(t.sessionId):"error"===t.status&&this._errorHandler(t.sessionId,t.data);break;case"stream":this._onStreamEvent(t);break;default:iT.warning("Unknown notification from MCU.")}}},{key:"publishWithTransceivers",value:(n=ry(Cg.mark((function e(t,r){var n,i,o,a,s=this;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=xC(r),e.prev=1,o=Cg.mark((function e(){var n,o,a,u,c,f,l,h,d;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sendonly"===(o=i.value).direction){e.next=3;break}return e.abrupt("return",{v:Um.reject("RTCRtpTransceiver's direction must be sendonly.")});case 3:if(zP(n=t.stream.getTracks()).call(n,o.sender.track)){e.next=5;break}return e.abrupt("return",{v:Um.reject("The track associated with RTCRtpSender is not included in stream.")});case 5:if(!(r.length>2)){e.next=7;break}return e.abrupt("return",{v:Um.reject("At most one transceiver for audio and one transceiver for video are accepted.")});case 7:return a=nk(r).call(r,(function(e){var r=e.sender.track.kind;return{type:r,transceiver:e,source:t.source[r],option:{}}})),u=s._createInternalId(),e.next=11,s._chainSdpPromise(u);case 11:return s._publishTransceivers.set(u,a),e.next=14,s.pc.createOffer();case 14:return c=e.sent,e.next=17,s.pc.setLocalDescription(c);case 17:return f=nk(r).call(r,(function(e){var r=e.sender.track.kind;return{type:r,source:t.source[r],mid:e.mid}})),e.next=20,s._signaling.sendSignalingMessage("publish",{media:{tracks:f},attributes:t.attributes,transport:{id:s._id,type:"webrtc"}});case 20:if(l=e.sent,h=l.id,s._publishTransceivers.get(u).id=h,s._reverseIdMap.set(h,u),!s._id||s._id===l.transportId){e.next=27;break}return iT.warning("Server returns conflict ID: "+l.transportId),e.abrupt("return",{v:void 0});case 27:return s._id=l.transportId,d=new sk("id",{message:h,origin:s._remoteId}),s.dispatchEvent(d),e.next=32,s._signaling.sendSignalingMessage("soac",{id:s._id,signaling:c});case 32:return e.abrupt("return",{v:new Um((function(e,t){s._publishPromises.set(u,{resolve:e,reject:t})}))});case 33:case"end":return e.stop()}}),e)})),n.s();case 4:if((i=n.n()).done){e.next=11;break}return e.delegateYield(o(),"t0",6);case 6:if("object"!==Uy(a=e.t0)){e.next=9;break}return e.abrupt("return",a.v);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])}))),function(e,t){return n.apply(this,arguments)})},{key:"publish",value:(r=ry(Cg.mark((function e(t,r,n){var i,o,a,s,u,c,f,l,h,d,p,v,y,g,m,b,w,k,_,S,x,E,T,O,R=this;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ended){e.next=2;break}return e.abrupt("return",Um.reject("Connection closed"));case 2:if(!dl(r)){e.next=4;break}return e.abrupt("return",this.publishWithTransceivers(t,r));case 4:if(void 0===r&&(r={audio:!!t.mediaStream.getAudioTracks().length,video:!!t.mediaStream.getVideoTracks().length}),"object"===Uy(r)){e.next=7;break}return e.abrupt("return",Um.reject(new TypeError("Options should be an object.")));case 7:if(!(this._isRtpEncodingParameters(r.audio)&&this._isOwtEncodingParameters(r.video)||this._isOwtEncodingParameters(r.audio)&&this._isRtpEncodingParameters(r.video))){e.next=9;break}return e.abrupt("return",Um.reject(new zO("Mixing RTCRtpEncodingParameters and AudioEncodingParameters/VideoEncodingParameters is not allowed.")));case 9:if(void 0===r.audio&&(r.audio=!!t.mediaStream.getAudioTracks().length),void 0===r.video&&(r.video=!!t.mediaStream.getVideoTracks().length),!(r.audio&&!t.mediaStream.getAudioTracks().length||r.video&&!t.mediaStream.getVideoTracks().length)){e.next=13;break}return e.abrupt("return",Um.reject(new zO("options.audio/video is inconsistent with tracks presented in the MediaStream.")));case 13:if(!1!==r.audio&&null!==r.audio||!1!==r.video&&null!==r.video){e.next=15;break}return e.abrupt("return",Um.reject(new zO("Cannot publish a stream without audio and video.")));case 15:if("object"!==Uy(r.audio)){e.next=35;break}if(dl(r.audio)){e.next=18;break}return e.abrupt("return",Um.reject(new TypeError("options.audio should be a boolean or an array.")));case 18:i=xC(r.audio),e.prev=19,i.s();case 21:if((o=i.n()).done){e.next=27;break}if((a=o.value).codec&&"string"==typeof a.codec.name&&(void 0===a.maxBitrate||"number"==typeof a.maxBitrate)){e.next=25;break}return e.abrupt("return",Um.reject(new TypeError("options.audio has incorrect parameters.")));case 25:e.next=21;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(19),i.e(e.t0);case 32:return e.prev=32,i.f(),e.finish(32);case 35:if("object"!==Uy(r.video)||dl(r.video)){e.next=37;break}return e.abrupt("return",Um.reject(new TypeError("options.video should be a boolean or an array.")));case 37:if(!this._isOwtEncodingParameters(r.video)){e.next=55;break}s=xC(r.video),e.prev=39,s.s();case 41:if((u=s.n()).done){e.next=47;break}if(!(!(c=u.value).codec||"string"!=typeof c.codec.name||void 0!==c.maxBitrate&&"number"!=typeof c.maxBitrate||void 0!==c.codec.profile&&"string"!=typeof c.codec.profile)){e.next=45;break}return e.abrupt("return",Um.reject(new TypeError("options.video has incorrect parameters.")));case 45:e.next=41;break;case 47:e.next=52;break;case 49:e.prev=49,e.t1=e.catch(39),s.e(e.t1);case 52:return e.prev=52,s.f(),e.finish(52);case 55:if(f={},!(t.mediaStream.getAudioTracks().length>0&&!1!==r.audio&&null!==r.audio)){e.next=64;break}if(t.mediaStream.getAudioTracks().length>1&&iT.warning("Publishing a stream with multiple audio tracks is not fully supported."),"boolean"==typeof r.audio||"object"===Uy(r.audio)){e.next=60;break}return e.abrupt("return",Um.reject(new zO("Type of audio options should be boolean or an object.")));case 60:f.audio={},f.audio.source=t.source.audio,e.next=65;break;case 64:f.audio=!1;case 65:return t.mediaStream.getVideoTracks().length>0&&!1!==r.video&&null!==r.video?(t.mediaStream.getVideoTracks().length>1&&iT.warning("Publishing a stream with multiple video tracks is not fully supported."),f.video={},f.video.source=t.source.video,l=t.mediaStream.getVideoTracks()[0].getSettings(),f.video.parameters={resolution:{width:l.width,height:l.height},framerate:l.frameRate}):f.video=!1,h=this._createInternalId(),e.next=69,this._chainSdpPromise(h);case 69:if(d={},p=[],"function"!=typeof this.pc.addTransceiver){e.next=94;break}if(!(f.audio&&t.mediaStream.getAudioTracks().length>0)){e.next=82;break}if(v={direction:"sendonly",streams:[t.mediaStream]},this._isRtpEncodingParameters(r.audio)&&(v.sendEncodings=r.audio),y=this.pc.addTransceiver(t.mediaStream.getAudioTracks()[0],v),p.push({type:"audio",transceiver:y,source:f.audio.source,option:{audio:r.audio}}),!hb()){e.next=82;break}return(g=y.sender.getParameters()).encodings=v.sendEncodings,e.next=82,y.sender.setParameters(g);case 82:if(!(f.video&&t.mediaStream.getVideoTracks().length>0)){e.next=92;break}if(m={direction:"sendonly",streams:[t.mediaStream]},this._isRtpEncodingParameters(r.video)&&(m.sendEncodings=r.video,this._videoCodecs=n),b=this.pc.addTransceiver(t.mediaStream.getVideoTracks()[0],m),p.push({type:"video",transceiver:b,source:f.video.source,option:{video:r.video}}),!hb()){e.next=92;break}return(w=b.sender.getParameters()).encodings=m.sendEncodings,e.next=92,b.sender.setParameters(w);case 92:e.next=98;break;case 94:if(f.audio&&t.mediaStream.getAudioTracks().length>0){k=xC(t.mediaStream.getAudioTracks());try{for(k.s();!(_=k.n()).done;)S=_.value,this.pc.addTrack(S,t.mediaStream)}catch(e){k.e(e)}finally{k.f()}}if(f.video&&t.mediaStream.getVideoTracks().length>0){x=xC(t.mediaStream.getVideoTracks());try{for(x.s();!(E=x.n()).done;)T=E.value,this.pc.addTrack(T,t.mediaStream)}catch(e){x.e(e)}finally{x.f()}}d.offerToReceiveAudio=!1,d.offerToReceiveVideo=!1;case 98:return this._publishTransceivers.set(h,{transceivers:p}),this.pc.createOffer(d).then((function(e){return O=e,R.pc.setLocalDescription(e)})).then((function(){var e=[];return Jm(p).call(p,(function(t){var r=t.type,n=t.transceiver,i=t.source;e.push({type:r,mid:n.mid,source:i})})),R._signaling.sendSignalingMessage("publish",{media:{tracks:e},attributes:t.attributes,transport:{id:R._id,type:"webrtc"}}).catch((function(e){throw R._signaling.sendSignalingMessage("soac",{id:R._id,signaling:O}),e}))})).then((function(e){var t=e.id;if(R._publishTransceivers.get(h).id=t,R._reverseIdMap.set(t,h),R._id&&R._id!==e.transportId)iT.warning("Server returns conflict ID: "+e.transportId);else{R._id=e.transportId;var n=new sk("id",{message:t,origin:R._remoteId});R.dispatchEvent(n),r&&Jm(p).call(p,(function(e){e.type;var t=e.transceiver,r=e.option;O.sdp=R._setRtpReceiverOptions(O.sdp,r,t.mid),O.sdp=R._setRtpSenderOptions(O.sdp,r,t.mid)})),R._signaling.sendSignalingMessage("soac",{id:R._id,signaling:O})}})).catch((function(e){iT.error("Failed to create offer or set SDP. Message: "+e.message),R._publishTransceivers.get(h).id?(R._unpublish(h),R._rejectPromise(e),R._fireEndedEventOnPublicationOrSubscription()):R._unpublish(h)})),e.abrupt("return",new Um((function(e,t){R._publishPromises.set(h,{resolve:e,reject:t})})));case 101:case"end":return e.stop()}}),e,this,[[19,29,32,35],[39,49,52,55]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"subscribe",value:(t=ry(Cg.mark((function e(t,r){var n,i,o,a,s,u,c,f,l,h=this;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ended){e.next=2;break}return e.abrupt("return",Um.reject("Connection closed"));case 2:if(void 0===r&&(r={audio:!!t.settings.audio,video:!!t.settings.video}),"object"===Uy(r)){e.next=5;break}return e.abrupt("return",Um.reject(new TypeError("Options should be an object.")));case 5:if(void 0===r.audio&&(r.audio=!!t.settings.audio),void 0===r.video&&(r.video=!!t.settings.video),!(void 0!==r.audio&&"object"!==Uy(r.audio)&&"boolean"!=typeof r.audio&&null!==r.audio||void 0!==r.video&&"object"!==Uy(r.video)&&"boolean"!=typeof r.video&&null!==r.video)){e.next=9;break}return e.abrupt("return",Um.reject(new TypeError("Invalid options type.")));case 9:if(!(r.audio&&!t.settings.audio||r.video&&!t.settings.video)){e.next=11;break}return e.abrupt("return",Um.reject(new zO("options.audio/video cannot be true or an object if there is no audio/video track in remote stream.")));case 11:if(!1!==r.audio||!1!==r.video){e.next=13;break}return e.abrupt("return",Um.reject(new zO("Cannot subscribe a stream without audio and video.")));case 13:if(n={},!r.audio){e.next=22;break}if("object"!==Uy(r.audio)||!dl(r.audio.codecs)){e.next=18;break}if(0!==r.audio.codecs.length){e.next=18;break}return e.abrupt("return",Um.reject(new TypeError("Audio codec cannot be an empty array.")));case 18:n.audio={},n.audio.from=t.id,e.next=23;break;case 22:n.audio=!1;case 23:if(!r.video){e.next=33;break}if("object"!==Uy(r.video)||!dl(r.video.codecs)){e.next=27;break}if(0!==r.video.codecs.length){e.next=27;break}return e.abrupt("return",Um.reject(new TypeError("Video codec cannot be an empty array.")));case 27:n.video={},n.video.from=t.id,(r.video.resolution||r.video.frameRate||r.video.bitrateMultiplier&&1!==r.video.bitrateMultiplier||r.video.keyFrameInterval)&&(n.video.parameters={resolution:r.video.resolution,framerate:r.video.frameRate,bitrate:r.video.bitrateMultiplier?"x"+r.video.bitrateMultiplier.toString():void 0,keyFrameInterval:r.video.keyFrameInterval}),r.video.rid&&((o=Ak(i=t.settings.video).call(i,(function(e){return e.rid===r.video.rid})))&&o._trackId&&(n.video.from=o._trackId,delete n.video.parameters),r.video=!0),e.next=34;break;case 33:n.video=!1;case 34:return a=this._createInternalId(),e.next=37,this._chainSdpPromise(a);case 37:return s={},u=[],"function"==typeof this.pc.addTransceiver?(n.audio&&(c=this.pc.addTransceiver("audio",{direction:"recvonly"}),u.push({type:"audio",transceiver:c,from:n.audio.from,option:{audio:r.audio}})),n.video&&(f=this.pc.addTransceiver("video",{direction:"recvonly"}),u.push({type:"video",transceiver:f,from:n.video.from,parameters:n.video.parameters,option:{video:r.video}}))):(s.offerToReceiveAudio=!!r.audio,s.offerToReceiveVideo=!!r.video),this._subscribeTransceivers.set(a,{transceivers:u}),this.pc.createOffer(s).then((function(e){return l=e,h.pc.setLocalDescription(e).catch((function(e){throw iT.error("Set local description failed. Message: "+qm(e)),e}))}),(function(e){throw iT.error("Create offer failed. Error info: "+qm(e)),e})).then((function(){var e=[];return Jm(u).call(u,(function(t){var r=t.type,n=t.transceiver,i=t.from,o=t.parameters;t.option,e.push({type:r,mid:n.mid,from:i,parameters:o})})),h._signaling.sendSignalingMessage("subscribe",{media:{tracks:e},transport:{id:h._id,type:"webrtc"}}).catch((function(e){throw h._signaling.sendSignalingMessage("soac",{id:h._id,signaling:l}),e}))})).then((function(e){var t=e.id;if(h._subscribeTransceivers.get(a).id=t,h._reverseIdMap.set(t,a),h._id&&h._id!==e.transportId)iT.warning("Server returns conflict ID: "+e.transportId);else{h._id=e.transportId;var n=new sk("id",{message:t,origin:h._remoteId});h.dispatchEvent(n),r&&Jm(u).call(u,(function(e){e.type;var t=e.transceiver,r=e.option;l.sdp=h._setRtpReceiverOptions(l.sdp,r,t.mid)})),h._signaling.sendSignalingMessage("soac",{id:h._id,signaling:l})}})).catch((function(e){iT.error("Failed to create offer or set SDP. Message: "+e.message),h._subscribeTransceivers.get(a).id?(h._unsubscribe(a),h._rejectPromise(e),h._fireEndedEventOnPublicationOrSubscription()):h._unsubscribe(a)})),e.abrupt("return",new Um((function(e,t){h._subscribePromises.set(a,{resolve:e,reject:t})})));case 43:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"close",value:function(){this.sdpTime&&clearTimeout(this.sdpTime),this.sdpTime=null,this._sdpPromise=null,this.pc&&(this.pc.close(),this.pc=null)}},{key:"_chainSdpPromise",value:function(e){var t=this,r=this._sdpPromise;return this._sdpPromise=r.then((function(){return new Um((function(r,n){var i={finish:!1,resolve:r,reject:n};t._sdpResolvers.push(i),t._sdpResolverMap.set(e,i),t.sdpTime=nT((function(){return n("Timeout to get SDP answer")}),1e4)}))})),r.catch((function(e){}))}},{key:"_nextSdpPromise",value:function(){for(var e=!1;this._sdpResolveNum<this._sdpResolvers.length;){var t=this._sdpResolvers[this._sdpResolveNum];this._sdpResolveNum++,t.finish||(t.resolve(),t.finish=!0,e=!0)}return e}},{key:"_createInternalId",value:function(){return this._internalCount++}},{key:"_unpublish",value:function(e){var t=this;if(this._publishTransceivers.has(e)){var r=this._publishTransceivers.get(e),n=r.id,i=r.transceivers;if(n&&(this._signaling.sendSignalingMessage("unpublish",{id:n}).catch((function(e){iT.warning("MCU returns negative ack for unpublishing, "+e)})),this._reverseIdMap.delete(n)),Jm(i).call(i,(function(e){var r=e.transceiver;"stable"===t.pc.signalingState&&(r.sender.replaceTrack(null),t.pc.removeTrack(r.sender)),r.stop()})),this._publishTransceivers.delete(e),this._publications.has(n)){var o=new ak("ended");this._publications.get(n).dispatchEvent(o),this._publications.delete(n)}else iT.warning("Invalid publication to unpublish: "+n),this._publishPromises.has(e)&&this._publishPromises.get(e).reject(new zO("Failed to publish"));if(this._sdpResolverMap.has(e)){var a=this._sdpResolverMap.get(e);a.finish||(a.resolve(),a.finish=!0),this._sdpResolverMap.delete(e)}}}},{key:"_unsubscribe",value:function(e){if(this._subscribeTransceivers.has(e)){var t=this._subscribeTransceivers.get(e),r=t.id,n=t.transceivers;if(r&&this._signaling.sendSignalingMessage("unsubscribe",{id:r}).catch((function(e){iT.warning("MCU returns negative ack for unsubscribing, "+e)})),Jm(n).call(n,(function(e){var t=e.transceiver;t.receiver.track.stop(),console.log(t.receiver.track,"æå°track"),t.stop()})),this._subscribeTransceivers.delete(e),this._subscriptions.has(r)){var i=new ak("ended");this._subscriptions.get(r).dispatchEvent(i),this._subscriptions.delete(r)}else iT.warning("Invalid subscription to unsubscribe: "+r),this._subscribePromises.has(e)&&this._subscribePromises.get(e).reject(new zO("Failed to subscribe"));if(this._sdpResolverMap.has(e)){var o=this._sdpResolverMap.get(e);o.finish||(o.resolve(),o.finish=!0),this._sdpResolverMap.delete(e)}}}},{key:"_muteOrUnmute",value:function(e,t,r,n){var i=this,o=r?"stream-control":"subscription-control",a=t?"pause":"play";return this._signaling.sendSignalingMessage(o,{id:e,operation:a,data:n}).then((function(){if(!r){var o=t?"mute":"unmute";i._subscriptions.get(e).dispatchEvent(new ck(o,{kind:n}))}}))}},{key:"_applyOptions",value:function(e,t){if("object"!==Uy(t)||"object"!==Uy(t.video))return Um.reject(new zO("Options should be an object."));var r={};return r.resolution=t.video.resolution,r.framerate=t.video.frameRate,r.bitrate=t.video.bitrateMultiplier?"x"+t.video.bitrateMultiplier.toString():void 0,r.keyFrameInterval=t.video.keyFrameInterval,this._signaling.sendSignalingMessage("subscription-control",{id:e,operation:"update",data:{video:{parameters:r}}}).then()}},{key:"_onRemoteStreamAdded",value:function(e){iT.debug("Remote stream added.");var t,r=xC(this._subscribeTransceivers);try{for(r.s();!(t=r.n()).done;){var n,i=wP(t.value,2),o=i[0],a=i[1];if(Ak(n=a.transceivers).call(n,(function(t){return t.transceiver===e.transceiver}))){if(this._subscriptions.has(a.id)){var s=this._subscriptions.get(a.id);s.stream=e.streams[0],this._subscribePromises.has(o)&&(this._subscribePromises.get(o).resolve(s),this._subscribePromises.delete(o))}else this._remoteMediaStreams.set(a.id,e.streams[0]);return}}}catch(e){r.e(e)}finally{r.f()}iT.warning("Received remote stream without subscription.")}},{key:"_onLocalIceCandidate",value:function(e){e.candidate?"stable"!==this.pc.signalingState?this._pendingCandidates.push(e.candidate):this._sendCandidate(e.candidate):iT.debug("Empty candidate.")}},{key:"_fireEndedEventOnPublicationOrSubscription",value:function(){if(!this._ended){this._ended=!0;var e,t=new ak("ended"),r=xC(this._publications);try{for(r.s();!(e=r.n()).done;){var n=wP(e.value,2)[1];n.dispatchEvent(t),n.stop()}}catch(e){r.e(e)}finally{r.f()}var i,o=xC(this._subscriptions);try{for(o.s();!(i=o.n()).done;){var a=wP(i.value,2)[1];a.dispatchEvent(t),a.stop()}}catch(e){o.e(e)}finally{o.f()}this.dispatchEvent(t),this.close()}}},{key:"_rejectPromise",value:function(e){e||(e=new zO("Connection failed or closed.")),this.pc&&"closed"!==this.pc.iceConnectionState&&this.pc.close();var t,r=xC(this._publishPromises);try{for(r.s();!(t=r.n()).done;){wP(t.value,2)[1].reject(e)}}catch(e){r.e(e)}finally{r.f()}this._publishPromises.clear();var n,i=xC(this._subscribePromises);try{for(i.s();!(n=i.n()).done;){wP(n.value,2)[1].reject(e)}}catch(e){i.e(e)}finally{i.f()}this._subscribePromises.clear()}},{key:"_onIceConnectionStateChange",value:function(e){e&&e.currentTarget&&(iT.debug("ICE connection state changed to "+e.currentTarget.iceConnectionState),"closed"!==e.currentTarget.iceConnectionState&&"failed"!==e.currentTarget.iceConnectionState||("failed"===e.currentTarget.iceConnectionState?this._handleError("connection failed."):this._fireEndedEventOnPublicationOrSubscription()))}},{key:"_onConnectionStateChange",value:function(e){"closed"!==this.pc.connectionState&&"failed"!==this.pc.connectionState||("failed"===this.pc.connectionState?this._handleError("connection failed."):this._fireEndedEventOnPublicationOrSubscription())}},{key:"_sendCandidate",value:function(e){this._signaling.sendSignalingMessage("soac",{id:this._id,signaling:{type:"candidate",candidate:{candidate:"a="+e.candidate,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex}}})}},{key:"_createPeerConnection",value:function(){var e=this;if(this.pc)iT.warning("A PeerConnection was created. Cannot create again for the same PeerConnectionChannel.");else{var t=this._config.rtcConfiguration||{};null!==window.navigator.userAgent.match("Chrome")&&(t.bundlePolicy="max-bundle"),this.pc=new RTCPeerConnection(t),this.pc.onicecandidate=function(t){e._onLocalIceCandidate.apply(e,[t])},this.pc.ontrack=function(t){e._onRemoteStreamAdded.apply(e,[t])},this.pc.oniceconnectionstatechange=function(t){e._onIceConnectionStateChange.apply(e,[t])},this.pc.onconnectionstatechange=function(t){e._onConnectionStateChange.apply(e,[t])}}}},{key:"_getStats",value:function(){return this.pc?this.pc.getStats():Um.reject(new zO("PeerConnection is not available."))}},{key:"_readyHandler",value:function(e){var t=this,r=this._reverseIdMap.get(e);if(this._subscribePromises.has(r)){var n=this._remoteMediaStreams.get(e),i=new SC(_C,this._id);i.rtpTransceivers=this._subscribeTransceivers.get(r).transceivers;var o=new ej(e,n,i,(function(){t._unsubscribe(r)}),(function(){return t._getStats()}),(function(r){return t._muteOrUnmute(e,!0,!1,r)}),(function(r){return t._muteOrUnmute(e,!1,!1,r)}),(function(r){return t._applyOptions(e,r)}));this._subscriptions.set(e,o),this._subscriptions.get(e).stream&&(this._subscribePromises.get(r).resolve(o),this._subscribePromises.delete(r))}else if(this._publishPromises.has(r)){var a=new SC(_C,this._id);a.transceivers=this._publishTransceivers.get(r).transceivers;var s=new $P(e,a,(function(){return t._unpublish(r),Um.resolve()}),(function(){return t._getStats()}),(function(r){return t._muteOrUnmute(e,!0,!0,r)}),(function(r){return t._muteOrUnmute(e,!1,!0,r)}));this._publications.set(e,s),this._publishPromises.get(r).resolve(s)}}},{key:"_sdpHandler",value:function(e){var t=this;"answer"===e.type&&this.pc.setRemoteDescription(e).then((function(){if(t._pendingCandidates.length>0){var e,r=xC(t._pendingCandidates);try{for(r.s();!(e=r.n()).done;){var n=e.value;t._sendCandidate(n)}}catch(e){r.e(e)}finally{r.f()}}}),(function(e){iT.error("Set remote description failed: "+e),t._rejectPromise(e),t._fireEndedEventOnPublicationOrSubscription()})).then((function(){t._nextSdpPromise()||iT.warning("Unexpected SDP promise state")}))}},{key:"_errorHandler",value:function(e,t){if(!e)return this._handleError(t);var r=new uk("error",{error:new zO(t)});this._publications.has(e)&&this._publications.get(e).dispatchEvent(r),this._subscriptions.has(e)&&this._subscriptions.get(e).dispatchEvent(r);var n=this._reverseIdMap.get(e);this._publishTransceivers.has(n)&&this._unpublish(n),this._subscribeTransceivers.has(n)&&this._unsubscribe(n)}},{key:"_handleError",value:function(e){var t=new zO(e);if(!this._ended){var r,n=new uk("error",{error:t}),i=xC(this._publications);try{for(i.s();!(r=i.n()).done;){wP(r.value,2)[1].dispatchEvent(n)}}catch(e){i.e(e)}finally{i.f()}var o,a=xC(this._subscriptions);try{for(a.s();!(o=a.n()).done;){wP(o.value,2)[1].dispatchEvent(n)}}catch(e){a.e(e)}finally{a.f()}this._fireEndedEventOnPublicationOrSubscription()}}},{key:"_setCodecOrder",value:function(e,t,r){t.audio&&(e=t.audio.codecs?wC(e,"audio",Cs(t.audio.codecs,(function(e){return e.name})),r):wC(e,"audio",Cs(t.audio,(function(e){return e.codec.name})),r));t.video&&(e=t.video.codecs?wC(e,"video",Cs(t.video.codecs,(function(e){return e.name})),r):wC(e,"video",Cs(t.video,(function(e){return e.codec.name})),r));return e}},{key:"_setMaxBitrate",value:function(e,t,r){return"object"===Uy(t.audio)&&(e=kC(e,t.audio,r)),"object"===Uy(t.video)&&(e=kC(e,t.video,r)),e}},{key:"_setRtpSenderOptions",value:function(e,t,r){return this._isRtpEncodingParameters(t.audio)||this._isRtpEncodingParameters(t.video)?e:e=this._setMaxBitrate(e,t,r)}},{key:"_setRtpReceiverOptions",value:function(e,t,r){return this._isRtpEncodingParameters(t.video)&&db()&&t.video.length>1&&(e=function(e,t,r,n){var i,o,a,s;if(!(r&&r>1))return e;var u=e.split("\r\n"),c=null,f=null;if("string"==typeof n){var l=bC(u,n);if(l){var h=l.start,d=l.end;c=Xn(u).call(u,0,h),f=Xn(u).call(u,d),u=Xn(u).call(u,h,d)}}var p=dC(u,"m=",t);if(null===p)return e;var v=pC(u,p+1,-1,"m=");null===v&&(v=u.length);for(var y=function(e){return e.split(" ")[0].split(":")[1]},g=new Bm,m=new Bm,b=new Bm,w=[],k=[],_=p+1;_<v;){var S=u[_];if(""===S)break;if(Sw(S).call(S,"a=ssrc:")>-1){var x=y(u[_]);if(m.add(x),Sw(S).call(S,"cname")>-1||Sw(S).call(S,"msid")>-1)for(var E=1;E<r;E++){var T=_j(x)+E+"";w.push(S.replace(x,T))}else g.add(S)}if(Sw(S).call(S,"a=ssrc-group:FID")>-1){var O=S.split(" ");b.add(O[2]);for(var R=1;R<r;R++){var A=_j(O[1])+R+"",P=_j(O[2])+R+"";k.push(S.replace(O[1],A).replace(O[2],P))}}_++}var j,C=_;return Jm(m).call(m,(function(e){if(!b.has(e)){var t="a=ssrc-group:SIM";t=t+" "+e;for(var n=1;n<r;n++)t=t+" "+(_j(e)+n);k.push(t)}})),eC(w).call(w),Yw(i=u).apply(i,Km(o=[C,0]).call(o,k)),Yw(a=u).apply(a,Km(s=[C,0]).call(s,w)),u=sC(u).call(u,(function(e){return!g.has(e)})),c&&(u=Km(j=Km(c).call(c,u)).call(j,f)),e=u.join("\r\n")}(e,"video",t.video.length,r)),this._isRtpEncodingParameters(t.video)&&this._videoCodecs?e=wC(e,"video",this._videoCodecs,r):this._isRtpEncodingParameters(t.audio)||this._isRtpEncodingParameters(t.video)?e:e=this._setCodecOrder(e,t,r)}},{key:"_onStreamEvent",value:function(e){var t=[];this._publications.has(e.id)&&t.push(this._publications.get(e.id));var r,n,i=xC(this._subscriptions);try{for(i.s();!(r=i.n()).done;){var o=r.value;e.id!==o._audioTrackId&&e.id!==o._videoTrackId||t.push(o)}}catch(e){i.e(e)}finally{i.f()}t.length&&("audio.status"===e.data.field?n=gb:"video.status"===e.data.field?n=mb:iT.warning("Invalid data field for stream update info."),"active"===e.data.value?Jm(t).call(t,(function(e){return e.dispatchEvent(new ck("unmute",{kind:n}))})):"inactive"===e.data.value?Jm(t).call(t,(function(e){return e.dispatchEvent(new ck("mute",{kind:n}))})):iT.warning("Invalid data value for stream update info."))}},{key:"_isRtpEncodingParameters",value:function(e){if(!dl(e))return!1;var t=e[0];return!!(t.codecPayloadType||t.dtx||t.active||t.ptime||t.maxFramerate||t.scaleResolutionDownBy||t.rid||t.scalabilityMode)}},{key:"_isOwtEncodingParameters",value:function(e){return!!dl(e)&&!!e[0].codec}}]),o}(),RC=Tr,AC=S;R.f;var PC=pn,jC=ei,CC=RP,IC=J,LC=PP,MC=AC("".startsWith),NC=AC("".slice),BC=Math.min;RC({target:"String",proto:!0,forced:!LC("startsWith")},{startsWith:function(e){var t=jC(IC(this));CC(e);var r=PC(BC(arguments.length>1?arguments[1]:void 0,t.length)),n=jC(e);return MC?MC(t,n,r):NC(t,r,r+n.length)===n}});var UC=zn("String").startsWith,FC=c,DC=UC,qC=String.prototype,HC=function(e){var t=e.startsWith;return"string"==typeof e||e===qC||FC(qC,e)&&t===qC.startsWith?DC:t},VC=t(HC),zC=l,WC=r,GC=ei,KC=cj.trim,JC=tj,$C=u("".charAt),YC=zC.parseFloat,XC=zC.Symbol,QC=XC&&XC.iterator,ZC=1/YC(JC+"-0")!=-1/0||QC&&!WC((function(){YC(Object(QC))}))?function(e){var t=KC(GC(e)),r=YC(t);return 0===r&&"-"==$C(t,0)?-0:r}:YC;Tr({target:"Number",stat:!0,forced:Number.parseFloat!=ZC},{parseFloat:ZC});var eI=t(te.Number.parseFloat),tI=Hy((function e(t,r,n){ny(this,e),this.name=t,this.channelCount=r,this.clockRate=n})),rI=Hy((function e(t,r){ny(this,e),this.name=t,this.profile=r}));function nI(e,t){var r=void 0!==fl&&ll(e)||e["@@iterator"];if(!r){if(dl(e)||(r=function(e,t){var r;if(!e)return;if("string"==typeof e)return iI(e,t);var n=Xn(r=Object.prototype.toString.call(e)).call(r,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Cs(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iI(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function iI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oI(e,t){return e-t}function aI(e,t){return e.width!==t.width?e.width-t.width:e.height-t.height}function sI(e){var t,r,n,i,o,a,s,u,c=[],f=[],l=nI(e.tracks);try{for(l.s();!(u=l.n()).done;){var h=u.value;if("audio"===h.type){h.format&&(t=new tI(h.format.codec,h.format.channelNum,h.format.sampleRate));var d=new GP(t);d._trackId=h.id,c.push(d)}else if("video"===h.type){h.format&&(r=new rI(h.format.codec,h.format.profile)),h.parameters&&(h.parameters.resolution&&(n=new bb(h.parameters.resolution.width,h.parameters.resolution.height)),i=h.parameters.framerate,o=1e3*h.parameters.bitrate,a=h.parameters.keyFrameInterval),h.rid&&(s=h.rid);var p=new KP(r,n,i,o,a,s);p._trackId=h.id,f.push(p)}}}catch(e){l.e(e)}finally{l.f()}return new JP(c,f)}function uI(e){var t,r,n,i=nI(e.tracks);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("audio"===o.type){var a=[];if(o.optional&&o.optional.format){var s,u=nI(o.optional.format);try{for(u.s();!(s=u.n()).done;){var c=s.value,f=new tI(c.codec,c.channelNum,c.sampleRate);a.push(f)}}catch(e){u.e(e)}finally{u.f()}}eC(a).call(a),t=new XP(a)}else if("video"===o.type){var l,h=[];if(o.optional&&o.optional.format){var d,p=nI(o.optional.format);try{for(p.s();!(d=p.n()).done;){var v=d.value,y=new rI(v.codec,v.profile);h.push(y)}}catch(e){p.e(e)}finally{p.f()}}if(eC(h).call(h),null!==(l=o.optional)&&void 0!==l&&l.parameters){var g=Cs(o.optional.parameters.resolution,(function(e){return new bb(e.width,e.height)}));eC(g).call(g,aI);var m=Cs(o.optional.parameters.bitrate,(function(e){return"string"==typeof(t=e)&&VC(t).call(t,"x")?eI(t.replace(/^x/,"")):(iT.warning("Invalid bitrate multiplier input."),0);var t}));m.push(1),eC(m).call(m,oI);var b=JSON.parse(qm(o.optional.parameters.framerate));eC(b).call(b,oI);var w=JSON.parse(qm(o.optional.parameters.keyFrameInterval));eC(w).call(w,oI),r=new QP(h,g,b,m,w)}else r=new QP(h,[],[],[],[])}}}catch(e){i.e(e)}finally{i.f()}return new ZP(t,r)}function cI(e){var t=function(){if("undefined"==typeof Reflect||!Xb)return!1;if(Xb.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Xb(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fw(e);if(t){var i=fw(this).constructor;r=Xb(n,arguments,i)}else r=n.apply(this,arguments);return cw(this,r)}}var fI=function(e){uw(r,vk);var t=cI(r);function r(e){var n;if(ny(this,r),"mixed"!==e.type)throw new TypeError("Not a mixed stream");return(n=t.call(this,e.id,void 0,void 0,new hk("mixed","mixed"))).settings=sI(e.media),n.extraCapabilities=uI(e.media),n}return Hy(r)}(),lI=function(e){uw(r,ak);var t=cI(r);function r(e,n){var i;return ny(this,r),(i=t.call(this,e)).activeAudioInputStreamId=n.activeAudioInputStreamId,i}return Hy(r)}(),hI=function(e){uw(r,ak);var t=cI(r);function r(e,n){var i;return ny(this,r),(i=t.call(this,e)).layout=n.layout,i}return Hy(r)}();function dI(e,t){var r=void 0!==fl&&ll(e)||e["@@iterator"];if(!r){if(dl(e)||(r=function(e,t){var r;if(!e)return;if("string"==typeof e)return pI(e,t);var n=Xn(r=Object.prototype.toString.call(e)).call(r,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Cs(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pI(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function pI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vI=1,yI=2,gI=3,mI=function(e,t){var r=new ak(e,t);return r.participant=t.participant,r},bI=function(e,t){gk(this,new ok),e=e||{};var r,n,i,o=this,a=vI,s=t||new dP,u=new bk,c=new bk,f=new bk,l=new bk,h=null,d=null;function p(e,t){"soac"!==e&&"progress"!==e?"stream"===e?"add"===t.status?function(e){var t=y(e);u.set(t.id,t);var r=new yk("streamadded",{stream:t});o.dispatchEvent(r)}(t.data):"remove"===t.status?function(e){if(!u.has(e.id))return void iT.warning("Cannot find specific remote stream.");var t=u.get(e.id),r=new ak("ended");u.delete(t.id),t.dispatchEvent(r)}(t):"update"===t.status&&("audio.status"===t.data.field||"video.status"===t.data.field?Jm(l).call(l,(function(r){r.onMessage(e,t)})):"activeInput"===t.data.field?function(e){if(!u.has(e.id))return void iT.warning("Cannot find specific remote stream.");var t=u.get(e.id),r=new lI("activeaudioinputchange",{activeAudioInputStreamId:e.data.value});t.dispatchEvent(r)}(t):"video.layout"===t.data.field?function(e){if(!u.has(e.id))return void iT.warning("Cannot find specific remote stream.");var t=u.get(e.id),r=new hI("layoutchange",{layout:e.data.value});t.dispatchEvent(r)}(t):"."===t.data.field?function(e){if(!u.has(e.id))return void iT.warning("Cannot find specific remote stream.");v(e);var t=u.get(e.id);t.settings=sI(e.media),t.extraCapabilities=uI(e.media);var r=new ak("updated");t.dispatchEvent(r)}(t.data.value):iT.warning("Unknown stream event from MCU.")):"text"===e?function(e){var t=new sk("messagereceived",{message:e.message,origin:e.from,to:e.to});o.dispatchEvent(t)}(t):"participant"===e&&function(e){if("join"===e.action){e=e.data;var t=new vP(e.id,e.role,e.user);c.set(e.id,t);var r=new mI("participantjoined",{participant:t});o.dispatchEvent(r)}else if("leave"===e.action){var n=e.data;if(!c.has(n))return void iT.warning("Received leave message from MCU for an unknown participant.");var i=c.get(n);c.delete(n),i.dispatchEvent(new ak("left"))}}(t):l.has(t.id)?l.get(t.id).onMessage(e,t):d&&d.hasContentSessionId(t.id)?d.onMessage(e,t):iT.warning("Cannot find a channel for incoming data.")}function v(e){var t;e.media.tracks||(e.media.tracks=[],e.media.audio&&((t=e.media.audio).type="audio",e.media.tracks.push(t),delete e.media.audio),e.media.video&&((t=e.media.video).type="video",e.media.tracks.push(t),delete e.media.video))}function y(e){if(v(e),"mixed"===e.type)return new fI(e);var t,r,n,i,o=Ak(t=e.media.tracks).call(t,(function(e){return"audio"===e.type})),a=Ak(r=e.media.tracks).call(r,(function(e){return"video"===e.type}));o&&(n=o.source),a&&(i=a.source);var s=e.data,u=new vk(e.id,e.info.owner,void 0,new hk(n,i,s),e.info.attributes);return u.settings=sI(e.media),u.extraCapabilities=uI(e.media),u}function g(e,t){return m.apply(this,arguments)}function m(){return(m=ry(Cg.mark((function e(t,r){return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.send(t,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){var e=lb(ok);return e.sendSignalingMessage=g,e}function w(){c.clear(),u.clear()}lw(this,"peerConnection",{configurable:!1,get:function(){var e;return null===(e=h)||void 0===e?void 0:e.pc}}),s.addEventListener("data",(function(e){p(e.message.notification,e.message.data)})),s.addEventListener("disconnect",(function(){w(),a=vI,o.dispatchEvent(new ak("serverdisconnected"))})),lw(this,"info",{configurable:!1,get:function(){return n?new yP(n.id,Cs(c,(function(e){return e[1]})),Cs(u,(function(e){return e[1]})),r):null}}),this.join=function(t,o){return new Um((function(f,p){var v,g=JSON.parse(WO.decodeBase64(t)),m=!0===g.secure;if(o)v=o;else{if("string"!=typeof(v=g.host))return void p(new zO("Invalid host."));if(-1===Sw(v).call(v,"http")&&(v=m?"https://"+v:"http://"+v),a!==vI)return void p(new zO("connection state invalid"))}a=yI;var w=function(){var e=lb({});e.sdk={version:"5.0",type:"JavaScript"};var t=navigator.userAgent,r=/Chrome\/([0-9.]+)/.exec(t);return r?e.runtime={name:"Chrome",version:r[1]}:(r=/Firefox\/([0-9.]+)/.exec(t))?e.runtime={name:"Firefox",version:r[1]}:(r=/Edge\/([0-9.]+)/.exec(t))?e.runtime={name:"Edge",version:r[1]}:db()?(r=/Version\/([0-9.]+) Safari/.exec(t),e.runtime={name:"Safari"},e.runtime.version=r?r[1]:"Unknown"):e.runtime={name:"Unknown",version:"Unknown"},(r=/Windows NT ([0-9.]+)/.exec(t))?e.os={name:"Windows NT",version:r[1]}:(r=/Intel Mac OS X ([0-9_.]+)/.exec(t))?e.os={name:"Mac OS X",version:r[1].replace(/_/g,".")}:(r=/iPhone OS ([0-9_.]+)/.exec(t))?e.os={name:"iPhone OS",version:r[1].replace(/_/g,".")}:(r=/X11; Linux/.exec(t))?e.os={name:"Linux",version:"Unknown"}:(r=/Android( ([0-9.]+))?/.exec(t))?e.os={name:"Android",version:r[1]||"Unknown"}:(r=/CrOS/.exec(t))?e.os={name:"Chrome OS",version:"Unknown"}:e.os={name:"Unknown",version:"Unknown"},e.capabilities={continualIceGathering:!1,streamRemovable:"Firefox"!==e.runtime.name,ignoreDataChannelAcks:!0},e}(),k={token:t,userAgent:{sdk:w.sdk},protocol:"1.2"};s.connect(v,m,k).then((function(t){if(a=gI,void 0!==(n=t.room).streams){var o,s=dI(n.streams);try{for(s.s();!(o=s.n()).done;){var p=o.value;"mixed"===p.type&&(p.viewport=p.info.label),u.set(p.id,y(p))}}catch(e){s.e(e)}finally{s.f()}}if(t.room&&void 0!==t.room.participants){var v,m=dI(t.room.participants);try{for(m.s();!(v=m.n()).done;){var w=v.value;c.set(w.id,new vP(w.id,w.role,w.user)),w.id===t.id&&(r=c.get(w.id))}}catch(e){m.e(e)}finally{m.f()}}h=function(t){var r=b(),n=new OC(e,r);return n.addEventListener("id",(function(e){l.has(e.message)?iT.warning("Channel already exists",e.message):l.set(e.message,n)})),n}(),h.addEventListener("ended",(function(){console.log("è§¦åäºç½®ç©ºnull"),h=null})),"function"==typeof WebTransport&&g.webTransportUrl&&(d=new QuicConnection(g.webTransportUrl,t.webTransportToken,b(),e.webTransportConfiguration)),i=new yP(t.room.id,Cs(Uk(c).call(c)),Cs(Uk(u).call(u)),r),d?d.init().then((function(){f(i)})):f(i)}),(function(e){a=vI,p(new zO(e))}))}))},this.publish=function(e,t,r){return e instanceof pk?e.source.data?d.publish(e):f.has(e.mediaStream.id)?Um.reject(new zO("Cannot publish a published stream.")):h.publish(e,t,r):Um.reject(new zO("Invalid stream."))},this.subscribe=function(e,t){return e instanceof vk?e.source.data?e.source.audio||e.source.video?Um.reject(new TypeError("Invalid source info. A remote stream is either a data stream or a media stream.")):d?d.subscribe(e):Um.reject(new TypeError("WebTransport is not supported.")):h.subscribe(e,t):Um.reject(new zO("Invalid stream."))},this.send=function(e,t){return void 0===t&&(t="all"),g("text",{to:t,message:e})},this.leave=function(){return i=null,h.clearEventListener("ended"),h.clearEventListener("id"),h.close(),h=null,s.disconnect().then((function(){w(),a=vI}))}};function wI(e,t){var r=void 0!==fl&&ll(e)||e["@@iterator"];if(!r){if(dl(e)||(r=function(e,t){var r;if(!e)return;if("string"==typeof e)return kI(e,t);var n=Xn(r=Object.prototype.toString.call(e)).call(r,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Cs(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kI(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function kI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ny(this,e),this.serverUrl=t.serverUrl,this.vms=null,this.publications=new Bm,this.subscriptions=new Bm,this.localStream=[],this.events=t.events}var t,r,n,i,o,a,s,u,c,f,l,h,d,p,v;return Hy(e,[{key:"_httpRequest",value:(v=ry(Cg.mark((function e(t,r,n){return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Um((function(e){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)try{e({code:i.status,data:JSON.parse(i.responseText)})}catch(t){e({code:i.status,data:i.responseText})}},i.open(t,r),i.setRequestHeader("Content-Type","application/json"),i.send(qm(n))})));case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return v.apply(this,arguments)})},{key:"_showVideo",value:function(e,t,r){var n,i=wI(r.children);try{for(i.s();!(n=i.n()).done;){if(n.value.id==e)return}}catch(e){i.e(e)}finally{i.f()}var o=document.createElement("video");o.setAttribute("id",e),o.setAttribute("width",300),o.setAttribute("height",300),o.setAttribute("autoplay","true"),o.srcObject=t,r.appendChild(o)}},{key:"_unshowVideo",value:function(e,t){var r,n=wI(t.children);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.id==e&&t.removeChild(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_onSteamAdd",value:function(e){console.log("onSteamAdd"),this.events.onSteamAdd(e)}},{key:"_onParticipantjoined",value:function(e){console.log("onParticipantjoined"),this.events.onParticipantjoined(e)}},{key:"_onServerdisconnected",value:function(e){console.log("onServerdisconnected"),this.events.onServerdisconnected(e)}},{key:"_createRoom",value:(p=ry(Cg.mark((function e(){var t,r;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:"abcdef",options:{mediaIn:{audio:[{codec:"opus",sampleRate:48e3,channelNum:2}],video:[{codec:"h264"}]},mediaOut:{video:{parameters:{resolution:["x3/4","x2/3","x1/2","x1/3","x1/4","hd1080p","hd720p","svga","vga","qvga","cif"],framerate:[6,12,15,24,30,48,60],bitrate:["x0.8","x0.6","x0.4","x0.2"],keyFrameInterval:[100,30,5,2,1]},format:[{codec:"h264",profile:"CB"}]},audio:[{codec:"opus",sampleRate:48e3,channelNum:2}]},transcoding:{video:{parameters:{resolution:!0,framerate:!0,bitrate:!0,keyFrameInterval:!0},format:!0},audio:!0},notifying:{participantActivities:!0,streamChange:!0},inputLimit:-1,participantLimit:-1,selectActiveAudio:!1,roles:[{role:"presenter",publish:{audio:!0,video:!0},subscribe:{audio:!0,video:!0}},{role:"viewer",publish:{audio:!1,video:!1},subscribe:{audio:!0,video:!0}},{role:"audio_only_presenter",publish:{audio:!0,video:!1},subscribe:{audio:!0,video:!1}},{role:"video_only_viewer",publish:{audio:!1,video:!1},subscribe:{audio:!1,video:!0}},{role:"sip",publish:{audio:!0,video:!0},subscribe:{audio:!0,video:!0}}],name:"best",views:[{audio:{format:{codec:"opus",sampleRate:48e3,channelNum:2}},video:{parameters:{resolution:{width:640,height:960},framerate:24,keyFrameInterval:100},bgColor:{r:0,g:0,b:0},layout:{templates:{base:"void",custom:[{region:[{id:"1",shape:"rectangle",area:{left:"0",top:"0",width:"1",height:"0.5"}},{id:"2",shape:"rectangle",area:{left:"0",top:"0.5",width:"1",height:"0.5"}}]}]},fitPolicy:"letterbox"},format:{codec:"h264",profile:"CB"},maxInput:16,motionFactor:.8,keepActiveInputPrimary:!1},label:"common"}]}},e.next=3,this._httpRequest("POST",this.serverUrl+"/createRoom",t);case 3:return r=e.sent,e.abrupt("return",200==r.code?r.data._id:null);case 5:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"_createToken",value:(d=ry(Cg.mark((function e(t,r){var n,i;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={room:t,username:r,role:"presenter"},e.next=3,this._httpRequest("POST",this.serverUrl+"/createToken",n);case 3:return i=e.sent,e.abrupt("return",200==i.code?i.data:null);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"_mixStream",value:(h=ry(Cg.mark((function e(t,r){var n,i,o;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={room:t,stream:r,jsonPatch:[{op:"add",path:"/info/inViews",value:"common"}]},e.next=3,this._httpRequest("patch",this.serverUrl+Km(n="/rooms/".concat(i.room,"/streams/")).call(n,i.stream),i.jsonPatch);case 3:return o=e.sent,e.abrupt("return",200==o.code?o.data:null);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"_deleteRoom",value:(l=ry(Cg.mark((function e(t){var r;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._httpRequest("DELETE",this.serverUrl+"/room/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"_getRooms",value:(f=ry(Cg.mark((function e(){var t;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._httpRequest("GET",this.serverUrl+"/getRooms");case 2:return t=e.sent,e.abrupt("return",200==t.code?t.data:null);case 4:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"_createLocalStream",value:(c=ry(Cg.mark((function e(t,r){var n,i,o,a,s;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new wb(vb.MIC),i=new kb(yb.CAMERA),t&&(n.deviceId=t),r&&(i.deviceId=r),o=new _b(n,i),e.next=7,xb.createMediaStream(o);case 7:return a=e.sent,s=new pk(a,new hk("mic","camera")),this.localStream.push(s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"_joinRoom",value:(u=ry(Cg.mark((function e(t){var r;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.vms){e.next=2;break}return e.abrupt("return",Um.reject("can't not join twice, please init"));case 2:return e.next=4,this.vms.join(t,this.serverUrl);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"_publishStream",value:(s=ry(Cg.mark((function e(t){var r,n,i=arguments;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={audio:!(i.length>1&&void 0!==i[1])||i[1],video:!(i.length>2&&void 0!==i[2])||i[2]},e.next=5,this.vms.publish(t,r);case 5:return n=e.sent,this.publications.add(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"_stopPublishStream",value:(a=ry(Cg.mark((function e(t){return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publications.has(t)){e.next=2;break}return e.abrupt("return",Um.resolve());case 2:this.publications.delete(t),t.stop();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_subscribe",value:(o=ry(Cg.mark((function e(t){var r,n,i,o=arguments;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(o.length>1&&void 0!==o[1])||o[1],n=!(o.length>2&&void 0!==o[2])||o[2],e.next=4,this.vms.subscribe(t,{audio:r,video:n});case 4:return i=e.sent,this.subscriptions.add(i),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_stopSubscribe",value:(i=ry(Cg.mark((function e(t){return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.subscriptions.has(t)){e.next=2;break}return e.abrupt("return",Um.resolve());case 2:this.subscriptions.delete(t),t.stop();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_leaveRoom",value:(n=ry(Cg.mark((function e(){var t,r,n,i,o,a,s,u;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.vms){e.next=2;break}return e.abrupt("return",Um.resolve());case 2:n=wI(this.publications),e.prev=3,n.s();case 5:if((i=n.n()).done){e.next=11;break}return o=i.value,e.next=9,this._stopPublishStream(o);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:a=wI(this.subscriptions),e.prev=20,a.s();case 22:if((s=a.n()).done){e.next=28;break}return u=s.value,e.next=26,this._stopSubscribe(u);case 26:e.next=22;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(20),a.e(e.t1);case 33:return e.prev=33,a.f(),e.finish(33);case 36:return Jm(t=this.localStream).call(t,(function(e){var t,r,n;null===(t=e)||void 0===t||null===(r=t.stream)||void 0===r||Jm(n=r.getTracks()).call(n,(function(e){return e.stop()})),e=null})),e.next=39,null===(r=this.vms)||void 0===r?void 0:r.leave();case 39:case"end":return e.stop()}}),e,this,[[3,13,16,19],[20,30,33,36]])}))),function(){return n.apply(this,arguments)})},{key:"init",value:function(){var e=this;return this.vms=new bI,this.vms.addEventListener("streamadded",(function(t){e._onSteamAdd(t)})),this.vms.addEventListener("participantjoined",(function(t){e._onParticipantjoined(t)})),this.vms.addEventListener("serverdisconnected",(function(t){e._onServerdisconnected(t)})),this.vms}},{key:"startCall",value:(r=ry(Cg.mark((function e(t){var r;return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=4,this._joinRoom(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"endCall",value:(t=ry(Cg.mark((function e(){return Cg.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._leaveRoom();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"destory",value:function(){this.vms.clearEventListener("streamadded"),this.vms.clearEventListener("participantjoined"),this.vms.clearEventListener("serverdisconnected"),this.vms=null}}]),e}();export{_I as default};